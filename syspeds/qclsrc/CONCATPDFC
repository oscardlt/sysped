PGM (&INPDF &OUTPDF &JDEBUG)

  COPYRIGHT  ('Giuseppe Costagliola 2005 - beppecosta@yahoo.it')


  DCL &INPDF      *CHAR  30000
  DCL &OUTPDF     *CHAR  100
  DCL &JDEBUG     *CHAR  4

  DCL &CMD        *CHAR  30000

  DCL &NUMPDF     *DEC   5
  DCL &PDF        *CHAR  30000

  DCL &OFF        *DEC   5
  DCL &A          *CHAR  1

  DCL &ERRORSW    *LGL
  DCL &ERRORSW    *LGL
  MONMSG CPF0000 EXEC(GOTO ERROR)

  CHGVAR &NUMPDF %BIN(&INPDF 1 2)

  CHGVAR &A ''''
  CHGVAR &CMD  ('RUNJVA CLASS(CONCATPDF) PARM(')
  CHGVAR &OFF 3

BLDLIST:
  CHGVAR &PDF %SST(&INPDF &OFF 100)
  CHGVAR &CMD (&CMD *BCAT &A *TCAT &PDF *TCAT &A)
  CHGVAR &NUMPDF (&NUMPDF - 1)
  CHGVAR &OFF (&OFF + 100)
  IF (&NUMPDF > 0) GOTO BLDLIST

  CHGVAR &CMD (&CMD *BCAT &A *TCAT &OUTPDF +
               *TCAT &A *BCAT &A *TCAT &JDEBUG +
               *TCAT &A *TCAT ')')

  CHGVAR &CMD (&CMD *BCAT 'CLASSPATH(' *TCAT +
              &A *TCAT '/pdfm/itext-1.3.6.jar:/pdfm/:.' +
              *TCAT &A *TCAT ')')

  /*CHGVAR &CMD (&CMD *BCAT 'OUTPUT(*)')*/
  IF (&JDEBUG = *NO) CHGVAR &CMD (&CMD *BCAT 'OUTPUT(*NONE)')
  ELSE CHGVAR &CMD (&CMD *BCAT 'OUTPUT(*)')

  CALL QCMDEXC (&CMD 30000)

  RETURN

/********************************************************************/
/* Errors                                                           */
/********************************************************************/

ERROR:
  IF &ERRORSW SNDPGMMSG MSGID(CPF9899) +
     MSGF(QCPFMSG) MSGTYPE(*ESCAPE)    /* FUNCTION CHECK           */
  CHGVAR &ERRORSW '1'                  /* SET SWITCH TO ERROR      */
  CALL QMHRSNEM ('    ' X'0000000F0000000040404040404040' +
                 X'000000015CD5D6D5C540404040405CD5D6D5C54040404040+
                   000000095CD7C7D4C2C4E840404040404040404040404040' +
                 X'00000030' RSNM0100 * X'00000000')

ENDPGM
