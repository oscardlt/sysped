/* P06001 PTF6 JOV NYTT PROG FOR TURRAPPORT    */
             PGM
             DCL        VAR(&PARM1) TYPE(*CHAR) LEN(256)
             DCL        VAR(&IN01) TYPE(*LGL) LEN(1) /* Hvis &in01 +
                          på, betyr det avslutt program fra +
                          avdelingsvalg. */
             DCL        VAR(&PRT) TYPE(*CHAR) LEN(10) /* Printernavn */
             DCL        VAR(&PT) TYPE(*CHAR) LEN(10) /* Papirtype */
             DCL        VAR(&JOBQ) TYPE(*CHAR) LEN(1) VALUE('J') /* +
                          JOBBKØ      */
             OVRMSGF    MSGF(QUSERMSG) TOMSGF(SYMSGF)

             CALL       PGM(SYKS31A) PARM(&PARM1 &PRT &PT &JOBQ &IN01)

             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* */
             IF         COND(&PRT = '*') THEN(CHGVAR VAR(&PRT) +
                          VALUE(' '))
             IF         COND(&PRT = ' ') THEN(CHGVAR VAR(&JOBQ) +
                          VALUE('N'))
             IF         COND(&JOBQ = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYKS31CLJ) PARM(&PARM1 &PRT +
                          &PT)) JOB(SYRESRAP) JOBD(*USRPRF) +
                          JOBQ(SYJOBQPRT)
             SNDPGMMSG  MSG('Utskrift av turrapport er sendt i jobkø +
                          SYJOBQPRT.')
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYKS31CLJ) PARM(&PARM1 &PRT &PT)
                        ENDDO
    /* */
 SLUTT:      ENDPGM
