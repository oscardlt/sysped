/*  BYTTET GETPR2 MED GETPRN FOR DRAWER OG ANTAL.L KOPIER */
             PGM
             DCL        VAR(&DRAWER) TYPE(*CHAR) LEN(7)
             DCL        VAR(&DRAWUT) TYPE(*CHAR) LEN(11)
             DCL        VAR(&COPIES)  TYPE(*CHAR) LEN(6)
             DCL        VAR(&PNAVN)  TYPE(*CHAR) LEN(10)
             DCL        VAR(&FORM)  TYPE(*CHAR) LEN(10)
             DCL        VAR(&LOGO)  TYPE(*CHAR) LEN(9)
             DCL        VAR(&TLAS) TYPE(*DEC) LEN(3 0) VALUE(095)
             DCL        VAR(&LASER) TYPE(*CHAR) LEN(1)
             DCL        VAR(&LPP) TYPE(*DEC) LEN(3 0) VALUE(72)
             DCL        VAR(&LPI2) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&IN01) TYPE(*LGL) LEN(1) /* Hvis &in01 +
                          på, betyr avslutt program */
             DCL        VAR(&IN02) TYPE(*LGL) LEN(1) VALUE('1') /* +
                          Hvis &in01 på, betyr det at det skal +
                          bruke forhåndstrykkeformular */
             DCL        VAR(&AVD) TYPE(*DEC) LEN(4 0) /* Avdeling. */
             DCL        VAR(&AVDA) TYPE(*CHAR) LEN(4) /* Avdeling. */
             DCL        VAR(&SG) TYPE(*CHAR) LEN(3) /* Signatur. */
             DCL        VAR(&DTY) TYPE(*CHAR) LEN(2) /* +
                          Tolldeklarasjonstype. */
             DCL        VAR(&ST) TYPE(*CHAR) LEN(1) /* Turenstatus. */
             DCL        VAR(&LSTP) TYPE(*CHAR) LEN(10) /* +
                          Printernavn til lasteliste på SAD. */
             DCL        VAR(&LSTTYPE) TYPE(*CHAR) LEN(10)
             DCL        VAR(&ANT) TYPE(*CHAR) LEN(1) VALUE('0') /* +
                          Antall lasteliste som er utskrevet */
                                                          /**/
 START:      CALL       PGM(SAD025X) PARM(&AVD &SG &DTY &ST &LSTP +
                          &LSTTYPE &IN01)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutt program. */
    /* */
    /* SJEKKER OM LASER */
    /* */
             RTVDTAARA  DTAARA(*LDA (15 4)) RTNVAR(&AVDA)
             CALL       PGM(GETPRN) PARM(&AVDA &TLAS &PNAVN &FORM +
                          &LASER &LPI2 &DRAWER &COPIES &LOGO &DRAWUT)
             IF         COND(&LASER = 'J') THEN(DO)
             CHGVAR     VAR(&LPP) VALUE('066')
             ENDDO
    /* */
                                                          /**/
             OVRPRTF    FILE(DATALIST) PAGESIZE(&LPP 130) CPI(15) +
                          OVRFLW(&LPP) DRAWER(&DRAWER) +
                          OUTBIN(&DRAWUT) FRONTOVL(&LOGO) +
                          OUTQ(&LSTP) FORMTYPE(&LSTTYPE) +
                          COPIES(&COPIES)
             CALL       PGM(SAD025Y) PARM(&IN01 &IN02 &AVD &SG &DTY +
                          &ST &ANT)
             IF         COND(&IN01 = '0') THEN(GOTO CMDLBL(START)) /* +
                          Hvis &IN01 av, går til start. */
                                                          /**/
 SLUTT:      IF         COND(&ANT *GT '0') THEN(SNDUSRMSG MSG(' ' +
                          *BCAT &ANT *BCAT ' lasteliste er +
                          utskrevet') MSGTYPE(*INFO))
                                                          /**/
             ENDPGM
