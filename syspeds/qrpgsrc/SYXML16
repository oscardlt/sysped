      *    UTGÅR??? - se SYTG01 / 02
      ***********************************************************
      *** PROGRAM SKAL KONVERTER XML-FIL TIL TP SERVICESTEDER ***
      *** INDIKATORER 01 - 26 KUN CMD-TASTER / ROLL TASTER    ***
      *** LEDIGE INDIKATORER 01 02 04 07 09-11 13-24          ***
      *** LEDIGE INDIKATORER 27-29 31 32 34-39 41-88 95-97    ***
      ***********************************************************
      *
     FXMLRCVF   IF   E           K DISK
     FTPSERV    UF A E           K DISK
      *
     D                 DS
     D  XTXT                   1     15
     D  XT                     1     15    DIM(15)
     D                 DS
     D  XTAL                   1     15  3
     D  XTALH                  1     12  0
     D  XTALD1                13     13
     D  XTALD2                14     14
     D  XTALD3                15     15
      *
     C                   EXSR      INIT
      *
     C                   EXSR      SRXML1
      *
     C                   EVAL      *INLR = *ON
     C                   RETURN
      *
      ***********************************************
     C     SRXML1        BEGSR
      ***********************************************
      *
      * HENT MELDINGS REFERANSE
     C                   Z-ADD     2             X001_XRLEV3
     C     STSRXML1      TAG
     C                   ADD       1             X001_XRLEV3
     C                   Z-ADD     2             X001_XRLEV1
     C                   Z-ADD     1             X001_XRLEV2
     C                   Z-ADD     1             X001_XRLEV4
     C                   Z-ADD     0             X001_XRLEV5
     C                   Z-ADD     0             X001_XRLEV6
     C                   Z-ADD     0             X001_XRLEV7
     C                   Z-ADD     0             X001_XRLEV8
     C                   Z-ADD     0             X001_XRLEV9
     C     XMLKEY01      CHAIN     XMLRCVF                            33
     C     *IN33         CABEQ     *ON           SLSRXML1
     C                   IF        XRNV  = 'ServicepartnerID'
     C                   CLEAR                   TPSERVR
     C                   MOVEL     XRVERD        TPSEID
     C                   EXSR      SRXML2
     C                   GOTO      STSRXML1
     C                   END
      *
     C     SLSRXML1      ENDSR
      *
      ***********************************************
     C     SRXML2        BEGSR
      ***********************************************
     C                   EVAL      X002_XRLEV1 = XRLEV1
     C                   EVAL      X002_XRLEV2 = XRLEV2
     C                   EVAL      X002_XRLEV3 = XRLEV3
     C                   EVAL      X002_XRLEV4 = XRLEV4
     C                   EVAL      X002_XRLEV4 = 2
     c     TPSEID        CHAIN     TPSERV                             44
      *
     C     XMLKEY02      SETLL     XMLRCVF
      *
     c                   setoff                                       35
      *
     C     *in35         doweq     '0'
     C     XMLKEY03      READE     XMLRCVF                                35
     C     *in35         ifeq      '0'
      *
      * CompanyID
      *
     C                   IF        XRNV  = 'CompanyID'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPCOID
     C                   END
      *
      *
      * TollpostDepot
     C*
     C                   IF        XRNV  = 'TollpostDepot'
     C                   MOVEL     XRVERD        TPDEPO
     C                   END
      *
      *
      *
      *
      * CompanyName1
     C
     C                   IF        XRNV  = 'CompanyName1'
     C                   MOVEL     XRVERD        TPNAVN
     C                   END
      *
      *
      *
      * StreetAddress1
     C                   IF        XRNV  = 'StreetAddress1'
     C                   MOVEL     XRVERD        TPADR1
     C                   END
      *
      *
      * PostalCode
     C                   IF        XRNV  = 'PostalCode'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPPONR
     C                   END
      *
      *
      *
      * City
     C                   IF        XRNV  = 'PostalCode'
     C                   MOVEL     XRVERD        TPSTED
     C                   END
      *
      * CouncilNbr
     C                   IF        XRNV  = 'CouncilNbr'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPKONO
     C                   END
      *
      *
      * CouncilName
     C                   IF        XRNV  = 'CouncilName'
     C                   MOVEL     XRVERD        TPKONA
     C                   END
      *
      *
      * CountyNbr
      *
     C                   IF        XRNV  = 'CountyNbr'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPFYNO
     C                   END
      *
      *
      * CountyName
      *
     C                   IF        XRNV  = 'CountyName'
     C                   MOVEL     XRVERD        TPFYNA
     C                   END
      *
      *
      *
      * UTM33X
      *
     C                   IF        XRNV  = 'UTM33X'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPM33X
     C                   end
      *
      *
      *
      * UTM33Y
      *
     C                   IF        XRNV  = 'UTM33Y'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPM33Y
     c                   end
      *
      *
      *
      *
      * Distance
      *
     C                   IF        XRNV  = 'Distance'
     C                   MOVEL     XRVERD        XTXT
     C                   EXSR      KNVTAL
     C                   Z-ADD     XTAL          TPM33Y
     C                   END
      *
      *
      *
      *
      * MapTerminal
      *
     C                   IF        XRNV  = 'MapTerminal'
     C                   MOVEL     XRVERD        TPMAPT
     c                   end
      *
      *
      *
      *
      * MapBig
      *
     C                   IF        XRNV  = 'MapBig'
     C                   MOVEL     XRVERD        TPMAPB
     c                   end
      *
      *
      *
      *
      * MapMedium
      *
     C                   IF        XRNV  = 'MapMedium'
     C                   MOVEL     XRVERD        TPMAPM
     c                   end
      *
      *
      *
      *
      * MapSmall
      *
     C                   IF        XRNV  = 'MapSmall'
     C                   MOVEL     XRVERD        TPMAPS
     C                   end
      *
     C                   end
     C                   end
      *
     c   44              WRITE     TPSERVR
     c  N44              UPDATE    TPSERVR
     C                   ENDSR
      *
      ***********************************************
     C     KNVTAL        BEGSR
      ***********************************************
     C                   MOVE      *ZEROS        XTAL
     C     1             DO        15            XN                3 0          1<-B
     C                   IF        ((XT(XN) = *BLANKS) OR (XT(XN) = '.'))        2<-B
     C                   LEAVE
     C                   ENDIF                                                   2<-E
     C                   MULT      10            XTALH
     C                   MOVE      XT(XN)        XTALH
     C                   ENDDO                                                  1<-E
      *
     C                   IF        XT(XN) = '.'                                 1<-B
     C                   ADD       1             XN
     C                   MOVE      XT(XN)        XTALD1
     C                   ADD       1             XN
     C                   IF        XT(XN) <> ' '                                 2<-B
     C                   MOVE      XT(XN)        XTALD2
     C                   ADD       1             XN
     C                   IF        XT(XN) <> ' '                                  3<-B
     C                   MOVE      XT(XN)        XTALD3
     C                   END                                                      3<-E
     C                   END                                                     2<-E
     C                   END                                                    1<-E
      *
     C                   ENDSR
      *
      ***********************************************
     C     INIT          BEGSR
      ***********************************************
     C     *ENTRY        PLIST
     C                   PARM                    USN               7
     C                   move      USN           XRSN
      *
     C     XMLKEY01      KLIST
     C                   KFLD                    XRSN
     C                   KFLD                    X001_XRLEV1
     C                   KFLD                    X001_XRLEV2
     C                   KFLD                    X001_XRLEV3
     C                   KFLD                    X001_XRLEV4
     C                   KFLD                    X001_XRLEV5
     C                   KFLD                    X001_XRLEV6
     C                   KFLD                    X001_XRLEV7
     C                   KFLD                    X001_XRLEV8
     C                   KFLD                    X001_XRLEV9
     C     XMLKEY02      KLIST
     C                   KFLD                    XRSN
     C                   KFLD                    X002_XRLEV1
     C                   KFLD                    X002_XRLEV2
     C                   KFLD                    X002_XRLEV3
     C                   KFLD                    X002_XRLEV4
      *
     C     XMLKEY03      KLIST
     C                   KFLD                    XRSN
     C                   KFLD                    X002_XRLEV1
     C                   KFLD                    X002_XRLEV2
     C                   KFLD                    X002_XRLEV3
      *
     C     *LIKE         DEFINE    XRLEV1        X001_XRLEV1
     C     *LIKE         DEFINE    XRLEV2        X001_XRLEV2
     C     *LIKE         DEFINE    XRLEV3        X001_XRLEV3
     C     *LIKE         DEFINE    XRLEV4        X001_XRLEV4
     C     *LIKE         DEFINE    XRLEV5        X001_XRLEV5
     C     *LIKE         DEFINE    XRLEV6        X001_XRLEV6
     C     *LIKE         DEFINE    XRLEV7        X001_XRLEV7
     C     *LIKE         DEFINE    XRLEV8        X001_XRLEV8
     C     *LIKE         DEFINE    XRLEV9        X001_XRLEV9
     C     *LIKE         DEFINE    XRLEV1        X002_XRLEV1
     C     *LIKE         DEFINE    XRLEV2        X002_XRLEV2
     C     *LIKE         DEFINE    XRLEV3        X002_XRLEV3
     C     *LIKE         DEFINE    XRLEV4        X002_XRLEV4
     C     *LIKE         DEFINE    XRNV          X001_XRNV
      *
      *
     C                   CALL      'SYGE15C'
     C                   PARM                    WDT               8
     C                   PARM                    WTM               6
     C                   MOVE      WDT           WDT08             8 0
      *
     C                   ENDSR
      *
