/*-------------------------------------------------------------------*/
/* PROGRAM CGIDEV2/QTMHHTP1 can be run only by QSECOFR               */
/*                                                                   */
/* This program:                                                     */
/*  - adds user profiles                                             */
/*              QTMHHTP1       HTTP SERVER CGI PROFILE               */
/*              QTMHHTTP       HTTP SERVER PROFILE                   */
/*    to system distribution directory.                              */
/*    This is needed to allow CGI programs to access                 */
/*    stream files in QDLS, as they are run under this user profile. */
/*                                                                   */
/*-------------------------------------------------------------------*/
             PGM
             DCL        VAR(&USRPRF) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LCLCPNAME) TYPE(*CHAR) LEN(8)
             MONMSG     MSGID(CPF0000)
/*===================================================================*/
/* CHGUSRPRF                                                         */
/*===================================================================*/
             CHGUSRPRF  USRPRF(QTMHHTTP) STATUS(*ENABLED)
             CHGUSRPRF  USRPRF(QTMHHTP1) STATUS(*ENABLED)
/*===================================================================*/
/* ADDDIRE                                                           */
/*===================================================================*/
             RTVNETA    LCLCPNAME(&LCLCPNAME)
             ADDDIRE    USRID(QTMHHTTP &LCLCPNAME) USRD('HTHTTP +
                          SERVER PROFILE') USER(QTMHHTTP)
             ADDDIRE    USRID(QTMHHTP1 &LCLCPNAME) USRD('HTTP SERVER +
                          CGI PROFILE') USER(QTMHHTP1)
/*===================================================================*/
/* GRANT OBJECT AUTORITIES                                           */
/*===================================================================*/
             GRTOBJAUT  OBJ(CGIDEV2) OBJTYPE(*LIB) USER(QTMHHTP1)
/*===================================================================*/
/* CHANGE JOB DESCRIPTION                                            */
/*===================================================================*/
  /*prior to OS400 V4R3M0*/
             CHGJOBD    JOBD(QTCP/QTMHHTTP) LOG(4 0 *SECLVL) +
                          INQMSGRPY(*DFT)
  /*OS400 V4R3M0 on*/
             CHGJOBD    JOBD(QHTTPSVR/QZHBHTTP) LOG(4 0 *SECLVL) +
                          INQMSGRPY(*DFT)
/*===================================================================*/
/*  Back to caller                                                   */
/*===================================================================*/
RETURN:
             RETURN
             ENDPGM
