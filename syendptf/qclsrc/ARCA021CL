/* ********************************************************************    */
/* *    KOPIERT FRA ARCA001CL                                         *    */
/* *    "Agent" som behandler skannede dokumenter i ulike mapper      *    */
/* *    og sender disse videre til arkivsystemet/oppdaterer arkivlogg *    */
/* ********************************************************************    */
             PGM
             DCL        VAR(&ARKJN) TYPE(*CHAR) LEN(1) /* Benyttes +
                          arkiv? */
             DCL        VAR(&DIR) TYPE(*CHAR) LEN(100) /* +
                          Directory/mappe som leses inn */
             DCL        VAR(&PGM) TYPE(*CHAR) LEN(10) /* Program som +
                          skal behandle vellykket lest fil */
             DCL        VAR(&TIME) TYPE(*CHAR) LEN(6)
/* OM ARKIV IKKE BENYTTES - HOPP UT */
             CALL       PGM(ARC015) PARM(&ARKJN)
             IF         COND(&ARKJN = 'N') THEN(GOTO CMDLBL(SLUTT))

/* STANDARD MAPPESTRUKTUR FINNES IKKE ->  BYGG */
             md '/sysca/UNZIP'
             MONMSG     MSGID(CPFA0A0)

/* UNZIPP fil */
 START:
             CHGVAR     VAR(&DIR) VALUE('/sysca/UNZIP')
             CHGVAR     VAR(&PGM) VALUE('ARCA022R')
             CALL       PGM(ARCA021R) PARM(&DIR &PGM)


/* Vent xxx sekunder - ny runde */
             DLYJOB     DLY(10)
             RTVSYSVAL  SYSVAL(QTIME) RTNVAR(&TIME)
             IF         COND(&TIME *GT '235000') THEN(GOTO +
                          CMDLBL(SLUTT))
             GOTO       CMDLBL(START)

 SLUTT:      ENDPGM
