/* *********************************************************************   */
/*       * RETTINGER I DETTE PROGRAM:                                      */
/* PTFnr:*Sek Sig Vers  Beskrivelse..........................              */
/* """"""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""    */
/* 10XXX * 01 CB  PTF10 FEIL LENGDE PÅ PARAMETER                           */
/* 10236 * 02 CB  PTF10 HENTE HOS EVRY, JA/NEI                             */
/* 10236 * 03 SH  PTF12 BORT MED HISTORIKKBIB                              */
/* 12XXX * 04 CB  PTF12 FJERNET PTF 03                                     */
/* ********************************************************************    */
             PGM        PARM(&IID)
             /*_____________________*/
             /* Deklarere Variabler */
             /*"""""""""""""""""""""*/
             DCL        VAR(&LIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LIBH) TYPE(*CHAR) LEN(10)
             DCL        VAR(&IID) TYPE(*CHAR) LEN(35)
/*S01        DCL        VAR(&RMTSYS) TYPE(*CHAR) LEN(10)     */
/*N01*/      DCL        VAR(&RMTSYS) TYPE(*CHAR) LEN(64)
             DCL        VAR(&OK) TYPE(*CHAR) LEN(2) VALUE('  ')
/*N02*/      DCL        VAR(&HENTERGO) TYPE(*CHAR) LEN(1)
             /*____________________________________*/
             /* Hvilket bibliotek ligger filen i ? */
             /*""""""""""""""""""""""""""""""""""""*/
             RTVDTAARA  DTAARA(EDIDTA (171 10)) RTNVAR(&LIB)
             RTVDTAARA  DTAARA(EDIDTA (181 10)) RTNVAR(&LIBH)
             /*__________________________________*/
             /* Lag CMD fil for å hente oversikt */
             /*""""""""""""""""""""""""""""""""""*/
             CLRPFM     FILE(EDI07CAR)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(EDI07CAS)
             MONMSG     MSGID(CPF0000)
/*S02        CALL       PGM(EDI07CARR2) PARM(&IID &RMTSYS)    */
/*N02*/      CALL       PGM(EDI07CARR2) PARM(&IID &RMTSYS &HENTERGO)
/*N02*/      IF         COND((&HENTERGO *EQ ' ') *OR (&HENTERGO *EQ +
                          'N')) THEN(GOTO CMDLBL(EXIT))
             /*_______________*/
             /* Hent oversikt */
             /*"""""""""""""""*/
/*N04*/      ADDLIBLE   LIB(&LIBH) POSITION(*LAST)
/*N04*/      MONMSG     MSGID(CPF0000)
/*N04*/      CHGCURLIB  CURLIB(&LIBH)
             OVRDBF     FILE(INPUT) TOFILE(EDI07CAR)
             OVRDBF     FILE(OUTPUT) TOFILE(EDI07CAS)
             STRTCPFTP  RMTSYS(&RMTSYS)
             CHGCURLIB  CURLIB(*CRTDFT)
             CHKOBJ     OBJ(&LIBH/LSOUTPUT) OBJTYPE(*FILE) +
                          MBR(LSOUTPUT) AUT(*ALL)
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(EXIT))
             OVRDBF     FILE(LSOUTPUT) TOFILE(&LIBH/LSOUTPUT)
             /*_______________________________*/
             /* Lag CMD fil for å Hente filer */
             /*"""""""""""""""""""""""""""""""*/
             CLRPFM     FILE(EDI07CAR)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(EDI07CAS)
             MONMSG     MSGID(CPF0000)
             CALL       PGM(EDI07CARR3) PARM(&LIB &IID)
             /*__________________*/
             /* Hent komponenter */
             /*""""""""""""""""""*/
             OVRDBF     FILE(INPUT) TOFILE(EDI07CAR)
             OVRDBF     FILE(OUTPUT) TOFILE(EDI07CAS)
             STRTCPFTP  RMTSYS(&RMTSYS)
             MONMSG     MSGID(CPF0000)
 EXIT:
             ENDPGM
