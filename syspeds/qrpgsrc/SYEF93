      ***********************************************************
      *** PROGRAM WHO REMOVES ORDERS FROM CONSOLIDATION       ***
      ***********************************************************
     FHEADF     UF   E           K DISK
     FDOKEF     UF   E           K DISK
     FSAMLB     UF   E           K DISK
     FFAK2      UF   E           K DISK
     FKODTA     IF   E           K DISK
     FKODTSF    IF   E           K DISK
     FSYEF93FM  CF   E             WORKSTN
     D                 DS
     D  WSDTD                  1      2  0
     D  WSDTM                  3      4  0
     D  WSDTÅ                  5      6  0
     D  WSDT                   1      6  0
     D                 DS
     D  SMDTÅ                  1      4  0
     D  SMDTM                  5      6  0
     D  SMDTD                  7      8  0
     D  SMDT                   1      8  0
     D                 DS
     D  WSSD                   1      3
     D  WSLNR                  4      6  0
     D  XSAML2                 1      6
     D                UDS
     D  WSAVD                 15     18  0
     D  WSSG                  19     21
     C*
     C                   EXSR      INIT
     C*
     C     START         TAG
     C                   EXFMT     BILDE01
     C                   MOVEA     '0000'        *IN(96)
     C   03              GOTO      SLUTT
     C*
     C     KODSFK        CHAIN     KODTSF                             99
     C   99              GOTO      START
     C     KODTAK        CHAIN     KODTA                              98
     C   98              GOTO      START
     C     HEADFK        CHAIN     HEADF                              97
     C  N97              DO
     C     HEST          COMP      'O'                                    97
     C  N97HESG          COMP      WSSG                               9797
     C  N97HESAML        COMP      XSAML2                             9797
     C   97              UPDATE    HEADFR
     C                   END
     C   97              GOTO      START
     C     SAMLBK        CHAIN     SAMLB                              96
     C   96              GOTO      START
     C                   MOVE      SMDTD         WSDTD
     C                   MOVE      SMDTM         WSDTM
     C                   MOVE      SMDTÅ         WSDTÅ
     C*
     C                   EXSR      KDTFMT
     C                   EXFMT     BILDE02
     C                   EXSR      KDTFMT
     C   05              DO
     C     DOKEFK        CHAIN     DOKEF                              33
     C  N33              DELETE    DOKEFR
     C                   SUB       1             SMNT
     C                   MOVE      ' '           HEST
     C                   MOVE      '99999991'    HEPRO
     C                   MOVE      *BLANKS       HESAML
     C                   MOVE      *ZEROS        HEGN
     C                   MOVE      *ZEROS        HEHAWB
     C                   MOVEL     '    '        HEGN
     C                   END
     C*
     C                   UPDATE    SAMLAR
     C                   UPDATE    HEADFR
     C     FAKTKE        SETLL     FAK2
     C*
     C* DELETE'S INVIOCELINES ON CONSOLLIDATION
     C*
     C     STFA          TAG
     C     FAKTKE        READE     FAK2                                   32
     C  N32FAOPKO        IFEQ      ' '
     C                   DELETE    FAKTR
     C                   END
     C  N32FAOPKO        IFEQ      'F'
     C                   MOVE      'D'           FAKDA
     C                   MOVEL     '*DELETE*'    FAVT
     C                   UPDATE    FAKTR
     C                   END
     C  N32              GOTO      STFA
     C                   GOTO      START
     C*
     C     SLUTT         TAG
     C                   SETON                                        LR
     C                   RETURN
     C*
     C***********************************************
     C     INIT          BEGSR
     C***********************************************
     C     HEADFK        KLIST
     C                   KFLD                    WSAVD
     C                   KFLD                    WSOPD
     C     DOKEFK        KLIST
     C                   KFLD                    YRI
     C                   KFLD                    WSAVD
     C                   KFLD                    WSOPD
     C     SAMLBK        KLIST
     C                   KFLD                    WSSD
     C                   KFLD                    WSLNR
     C     KODTAK        KLIST
     C                   KFLD                    YAUNI
     C                   KFLD                    WSAVD
     C     KODSFK        KLIST
     C                   KFLD                    YSFUNI
     C                   KFLD                    WSSG
     C     FAKTKE        KLIST
     C                   KFLD                    WSAVD
     C                   KFLD                    WSOPD
     C                   KFLD                    WSSK              1
     C*
     C                   MOVE      'K'           WSSK              1
     C                   MOVE      'F'           YRI               1
     C                   MOVE      'A'           YAUNI             1
     C                   MOVE      'SF'          YSFUNI            2
     C                   MOVE      *ZEROS        WSDT
     C                   MOVE      *ZEROS        WSLNR
     C*
     C                   ENDSR
     C*
     C***********************************************
     C     KDTFMT        BEGSR
     C***********************************************
     C                   MOVE      WSDTD         UDT1              2 0
     C                   MOVE      WSDTM         UDT2              2 0
     C                   MOVE      WSDTÅ         UDT3              2 0
     C                   CALL      'DATOFMT'
     C                   PARM                    UDT1
     C                   PARM                    UDT2
     C                   PARM                    UDT3
     C                   MOVE      UDT1          WSDTD
     C                   MOVE      UDT2          WSDTM
     C                   MOVE      UDT3          WSDTÅ
     C*
     C                   ENDSR
     C*
