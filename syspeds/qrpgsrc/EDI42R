********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
10013 * 01 CB  PTF10 EDISSS endret
********************************************************************
     FEDI42D    CF   E             WORKSTN
     F                                     SFILE(EDI42DB:ZRECNO)
     FEDISS     IF   E           K DISK
      *//////////////
      *  Hodelogikk /
      *//////////////
     C                   EXSR      SRA
     C                   EXSR      SRB
     C                   MOVE      '1'           *INLR
     C                   RETURN
      *////////////////////////////////////////////////////////////
      *  Initiering                                           SRA /
      *////////////////////////////////////////////////////////////
     C     SRA           BEGSR
      *___________________
      * Definiere Workfelt
      *"""""""""""""""""""
     C     *LIKE         DEFINE    SSSN          SSN
      *_________________
      * Input parametrer
      *"""""""""""""""""
     C     *ENTRY        PLIST
     C                   PARM                    SSN
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      *  Bearbeide Formater                                   SRB /
      *////////////////////////////////////////////////////////////
     C     SRB           BEGSR
      *______________
      * Tømme Subfile
      *""""""""""""""
     C                   MOVE      '1'           *IN93
     C                   WRITE     EDI42DC
     C                   MOVEA     '000'         *IN(93)
     C                   Z-ADD     *ZERO         ZRECNO
      *_____________
      * Fyll Subfile
      *"""""""""""""
     C     SSN           SETLL     EDISS
     C     SSN           READE     EDISS                                  94
     C     *IN94         DOWEQ     '0'
     C                   ADD       1             ZRECNO
     C                   WRITE     EDI42DB
      *
     C     SSN           READE     EDISS                                  94
     C  N94              ENDDO
     C     ZRECNO        IFEQ      0
     C                   ADD       1             ZRECNO
     C                   WRITE     EDI42DB
     C                   ENDIF
     C                   Z-ADD     1             ZRECNO
      *_______________
      * Behandle bilde
      *"""""""""""""""
     C     SRB5          TAG
      *
     C                   MOVEA     '11'          *IN(91)
     C                   MOVE      'SY00000'     ZMSGNO
     C                   WRITE     EDI42DØ
     C                   WRITE     EDI42DD
     C                   EXFMT     EDI42DC
      *
     C                   MOVEA     '00'          *IN(91)
      *_______
      * Valg ?
      *"""""""
     C                   MOVE      '0'           *IN52
     C                   MOVE      '0'           *IN95
     C     *IN52         DOWEQ     '0'
      *
     C                   READC     EDI42DB                                52
     C     *IN52         IFEQ      '0'
     C     ZOP           CASEQ     '5'           SRBE
     C                   END
     C                   END
      *
     C                   END
      *
     C     SRB9          ENDSR
      *////////////////////////////////////////////////////////////
      *  Vise loggdetaljer 3-level                           SRBE /
      *////////////////////////////////////////////////////////////
     C     SRBE          BEGSR
      *_____________________
      * Call på eksternt pgm
      *"""""""""""""""""""""
N01  C                   MOVE      SSDT          UDT               8
N01  C                   MOVE      SSTM          UTM               6
     C                   CALL      'EDI43R'
     C                   PARM                    SSSN
N01  C                   PARM                    UDT
N01  C                   PARM                    UTM
      *_________________
      * Oppdatere SUBFIL
      *"""""""""""""""""
     C                   MOVE      *BLANKS       ZOP
     C                   UPDATE    EDI42DB
      *
     C                   ENDSR
