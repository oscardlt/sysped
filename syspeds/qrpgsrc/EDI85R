********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
10030 * 01 CB  PTF10 Hent IFS bane slik at navn kan valideres
xxxxxx*xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
11XXX * 02 YBC PTF11 KONVERTER XML (KVITTERING TIL EHF-FAKTURA)
********************************************************************
     FEDI79F    UF   E             DISK
     FEDI85F    O  A E             DISK
N01  FEDISX2    IF   E           K DISK
     D A               S              1    DIM(80)
     D                 DS
     D  RDATA                  1     80
     D  RTYBBS                 1      8
     D  RTYDNB                41     48
     D  RTYPE                  1      4
     D  AH100                  1      5
N02  D TSTXML          C                   CONST('<?xml version=')
      *
     C     *ENTRY        PLIST
     C                   PARM      WTYPE         WTYPE             4
N01  C                   PARM                    WSXWORKM
     C                   MOVE      *BLANKS       WTYPE
N01  C     *LIKE         DEFINE    SXWORKM       WSXWORKM
N01   * Hent IFS katalog og filnavn
N01   * Har nå variabel: SXIFSOBJ som inneholder katalogbane + filnavn
N01   * hvis en vill teste på filnavn isteden for innehold.
N01  C     WSXWORKM      CHAIN     EDISX2
N01   * Exempellinje, bytt ut YYY.XXX med aktuell verdi
N01  C     'YYY.XXX'     SCAN      SXIFSOBJ                               53
      *
     C                   READ      EDI79F                                 51
      *
      * DETALJPOSTER KAN HA AH100 I SEG
      *
      *
     C     *IN51         DOWEQ     '0'
      *
     C     'UNA:+,?'     SCAN      RDATA         WPOS              2 0    52
     C  N52'UNA:+.?'     SCAN      RDATA         WPOS              2 0    52
     C  N52'UNB+U'       SCAN      RDATA         WPOS                     52
N02  C     TSTXML        SCAN      RDATA         WPOS2             2 0    54
     C     RTYPE         IFEQ      '*SYS'                                       IE MSG
     C     RTYPE         OREQ      'UNB+'                                       EDIFACT
     C     AH100         OREQ      'UNA:+'                                      EDIFACT
     C     RTYPE         OREQ      '*IN#'                                       SYSPED INVOI
     C     RTYBBS        OREQ      'NY000010'                                   OCR-INB
     C     RTYDNB        OREQ      'BETFOR00'                                   BANK
     C     *IN52         OREQ      *ON                                          EDIFACT
N01  C     *IN53         OREQ      *ON                                          FIL/FILTYPE
N02  C     *IN54         OREQ      *ON                                          XML
     C     *IN81         CASEQ     '1'           SRB
     C                   ENDCS
     C     *IN81         CABEQ     '1'           END
     C                   MOVE      '1'           *IN81
     C     *IN52         IFEQ      *ON
     C                   MOVEL     'UNB+'        WTYPE
     C                   EXSR      SRA
     C                   ELSE
N02  C     *IN54         IFEQ      *ON
N02  C                   MOVEL     'XMLP'        WTYPE
N02  C                   ELSE
     C                   MOVE      RTYPE         WTYPE
N02  C                   END
     C                   ENDIF
     C                   END
      *
N02  C     STNESTE       TAG
     C   81              WRITE     EDIRER
     C                   DELETE    EDI79FR
     C                   READ      EDI79F                                 51
N02  C  N51WTYPE         CABEQ     'XMLP'        STNESTE
      *
      * FOR Å SKRIVE ALLE RECORDS VED AH100 BANKAVSTEMNING
      * MÅ LEGGES ANNEN TYPE I AH100B
      *
     C  N51              END
      *
     C     END           TAG
     C                   MOVE      '1'           *INLR
      *_______________________________________________________
      * LEGG IN BLANKTEGN FREM TIL UNA ELLER UNB           SRA
      *"""""""""""""""""""""""""""""""""""""""""""""""""""""""
     C     SRA           BEGSR
     C                   MOVEA     *BLANKS       A
     C                   MOVEA     RDATA         A
     C                   MOVE      *BLANKS       RDATA
     C                   MOVEA     A(WPOS)       RDATA
     C                   ENDSR
      *_______________________________________________________
      * LEGG IN BLANKTEGN FRA OG MED UNA ELLER UNB         SRB
      *"""""""""""""""""""""""""""""""""""""""""""""""""""""""
     C     SRB           BEGSR
     C     WPOS          IFNE      1
     C     WPOS          ANDNE     0
     C                   MOVEA     *BLANKS       A
     C                   MOVEA     RDATA         A
     C                   MOVE      *BLANKS       RDATA
     C                   MOVEA     *BLANKS       A(WPOS)
     C                   MOVEA     A             RDATA
     C   81              WRITE     EDIRER
     C                   ENDIF
     C                   ENDSR
