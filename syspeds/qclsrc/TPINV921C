             PGM        PARM(&DSMNA)
             DCL        VAR(&DSMNA) TYPE(*CHAR) LEN(9)
             DCL        VAR(&KOPI) TYPE(*CHAR) LEN(1)
/*N01*/      DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
/*N01*/      DCL        VAR(&BANEA) TYPE(*CHAR) LEN(70)
/*N01*/      DCL        VAR(&BANEB) TYPE(*CHAR) LEN(70)
/*N01*/      DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
/*N01*/      DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
/*N01*/      DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&FILENA) TYPE(*CHAR) LEN(10) +
                          VALUE('TP123PB  ')
             DCL        VAR(&FILENB) TYPE(*CHAR) LEN(10) +
                          VALUE('TP123P   ')
/*______________*/
/* LES FIRMAFIL */
/*""""""""""""""*/
             DCLF       FILE(FIRMTP) RCDFMT(*ALL)
             RCVF       DEV(*FILE) RCDFMT(*FILE)
/*N02*/      IF         COND(&TPPRIN = ' ') THEN(CHGVAR VAR(&TPPRIN) +
                          VALUE('QPRINT'))
             OVRPRTF    FILE(TP123P) PAGESIZE(48 154) CPI(15) +
                          OVRFLW(46) OUTQ(&TPPRIN)
             OVRPRTF    FILE(TP123PB) PAGESIZE(70 120) CPI(15) +
                          OVRFLW(66) OUTQ(&TPPRIN)
             CALL       PGM(TPINV921R) PARM(&DSMNA &KOPI &INFOP +
                          &BANEA &BANEB)
/*______________*/
/* ARKIVERING   */
/*""""""""""""""*/
             OVRPRTF    FILE(TP123P) PAGESIZE(48 154) CPI(15) +
                          OVRFLW(46) OUTQ(OUTMAIL)
             OVRPRTF    FILE(TP123PB) PAGESIZE(70 120) CPI(15) +
                          OVRFLW(66) OUTQ(OUTMAIL)
             CHGVAR     VAR(&KOPI) VALUE('J')
             CALL       PGM(TPINV921R) PARM(&DSMNA &KOPI &INFOP +
                          &BANEA &BANEB)
/*N01  FAKTURA     */
/*N01*/      IF         COND(&BANEA *NE ' ') THEN(DO)
/*N02*/      ADDLIBLE   LIB(MMAIL) POSITION(*LAST)
/*N02*/      MONMSG     MSGID(CPF0000)
/*N01*/      RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*N01*/      IF         COND(&INFOP = 'N') THEN(DO)
/*N01*/      CVTSPLFPDF SPLF(&FILENA) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEA)
/*N01*/      ENDDO
/*N01*/      IF         COND(&INFOP = 'J') THEN(DO)
/*N01*/      CALL       PGM(INF001CL) PARM(&FILENA &QNBR &QUSER &QJOB +
                          &BANEA)
/*N01*/      ENDDO
/*N02*/      RMVLIBLE   LIB(MMAIL)
/*N02*/      MONMSG     MSGID(CPF0000)
/*N01*/      ENDDO

/*N01  KONTROLLISTE */
/*N01*/      IF         COND(&BANEB *NE ' ') THEN(DO)
/*N02*/      ADDLIBLE   LIB(MMAIL) POSITION(*LAST)
/*N02*/      MONMSG     MSGID(CPF0000)
/*N01*/      RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*N01*/      IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&FILENB) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEB)
/*N01*/      ENDDO
/*N01*/      IF         COND(&INFOP = 'J') THEN(DO)
/*N01*/      CALL       PGM(INF001CL) PARM(&FILENB &QNBR &QUSER &QJOB +
                          &BANEB)
/*N01*/      ENDDO
/*N02*/      RMVLIBLE   LIB(MMAIL)
/*N02*/      MONMSG     MSGID(CPF0000)
/*N01*/      ENDDO
             CALL       PGM(SYGE74)
             ENDPGM
