      *
      ***********************************************************
      *** PROGRAM skjekker om prestartjobber er aktive        ***
      ***********************************************************
      *
     Fsydrsbsjf UF   E           K DISK
     Fsydrstat  IF   E             DISK
     F                                     USROPN
     Fsydrsbsj  UF A E           K DISK
     D                 DS
     D  TEXTDS                 1    132
     D  JOBNVN                 4     13
     D  BRUKER                17     26
     D  JOBB                  30     35
     D  JOBTYP                39     48
     D  AKTIVE                49     58
      *
     C                   EXSR      INIT
     C*
     C*
     C* tømmer prestartf filen
     c                   exsr      tomm
     C* setter riktig subsystem i sydrsbsj
     c                   exsr      endrepre
     C* setter active i J
     c                   exsr      test
      *
     C     SLUTT         TAG
     C                   SETON                                        LR
     C                   RETURN
     C*
     C***********************************************
     C     INIT          BEGSR
     C***********************************************
     c     *entry        plist
     c                   parm                    usbs             10
     C     keyst0        KLIST
     C                   KFLD                    usbs             10
     C     keyst         KLIST
     C                   KFLD                    WSSBS            10
     C                   KFLD                    WSJOB            10
     C                   ENDSR
     C*
     C***********************************************
     C     test          BEGSR
     C***********************************************
     c                   call      'SYDR01CL0'
     c                   parm                    usbs
     c                   open      sydrstat
     c                   setoff                                       33
     c                   move      'N'           startl            1
     c     *in33         doweq     '0'
     c                   read      sydrstat                               33
     c     *in33         ifeq      '0'
     c                   move      TEXT          TEXTDS
     c     startl        ifeq      'J'
     c     jobnvn        andne     *blanks
     c                   eval      wsjob=jobnvn
     c                   eval      wssbs=usbs
     c     keyst         chain     sydrsbsj                           34
     c     *in34         ifeq      '1'
     c     aktive        ifeq      'ACTIVE'
     c     aktive        oreq      'MSGW'
     c     keyst         chain     sydrsbsjf                          35
     c     *in35         ifeq      '0'
     c     aktive        ifeq      'ACTIVE'
     c                   MOVE      'J'           SYAKT
     c                   end
     c     aktive        ifeq      'MSGW  '
     c                   MOVE      'M'           SYAKT
     c                   end
     c                   MOVE      'J'           SYBRU
     c                   write     sydrsbsjr
     c                   end
     c                   end
     c                   end
     c                   end
     c     jobnvn        ifeq      'Jobbnavn'
     c                   move      'J'           startl
     c                   end
     c                   end
     c                   enddo
     c                   close     sydrstat
     c                   endsr
      ***********************************************
     C     tomm          BEGSR
     C***********************************************
      * tømmer filen prestartf
     c                   setoff                                       33
     c     keyst0        setll     sydrsbsj
     c     *in(33)       doweq     '0'
     c                   read      sydrsbsj                               33
     c     *in(33)       ifeq      '0'
     c                   delete    sydrsbsjr
     c                   end
     c                   enddo
     c                   endsr
      ***********************************************
     C     endrepre      BEGSR
     C***********************************************
      * endrer subsystem
     c                   setoff                                       33
     c     *in(33)       doweq     '0'
     c                   read      sydrsbsjf                              33
     c     *in(33)       ifeq      '0'
     c                   eval      sysbs=usbs
     c                   eval      sylib='*LIBL'
     c                   update    sydrsbsjfr
     c                   end
     c                   enddo
     c                   endsr
