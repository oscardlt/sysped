NJOV  * dersom WSUSER = *GR, = kall fra grønnskjerm, bruk printer på webuser JOVO
NJOV  * (vil med andre ord kreve hardkoding)
NJOV  *  utskrif fra  *GR KAN være KOPI eller original - fra PDA kun original/reprint
********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
10XXX * 01 JOV PTF10 dersom fraktbrevet er overført innland - print basert på det
********************************************************************
     FBRIDF     IF   E           K DISK
     FBRPARF    IF   E           K DISK
     FDOKUF     UF   E           K DISK
     FHEADF     UF   E           K DISK
     D                 DS
     D  PRT                    1     50
     D  LABTYPE                1      1
     D  LABOUTQ                2     11
N01  D                 DS
N01  D  DFBREF                 1     17
N01  D  WSBRTX                 1      5
N01  D  WSBRAV                 6      9
N01  D  WSBRST                10     10
N01  D  WSBROP                11     17

     D CmdLine         S            512
     D CmdLen          S             15  5

     C     *LIKE         DEFINE    DFAVD         SFAVD
     C     *LIKE         DEFINE    DFOPD         SFOPD
     C     *LIKE         DEFINE    DFFBNR        SFFBNR
     C     *ENTRY        PLIST
     C                   PARM                    WSUSER           10
s01  C*                  PARM                    SFAVD
s01  C*                  PARM                    SFOPD
s01  C*                  PARM                    SFFBNR
n01  C                   PARM                    UFAVD             4 0
n01  C                   PARM                    UFOPD             7 0
n01  C                   PARM                    UFFBNR            3 0
ASP  C                   PARM                    SFANKK            4 0
n01  C                   move      UFAVD         SFAVD
n01  C                   move      UFOPD         SFOPD
n01  C                   move      UFFBNR        SFFBNR
NJOV c     WSUSER        ifeq      '*GR'
NJOV C                   MOVEL     'JOVO'        WSUSER           10
NJOV C                   MOVE      'J'           XXGR              1
NJOV c                   end
     C     DOKKEY        KLIST
     C                   KFLD                    DFRI              1
     C                   KFLD                    SFAVD
     C                   KFLD                    SFOPD
     C                   KFLD                    SFFBNR
     C                   EVAL      DFRI='F'
JOV  C     HEAKEY        KLIST
JOV  C                   KFLD                    SFAVD
JOV  C                   KFLD                    SFOPD
      *
jov  C     DOKKEY        CHAIN     DOKUF                              33
     C     *IN33         CABEQ     *ON           QUIT
NJOV C     XXGR          ifeq      'J'
NJOV C     DFKDME        Ifeq      'P'
NJOV c                   move      'J'           UUKOPI
NJOV c                   end
Njov c                   update    DOKUFR
N01   * hvis overført innland print basert på innlandsOPPDRAG
N01  C     WSBRTX        ifeq      'U.op:'
N01  c                   move      WSBRAV        SFAVD
N01  c                   move      WSBROP        SFOPD
N01  c                   move      *zeros        SFFBNR
N01  c                   endif
Njov c                   goto      GRtag
NJOV c                   end
JOV   * fjerner denne testen - det kan være reprint basert på økt antall med 1..
JOV  C*    DFKDME        CABNE     'S'           QUIT
JOV  C                   move      'S'           DFKDME
JOV  C     DFNTLA        ifne      SFANKK
JOV  c                   z-add     SFANKK        DFNTLA
JOV  c                   z-add     SFANKK        DFNT
      * RENE A13-spesialer
JOV  c* Hvis transp er Posten og det blir mer en ett kolli bytt til TG:
JOV  C     DFNTLA        ifne      SFANKK
JOV  C     DFTRAN        andeq     50112
JOV  c                   z-add     50052         dftran
ASP  c                   eval      dfnat = 'Tollpost Globe  '
JOV  c                   eval      DFKNS = '3117256'
JOV  c                   movel     'TG9  '       DFPROK
JOV  c                   end
JOV  C     HEAKEY        CHAIN     HEADF                              34
JOV  c                   z-add     SFANKK        HENT
JOV  c  N34              update    HEADFR
JOV  c                   end
     c  N33              update    DOKUFR

NJOV C     GRtag         tag
     C     WSUSER        CHAIN     BRIDF                              33
     C     *IN33         CABEQ     *ON           QUIT

     C     BrParKey      klist
     C                   kfld                    BIBRID
     C                   kfld                    PAKUNR
     C                   kfld                    PAID
     C                   MOVE      'LABTY'       PAID
     C     BrParKey      Chain     BRPARF                             33
     C     *IN33         CABEQ     *ON           QUIT
     C                   MOVE      PAVRDA        PRT
      * printerstyring
     c     LABTYPE       IFEQ      'E'
     C                   EVAL      CMDLINE = 'OVRPRTF FILE(SYLA03P) OUTQ('+
     C                             %trim(LABOUTQ)+') SPLFOWN(*JOB) ' +
     C                             'OVRSCOPE(*JOB)'
     c                   else
     C                   EVAL      CMDLINE = 'OVRPRTF FILE(ZBARC) OUTQ('+
     C                             %trim(LABOUTQ)+') SPLFOWN(*JOB) ' +
     C                             'OVRSCOPE(*JOB)'
     c                   ENDIF
     C                   EVAL      CmdLen = %len(%trim(CmdLine))
     C                   CALL      'QCMDEXC'
     C                   PARM                    CmdLine
     C                   PARM                    Cmdlen
      *
     c     LABTYPE       IFEQ      'E'
     C                   MOVE      'SYFA12SE  '  LABPGM           10
JOV  C     DFTRAN        IFEQ      98765432                                     PostenLayout
N10  C     DFKNM         OREQ      '0413898'                                    TG mypack via BRING
     C                   MOVE      'SYFA12SF  '  LABPGM
     C                   ENDIF
     c                   else
     C                   MOVE      'SYFA12SN  '  LABPGM           10
JOV  C     DFTRAN        IFEQ      98765432                                     PostenLayout
N10  C     DFKNM         OREQ      '0413898'                                    TG mypack via BRING
     C                   MOVE      'SYFA12SP  '  LABPGM
     C                   ENDIF
     c                   end
NJOV c     UUKOPI        ifne      'J'
     c                   move      'N'           UUKOPI
NJOV c                   end
N01  C                   move      '  '          VMLAYO            2
N01  C     WSBRTX        ifeq      'U.op:'
N01  C                   move      'HE'          VMLAYO            2
N01  c                   endif
     C                   Call      LABPGM
     C                   PARM                    BIFIRM
s01  C*                  PARM      '  '          VMLAYO            2
s01  C*                  PARM                    DFAVD
s01  C*                  PARM                    DFOPD
s01  C*                  PARM                    DFFBNR
N01  C                   PARM                    VMLAYO            2
N01  C                   PARM                    SFAVD
N01  C                   PARM                    SFOPD
N01  C                   PARM                    SFFBNR
     C                   PARM                    UUKOPI            1
     c
N01  C     WSBRTX        ifeq      'U.op:'
N01  C                   move      UFAVD         SFAVD
N01  C                   move      UFOPD         SFOPD
N01  C                   move      UFFBNR        SFFBNR
N01  c                   endif
     C     DOKKEY        CHAIN     DOKUF                              33
     C                   EVAL      DFKDME='P'
     c  N33              update    DOKUFR
      * Quit
     C     QUIT          TAG
     C                   MOVE      *ON           *INLR
