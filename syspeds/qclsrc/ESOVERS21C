/* *********************************************************************   */
/*       * RETTINGER I DETTE PROGRAM:                                      */
/* PTFnr:*Sek Sig Vers  Beskrivelse..........................              */
/* """"""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""    */
/* 11XXX * 01 YBC PTF11 Overstyr meldingsfil                               */
/* ********************************************************************    */
             PGM        PARM(&AVD &OPD &SIDE2 &SG &OVERLAY &BLOVL +
                          &FIRMA &STMF)
             DCL        VAR(&FILEN) TYPE(*CHAR) LEN(10)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&SG) TYPE(*CHAR) LEN(3)
             DCL        VAR(&OVERLAY) TYPE(*CHAR) LEN(1)
             DCL        VAR(&BLOVL) TYPE(*CHAR) LEN(5)
             DCL        VAR(&SIDE2) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FIRMA) TYPE(*CHAR) LEN(2)
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(50)
             DCL        VAR(&STMF2) TYPE(*CHAR) LEN(50)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&UTK) TYPE(*CHAR) LEN(10) +
                          VALUE('SYCGIOUTQ')
             DCL        VAR(&PT) TYPE(*CHAR) LEN(10) +
                          VALUE('BILLOFLADI')
             DCL        VAR(&KOPI) TYPE(*CHAR) LEN(2) VALUE('01')

/*N01*/      OVRMSGF    MSGF(QUSERMSG) TOMSGF(SYMSGF)
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)

             IF         COND(&OVERLAY = 'J') THEN(DO)
             IF         COND(&BLOVL = 'CCBLD' *OR &BLOVL = 'CCBBD') +
                          THEN(DO)
             OVRPRTF    FILE(SYSJ15P) DEVTYPE(*AFPDS) PAGESIZE(72 +
                          120) LPI(6) CPI(15) OVRFLW(72) +
                          FRONTOVL(&BLOVL) OUTQ(SYCGIOUTQ) +
                          FORMTYPE(*STD) SPLFOWN(*JOB)
             ENDDO
             ELSE       CMD(DO)
             OVRPRTF    FILE(SYSJ15P) DEVTYPE(*AFPDS) PAGESIZE(72 +
                          120) LPI(6) CPI(15) OVRFLW(72) +
                          DUPLEX(*YES) FRONTOVL(&BLOVL) +
                          BACKOVL(CCBLB 0 0 *CONSTANT) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)
             ENDDO
             ENDDO
             ELSE       CMD(DO)
             IF         COND(&OVERLAY = 'V') THEN(DO)
             OVRPRTF    FILE(SYSJ15P) DEVTYPE(*AFPDS) PAGESIZE(72 +
                          120) LPI(6) CPI(15) OVRFLW(72) +
                          FRONTOVL(&BLOVL) OUTQ(SYCGIOUTQ) +
                          FORMTYPE(*STD) SPLFOWN(*JOB)
             ENDDO
             ELSE       CMD(DO)
             OVRPRTF    FILE(SYSJ15P) DEVTYPE(*AFPDS) PAGESIZE(72 +
                          120) LPI(6) CPI(15) OVRFLW(72) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)
             ENDDO
             ENDDO
             OVRPRTF    FILE(SYSJ15P2) DEVTYPE(*AFPDS) PAGESIZE(72 +
                          120) LPI(6) CPI(15) OVRFLW(72) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)
             CHGDTAARA  DTAARA(*LDA (1 2)) VALUE(&FIRMA)
             CHGDTAARA  DTAARA(*LDA (15 4)) VALUE(&AVD)
             CHGDTAARA  DTAARA(*LDA (19 3)) VALUE(&SG)
             CHGDTAARA  DTAARA(*LDA (22 1)) VALUE(&SIDE2)
             CHGDTAARA  DTAARA(*LDA (501 30)) +
                          VALUE('WEB                           ')
             CHGDTAARA  DTAARA(*LDA (531 20)) +
                          VALUE('                    ')
             CHGDTAARA  DTAARA(*LDA (601 5)) VALUE(&BLOVL)
             OVRDBF     FILE(BILLOPD) TOFILE(BILLOF)

             CALL       PGM(SYSJ15) PARM(&OPD &OPD &UTK &PT &KOPI)

             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             CALL       PGM(SYGE40) PARM(&INFOP)
             IF         COND(&INFOP = 'N') THEN(DO)
             IF         COND(&SIDE2 = 'J') THEN(DO)
             RTVDTAARA  DTAARA(*LDA (551 50)) RTNVAR(&STMF)
             CHGVAR     VAR(&STMF2) VALUE('/syspeddev/temp/' *CAT &STMF)
             CHGVAR     VAR(&STMF) VALUE(&STMF2)
             CVTSPLFPDF SPLF(SYSJ15P2) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST) TOPDF(&STMF)
             ENDDO
             ELSE       CMD(DO)
             RTVDTAARA  DTAARA(*LDA (501 50)) RTNVAR(&STMF)
             CHGVAR     VAR(&STMF2) VALUE('/syspeddev/temp/' *CAT &STMF)
             CHGVAR     VAR(&STMF) VALUE(&STMF2)
             CVTSPLFPDF SPLF(SYSJ15P) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST) TOPDF(&STMF)
             ENDDO
             ENDDO

             IF         COND(&INFOP = 'J') THEN(DO)
             IF         COND(&SIDE2 = 'J') THEN(DO)
             CHGVAR     VAR(&FILEN) VALUE('SYSJ15P2')
             RTVDTAARA  DTAARA(*LDA (551 50)) RTNVAR(&STMF)
             CALL       PGM(INF001CL) PARM(&FILEN &QNBR &QUSER &QJOB +
                          &STMF)
             ENDDO
             ELSE       CMD(DO)
             CHGVAR     VAR(&FILEN) VALUE('SYSJ15P')
             RTVDTAARA  DTAARA(*LDA (501 50)) RTNVAR(&STMF)
             CALL       PGM(INF001CL) PARM(&FILEN &QNBR &QUSER &QJOB +
                          &STMF)
             ENDDO
             ENDDO

             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)

             DLTSPLF    FILE(SYSJ15P) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
             DLTSPLF    FILE(SYSJ15P2) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
    /* */
 SLUTT:      ENDPGM
