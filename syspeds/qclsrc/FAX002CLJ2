/*N01 OVERRIDE AV SYFA27.. */
             PGM        PARM(&PARM &FTXT)
             DCL        VAR(&PARM) TYPE(*CHAR) LEN(512)
             DCL        VAR(&FTXT) TYPE(*CHAR) LEN(900)
             DCL        VAR(&UNIK) TYPE(*CHAR) LEN(7) /* Unikkode +
                          til register SORT. */
             DCL        VAR(&P1) TYPE(*CHAR) LEN(2)
             DCL        VAR(&P1E) TYPE(*CHAR) LEN(2)
             DCL        VAR(&P1S) TYPE(*CHAR) LEN(2)
             DCL        VAR(&P2) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P3) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P4) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P5) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P6) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P7) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P8) TYPE(*CHAR) LEN(1)
             DCL        VAR(&P9) TYPE(*CHAR) LEN(1)
             DCL        VAR(&CVP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&TUR) TYPE(*CHAR) LEN(8)
             DCL        VAR(&MAPPE) TYPE(*CHAR) LEN(20)
             DCL        VAR(&PTIME) TYPE(*CHAR) LEN(8)
             DCL        VAR(&PDATE) TYPE(*CHAR) LEN(8)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&FAX) TYPE(*CHAR) LEN(21)
             DCL        VAR(&KNAVN) TYPE(*CHAR) LEN(30)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&KODE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&DONAV) TYPE(*CHAR) LEN(12)
             DCL        VAR(&LTYPE) TYPE(*CHAR) LEN(1)
             DCLF       FILE(FAXSEN)
             RCVF       RCDFMT(*FILE)
    /*                                    */
    /* SKRIVER UT FAKTURAKOPI             */
             RTVDTAARA  DTAARA(*LDA (81 1)) RTNVAR(&LTYPE)
             OVRPRTF    FILE(FAKTURA) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
             OVRPRTF    FILE(SYFA20P) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
             IF         COND(&LTYPE = 'S') THEN( +
             OVRPRTF      FILE(SYFA20PS) PAGESIZE(96 90) FRONTMGN(0 +
                          0,5) OVRFLW(96) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD))
             ELSE       CMD( +
             OVRPRTF      FILE(SYFA20PS) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD))
             OVRPRTF    FILE(SYFA20PT) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
             OVRPRTF    FILE(SYFA20PD) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
             OVRPRTF    FILE(SYFA27PF) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
             OVRPRTF    FILE(SYFA27PS) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG) +
                          FORMTYPE(*STD)
    /* */
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
    /* */
             CHGVAR     VAR(&UNIK) VALUE('W' *CAT &QNBR)
/* SORT OGSÅ I LØSNING 1 - INLIBL FOR Å SIKRE BIBLIOTEKSLISTE */
             CALL INLIBL
             RMVM       FILE(SORT) MBR(&UNIK)
             MONMSG     MSGID(CPF7310 CPF5815 CPF7315)
             ADDPFM     FILE(SORT) MBR(&UNIK)
             OVRDBF     FILE(SORT) TOFILE(SORT) MBR(&UNIK)
             OVRMSGF    MSGF(QUSERMSG) TOMSGF(SYMSGF)
    /* */
             CHGVAR     VAR(&P1) VALUE(%SST(&PARM 74 2))
             CHGVAR     VAR(&P2) VALUE(%SST(&PARM 76 1))
             CHGVAR     VAR(&P3) VALUE(%SST(&PARM 77 1))
             CHGVAR     VAR(&P4) VALUE(%SST(&PARM 78 1))
             CHGVAR     VAR(&P5) VALUE(%SST(&PARM 79 1))
             CHGVAR     VAR(&P6) VALUE(%SST(&PARM 80 1))
             CHGVAR     VAR(&P7) VALUE(%SST(&PARM 81 1))
             CALL       PGM(SYFA20) PARM(&P1 &P1E &P1S &P2 &P3 &P4 +
                          &P5 &P6 &P7 &P8 &P9)
             DLYJOB     DLY(5)
    /* */
             CHGVAR     VAR(&FAX) VALUE(%SST(&PARM 53 21))
             CALL       PGM(FAX017) PARM(&FAX)
             CHGVAR     VAR(&CVP) VALUE(%SST(&PARM 402 1))
             IF         COND((&CVP = 'J') *AND (&FAXCPN *NE '  ')) +
                          THEN(DO) /* MED COVERPAGE */
             DLTDTAARA  DTAARA(QTEMP/CVROVR)
             MONMSG     MSGID(CPF0000)
             CRTDTAARA  DTAARA(QTEMP/CVROVR) TYPE(*CHAR) LEN(384) +
                          VALUE(*BLANKS)
             CHGDTAARA  DTAARA(CVROVR (1 30)) VALUE(%SST(&PARM 122 30))
             CHGDTAARA  DTAARA(CVROVR (31 30)) VALUE(%SST(&PARM 162 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (61 30)) VALUE(%SST(&PARM 202 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (91 30)) VALUE(%SST(&PARM 242 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (216 30)) VALUE(%SST(&PARM 282 +
                          30))
             DLTDTAARA  DTAARA(QTEMP/CVRTXT)
             MONMSG     MSGID(CPF0000)
             CRTDTAARA  DTAARA(QTEMP/CVRTXT) TYPE(*CHAR) LEN(1875) +
                          VALUE(*BLANKS)
             CHGDTAARA  DTAARA(CVRTXT (1 900)) VALUE((&FTXT))
             SNDFSPL    SPF(SYFA20P &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX) +
                          CVRID(&FAXCPN)
             MONMSG     MSGID(CPF0000)
             SNDFSPL    SPF(SYFA20PS &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX) +
                          CVRID(&FAXCPN)
             MONMSG     MSGID(CPF0000)
             SNDFSPL    SPF(SYFA20PT &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX) +
                          CVRID(&FAXCPN)
             MONMSG     MSGID(CPF0000)
             ENDDO
             ELSE       CMD(DO)
             SNDFSPL    SPF(SYFA20P &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX)
             MONMSG     MSGID(CPF0000)
             SNDFSPL    SPF(SYFA20PS &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX)
             MONMSG     MSGID(CPF0000)
             SNDFSPL    SPF(SYFA20PT &QJOB &QUSER &QNBR *LAST) +
                          DESC('KOPI AV FAKTURA') DIAL(*N &FAX)
             MONMSG     MSGID(CPF0000)
             ENDDO

             RMVM       FILE(SORT) MBR(&UNIK)
             MONMSG     MSGID(CPF7310 CPF5815 CPF7315)

             CHGVAR     VAR(&AVD) VALUE(%SST(&PARM 1 4))
             CHGVAR     VAR(&OPD) VALUE(%SST(&PARM 5 7))
             CHGVAR     VAR(&KODE) VALUE(%SST(&PARM 12 1))
             CHGVAR     VAR(&DONAV) VALUE(%SST(&PARM 13 12))
             CHGVAR     VAR(&KNAVN) VALUE(%SST(&PARM 25 30))
             CALL       PGM(FAX013) PARM(&QUSER &QNBR &QJOB +
                          &FAX &DONAV &MAPPE &PTIME &PDATE &KNAVN +
                          &AVD &OPD &TUR &KODE)
    /* */
 SLUTT:      ENDPGM
