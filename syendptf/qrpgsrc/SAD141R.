      * Kompilere med bibliotek YAJL og LIBHTTP
     H DFTACTGRP(*NO) ACTGRP('KLEMENT') OPTION(*SRCSTMT)
     H BNDDIR('YAJL')

      /include yajl_h

     D list_t          ds                  qualified
     D                                     template
     D   status                      30a

     D result          ds                  qualified
     D   uuid                        36
     D   xstatus                     30
     D   errmsg                     500a   varying
     D   list                              likeds(list_t) dim(999)

     D docNode         s                   like(yajl_val)
     D list            s                   like(yajl_val)
     D node            s                   like(yajl_val)
     D val             s                   like(yajl_val)

     D i               s             10i 0
     D lastElem        s             10i 0
     D dateUSA         s             10a
     D errMsg          s            500a   varying inz('')


     c     *entry        plist
     c                   parm                    Ustatus          30
     c                   parm                    Filename         45

      /free

         // load the example.json document into a tree.
         docNode = yajl_stmf_load_tree( %trim(Filename) : errMsg );
         if errMsg <> '';
            // handle error
         endif;


         // get the 'success' field into 'result' DS
         // result.success is an RPG named indicator, and will be
         // *ON if success=true, *OFF if success=false

         node = YAJL_object_find(docNode: 'manifestId');
         result.uuid = YAJL_get_string(node);


         // get the 'errmsg' field into 'result' DS

         node = YAJL_object_find(docNode: 'errmsg');
         result.errmsg = YAJL_get_string(node);

         node = YAJL_object_find(docNode: 'status');
         result.xstatus = YAJL_get_string(node);

         if result.xstatus = *blanks;
         //list = YAJL_object_find(docNode: 'list');
         list = YAJL_object_find(docNode: 'status');

         i = 0;
         dow YAJL_ARRAY_LOOP( list: i: node );

            lastElem = i;

            //val = YAJL_object_find(node: 'uuid');
            val = YAJL_object_find(node: 'status');
            result.list(i).status = yajl_get_string(val);
            if result.list(i).status <> *blanks;
              Ustatus = yajl_get_string(val);
              leave;
            endif;
         enddo;

         yajl_tree_free(docNode);
         else;
           Ustatus = result.xstatus;
         endif;

         *inlr = *on;
