/* GENERER PDF-FRAKTBREV BASERT PÅ OPPDRAG - TA MED FILNAVN TIL KALLENDE PROG */
/* *********************************************************************   */
/*       * RETTINGER I DETTE PROGRAM:                                      */
/* PTFnr:*Sek Sig Vers  Beskrivelse..........................              */
/* """"""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""    */
/*       * 01 JOV PTV11 bruk TOSTMF('xxx') WSCST(*PDF) for PDF-konvertering*/
/*       * 02 sh  ptf12 MER UNIK FILNAVN I STMF                            */
/* ********************************************************************    */
             PGM        PARM(&FIR &AVD &OPD &FBN &KODE &STMF)
             DCL        VAR(&TELL) TYPE(*CHAR) LEN(8) +
                          VALUE('WEBUNIK')
             DCL        VAR(&UN) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&UA) TYPE(*CHAR) LEN(7)
             DCL        VAR(&FIR) TYPE(*CHAR) LEN(2)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&FBN) TYPE(*CHAR) LEN(3)
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(50)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&PRANT) TYPE(*CHAR) LEN(2) /* Antall +
                          utskrifter. */
             DCL        VAR(&VB) TYPE(*CHAR) LEN(1) /* Hvis &VB = +
                          'J', skal sende valgbilde ut til bruker. */
             DCL        VAR(&PO) TYPE(*CHAR) LEN(1) VALUE('O') /*=OppdURL*/
             DCL        VAR(&KODE) TYPE(*CHAR) LEN(1) /* Kode = 'F', +
                          'T'. 'F'=fraktbrev, 'T'=tollpassfraktbrev  */
             DCL        VAR(&PDFDIR) TYPE(*CHAR) LEN(1) VALUE('J')

             CHGDTAARA  DTAARA(*LDA (1 1000)) VALUE(' ')
             CHGDTAARA  DTAARA(*LDA (1 2)) VALUE(&FIR)
             CHGDTAARA  DTAARA(*LDA (15 4)) VALUE(&AVD)
             CHGDTAARA  DTAARA(*LDA (82 7)) VALUE(&OPD)
             CHGDTAARA  DTAARA(*LDA (89 3)) VALUE(&FBN)
             CHGDTAARA  DTAARA(*LDA (22 8)) VALUE('00000000')     /*UPRO*/
             CHGDTAARA  DTAARA(*LDA (64 6)) VALUE('000000')     /*UDT */

             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)

    /*                                     */
    /* HENTER NESTE UNIKE NUMMER          */
    /*                                     */
             CALL       PGM(SYGE49) PARM(&TELL &UN)
             CHGVAR     VAR(&UA) VALUE(&UN)

             CHGVAR     VAR(&STMF) VALUE('/syspeddev/temp/' *CAT +
                          'FB' *CAT &AVD *CAT &OPD *CAT &UA +
                          *CAT '.PDF')
    /*                                     */
    /* fJERNER EVENTUUELLT TIDLIGERE stmf */
    /*                                     */
             RMVLNK     OBJLNK(&STMF)
             MONMSG     MSGID(CPF0000)
    /*                                     */
    /* OVERRIDE PRINTERFILE/SKRIV-FR.BREV  */
    /*                                     */
             OVRPRTF    FILE(SYFA12P) DEV(FAX3812) DEVTYPE(*AFPDS) +
                          PAGESIZE(140 85) LPI(12) CPI(10) OVRFLW(140) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB) +
                          TOSTMF(&STMF) WSCST(*PDF)
             CALL       PGM(SYFA12) PARM(&PRANT &KODE &VB &PO &PDFDIR)
             MONMSG     MSGID(CPF0000)

    /* */
 SLUTT:      ENDPGM
