     FLLMRFL10  UF   E           K DISK
     FFIRM      IF   E           K DISK
      *
     D                 DS
     D  XPARM                  1     64
     D  XKJED                  1      8
     D  XPNR                   9     16
     D  XMRNR                 17     21
     D  XOPT                  22     22
     D  XKOPI                 23     23
     D  XFFIL                 64     64
     D SAVUDS         UDS
     D  UFIRM                  1      2
     D  UDSAVD                15     18  0
     D  UDSSG                 19     21
      *
     C     *ENTRY        PLIST
     C                   PARM                    UMRN             18
     C                   PARM                    UTSTAT            2
      *
     C     *DTAARA       DEFINE    *LDA          SAVUDS
     C     LLMRFL10K     KLIST
     C                   KFLD                    MRGRUP
     C                   KFLD                    MRKJED
     C                   KFLD                    UMRN
      *
N02   * går over fra Chain til READE - dek KAN være flere med samme MRN-nr
N02   * Normalt videt kun være EN som har status blank (den der vareinngangen nettopp er gjor)
N02   * skulle det være 2 (først en innmeldt på gamlemåten/så en der lossetillatelse finnes...)
N02   * så vil ikke det skade - lossetillatelse er go gitt for hele MRN-nummeret
     C                   Z-ADD     10            MRKJED
s02  C*    LLMRFL10K     CHAIN     LLMRFL10                           33
s02  C*                  IF        *IN33 = *OFF
N02  C     LLMRFL10K     SETLL     LLMRFL10
N02  C     LLMRFL10K     READE     LLMRFL10                               33
N02  C     *IN33         DOWEQ     '0'
N02  C     MRST          ifeq      ' '
N01  C                   MOVEL     UTSTAT        MRMOTT
N01  C                   UPDATE    LLMRFR
     C                   MOVE      MRGRUP        XKJED
     C                   MOVE      MRKJED        XPNR
     C                   MOVE      MRMRNR        XMRNR
     C                   MOVE      'W'           XOPT
     C                   MOVE      'N'           XKOPI
     C                   MOVE      'F'           XFFIL
      *
     C     *LOVAL        SETLL     FIRM
     C                   READ      FIRM                                   33
     C                   MOVE      FIFIRM        UFIRM
     C                   Z-ADD     10            UDSAVD
     C                   MOVE      'GLG'         UDSSG
     C                   OUT       SAVUDS
      * FIRGI MOTTAKSRAPPORT
     C                   CALL      'SYXML17BC2'
     C                   PARM      XPARM         UPARM            64
      * SEND XML TIL SAP
     C                   CALL      'SYXML17BC3'
     C                   PARM                    MRFT2
     C*                  PARM                    MRMRNR
     C                   PARM                    UMRN
N02  C                   else
N02  C                   UPDATE    LLMRFR
N02  C                   endif
N02  C     LLMRFL10K     READE     LLMRFL10                               33
     C                   END
      *
     C                   EVAL      *INLR = *ON
     C                   RETURN
      *
