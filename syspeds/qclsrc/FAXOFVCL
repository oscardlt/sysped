             PGM
             DCL        VAR(&FIL) TYPE(*CHAR) LEN(10) VALUE('QSYSPRT')
             DCL        VAR(&FAXNR) TYPE(*CHAR) LEN(15)
             DCL        VAR(&BRUKER) TYPE(*CHAR) LEN(10) +
                          VALUE('QSNADS')
             DCL        VAR(&JOB) TYPE(*CHAR) LEN(10) +
                          VALUE('QDIAINDUSR')
             DCL        VAR(&WS) TYPE(*CHAR) LEN(10)
             /* **                    **  */
             /* **                    **  */
    /* */
             RTVJOBA    JOB(&WS) /* Hente arbeidstsjonskode WS */
             CLRPFM     FILE(FAXDOCA) MBR(&WS)
             MONMSG     MSGID(CPF3141) EXEC(ADDPFM FILE(FAXDOCA) +
                          MBR(&WS))
             OVRDBF     FILE(FAXDOCA) TOFILE(FAXDOCA) MBR(&WS)
    /* */
    /* LEGG UTSKRIFT I KØ PÅ SPOOLFILE                  */
    /* KOPIER SPOOLFILE OVER I DATABASEFIL (4 FØRSTE=SKIP/SPACEINFO) */
             CPYSPLF    FILE(&FIL) TOFILE(FAXDOCA) JOB(&BRUKER/&JOB) +
                          SPLNBR(*LAST) TOMBR(&WS) CTLCHAR(*PRTCTL)
             MONMSG     MSGID(CPF3309) EXEC(GOTO INTET)
    /* SETTE INN BLANKLINJER ETTER INFO I SKIPP/SPACEB-FELT*/
             OVRDBF     FILE(PRTDOCA) TOFILE(FAXDOCA)
             OVRDBF     FILE(PRTDOCB) TOFILE(FAXDOCB)
             CALL       PGM(FAXOVF) PARM(&FAXNR)
             SNDFAX     TO((&FAXNR)) FILE(&FIL) +
                          JOB(&BRUKER/&JOB) SPLNBR(*LAST) +
                          CRTCVRP(*NO)
    /* */
             RETURN
    /* */
    /* TØM ARBEIDSFILER                          */
             CLRPFM     FILE(FAXDOCA)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(FAXDOCB)
             MONMSG     MSGID(CPF0000)
             GOTO SLUTT
 INTET:      SNDPGMMSG  MSG('Ingen utskrift.')
 SLUTT:      ENDPGM
