     h DFTACTGRP(*NO)
     d tstqsh6         pr
     d wfile_                              like(wfile)

     d tstqsh6         pi
     d wfile                        128

     d  wcmd           s           2048
     d  wcmd1          s            256
     d  wcmd2          s            256
     d  wcmd3          s            256
     d  wcmd4          s            256
     d  wcmd5          s            256
     d  wcmd6          s            256
     d  wcmd7          s            256
     d  wpgp           s            128
     d  wnopgp         s            128
     d  wfile1         s            128
     d  wfile2         s            128
     d  x7D            s              1
     d  pos            s              5U 0

     d runcmd          pr                  extpgm('QCMDEXC')
     d  Cmd                         200a   const
     d  len                          15p 5 const

      *   SYEDI data area
     D Edidta          DS           256
     D  Uelibf               171    180

     c     *dtaara       define                  edidta
      /free
         in edidta;

       x7D=x'7D';

       pos = %scan ('_' : wfile);
       pos = pos - 1;
       wfile1=%subst(wfile:1:pos) + '.xml.gz';
       wfile2=%subst(wfile:1:pos) + '.xml';

       wcmd1='cd  /' + %trim(uelibf) + '/' + 'TDS/TTAX';
       wcmd2='gpg -o' +
                 ' /' + %trim(uelibf) + '/' + 'TDS/TTAX/tot' + '/' +
                 %trim(wfile1) +
                 ' --decrypt /' +
              %trim(uelibf) + '/' + 'TDS/TTAX/tot' + '/' + %trim(wfile);
       wcmd3='export -s CLASSPATH=.';
       wcmd4='java GZipFile /' + %trim(uelibf) +
             '/' + 'TDS/TTAX/tot' + '/' + %trim(wfile1);
       wcmd5='rm /' + %trim(uelibf) +
             '/' + 'TDS/TTAX/tot' + '/' + %trim(wfile);
       wcmd6='rm /' + %trim(uelibf) +
             '/' + 'TDS/TTAX/tot' + '/' + %trim(wfile1);
       wcmd7='mv /' + %trim(uelibf) +
             '/' + 'TDS/TTAX/tot' + '/' + %trim(wfile2) +
             ' /' + %trim(uelibf) + '/' + 'EDIRE1K' + '/' + %trim(wfile2);

       wcmd = 'QSH CMD(' + x7D +
                      %trim(wcmd1) + ';' +
              ' '   + %trim(wcmd2) + ';' +
              ' '   + %trim(wcmd3) + ';' +
              ' '   + %trim(wcmd4) + ';' +
              ' '   + %trim(wcmd5) + ';' +
              ' '   + %trim(wcmd6) + ';' +
              ' '   + %trim(wcmd7) + ';' +
              x7D + ')';

       RunCmd(Wcmd :%len(%trim(Wcmd)));

       *inlr=*on;
      /end-free
