             PGM        PARM(&PARM &FTXT)
             DCL        VAR(&PARM) TYPE(*CHAR) LEN(577)
             DCL        VAR(&FTXT) TYPE(*CHAR) LEN(900)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&NR) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FAXNR) TYPE(*CHAR) LEN(21)
             DCL        VAR(&CVP) TYPE(*CHAR) LEN(1)
             DCLF       FILE(FAXSEN)
             RCVF       RCDFMT(*FILE)
       /* */
             OVRMSGF    MSGF(QUSERMSG) TOMSGF(SYMSGF)
             OVRPRTF    FILE(SYSJ57P) PAGESIZE(72 90) FRONTMGN(0 +
                          0,5) OVRFLW(72) DRAWER(3) OUTQ(QEZJOBLOG)
       /* */
             CHGVAR     VAR(&AVD) VALUE(%SST(&PARM 1 4))
             CHGVAR     VAR(&OPD) VALUE(%SST(&PARM 5 7))
             CHGVAR     VAR(&NR) VALUE(%SST(&PARM 12 1))
             CALL       PGM(SYSJ57) PARM(&AVD &OPD &NR)
    /* ----------------------------------------------------------- */
       /* */
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
             CHGVAR     VAR(&FAXNR) VALUE(%SST(&PARM 17 21))
             CALL       PGM(FAX017) PARM(&FAXNR)
             CHGVAR     VAR(&CVP) VALUE(%SST(&PARM 16 1))
       /* */
             IF         COND(&CVP = 'J') THEN(DO) /* MED COVERPAGE */
             DLTDTAARA  DTAARA(QTEMP/CVROVR)
             MONMSG     MSGID(CPF0000)
             CRTDTAARA  DTAARA(QTEMP/CVROVR) TYPE(*CHAR) LEN(384) +
                          VALUE(*BLANKS)
             CHGDTAARA  DTAARA(CVROVR (1 30)) VALUE(%SST(&PARM 297 30))
             CHGDTAARA  DTAARA(CVROVR (31 30)) VALUE(%SST(&PARM 337 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (61 30)) VALUE(%SST(&PARM 377 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (91 30)) VALUE(%SST(&PARM 417 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (216 30)) VALUE(%SST(&PARM 457 +
                          30))
             CHGDTAARA  DTAARA(CVROVR (256 2)) VALUE(&FAXCPN)
             DLTDTAARA  DTAARA(QTEMP/CVRTXT)
             MONMSG     MSGID(CPF0000)
             CRTDTAARA  DTAARA(QTEMP/CVRTXT) TYPE(*CHAR) LEN(1875) +
                          VALUE(*BLANKS)
             CHGDTAARA  DTAARA(CVRTXT (1 900)) VALUE(&FTXT)
             SNDFSPL    SPF(SYSJ57P &QJOB &QUSER &QNBR *LAST) +
                          DESC('Utskrift av BOOKING') DIAL(*N +
                          &FAXNR) CVRID(&FAXCPN)
             ENDDO
             ELSE       CMD(DO)
             SNDFSPL    SPF(SYSJ57P &QJOB &QUSER &QNBR *LAST) +
                          DESC('Utskrift av BOOKING') DIAL(*N &FAXNR)
             ENDDO
       /* */
             ENDPGM
