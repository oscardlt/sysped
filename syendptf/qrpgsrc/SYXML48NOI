     FEDIC      UF A E             DISK
     FEDIS      O  A E             DISK
     FEDIM      O  A E             DISK
     FEDISE     O  A E             DISK
     D                 DS
     D  XMBR                   1     10
     D  XMBRA                  1      1
     D  XMBRB                  2     10S 0
     D  XMBRC                  2     10

     C                   EXSR      INIT

     C                   EXSR      SRSND
     C                   EXSR      SRMSG
     C                   EXSR      SRXML
     C                   EXSR      SRUPD

     C                   EVAL      *INLR=*ON
      ***********************************************
     C     SRSND         BEGSR
      ***********************************************
     C     1             CHAIN     EDIC                               33
     C                   ADD       1             CSN
     C                   ADD       1             CMN
     C                   UPDATE    EDICR

     C                   MOVE      *BLANKS       XMBR
     C                   MOVE      'X'           XMBRA
     C                   MOVE      CSN           XMBRB
     C                   MOVE      XMBR          SEMBR
     C                   MOVE      *BLANKS       SDATA
     C                   CALL      'SYGE15C'
     C                   PARM                    WDT               8
     C                   PARM                    WTM               6

     C                   EVAL      S0004 = 'NO-SYSPED'
     C                   EVAL      S0010 = 'CW1'
     C                   EVAL      S0020 = USHPNBR
     C                   EVAL      S0026 = 'XML-CW-RESPONSE'
     C                   EVAL      SSN   = CSN
     C                   EVAL      SSR   = 'S'
     C                   EVAL      SST   = 'A'
     C                   MOVE      WDT           SDT
     C                   MOVE      WTM           STM
     C                   EVAL      SLIB  = '*LIBL'
     C                   EVAL      SFILE = 'EDISE'
     C                   EVAL      SMBR  = SEMBR
     C                   EVAL      SMBRS = 0
     C                   EVAL      S0036 = 1

     C                   ENDSR
      ***********************************************
     C     SRMSG         BEGSR
      ***********************************************
     C                   EVAL      M0004 = S0004
     C                   EVAL      M0010 = S0010
     C                   MOVEL     CMN           M0062
     C                   EVAL      M0065 = 'XMLRES'
     C                   EVAL      M0068 = 'CW1'
     C                   EVAL      M1001 = 'XML'
     C                   EVAL      M1004 = 'CW1'
     C                   EVAL      M1225 = 'CRN'
     C                   EVAL      MSN = SSN
     C                   EVAL      MMN = CMN
     C                   EVAL      MSR = 'S'
     C                   EVAL      MST = 'C'
     C                   MOVE      WDT           MDT
     C                   MOVE      WTM           MTM

     C                   ENDSR
      ***********************************************
     C     SRXML         BEGSR
      ***********************************************
     C                   EVAL      SDATA = '<?xml version="1.0"?>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CustomsFilingResponse>'
     C                   WRITE     EDISER
      * MessageHeader
     C                   EVAL      SDATA = '<MessageHeader>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Version>0.32</Version>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<SenderID>NO_SYSPED_API</SenderID>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<ReceiverID>CW1</ReceiverID>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<MessageID>'
     C                             + %TRIM(SMBR)
     C                             + '</MessageID>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CreationDateTime>'
     C                             + %TRIM(%EDITW(SDT:'    -  -  '))
     C                             + 'T' + %TRIM(%EDITW(STM:'0  :  :  '))
     C                             + '</CreationDateTime>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</MessageHeader>'
     C                   WRITE     EDISER
      * Filing
     C                   EVAL      SDATA = '<Filing>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<ShipmentFileNumber>'
     C                             + %TRIM(USHPNBR)
     C                             + '</ShipmentFileNumber>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<FilingType>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Code>IMC</Code>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</FilingType>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CreatedBy>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<UserName>NOSYSPED</UserName>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</CreatedBy>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CreationDateTime>'
     C                             + %TRIM(%EDITW(SDT:'    -  -  '))
     C                             + 'T' + %TRIM(%EDITW(STM:'0  :  :  '))
     C                             + '</CreationDateTime>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CountryCode>NO</CountryCode>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</Filing>'
     C                   WRITE     EDISER
      * Charges
     C                   EVAL      SDATA = '<Charges>'
     C                   WRITE     EDISER
      * Charge TAX
     C                   EVAL      SDATA = '<Charge>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Code>TAX</Code>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Amount currencycode="NOK">'
     C                             + %TRIM(%EDITW(UTOL:'         0 .  '))
     C                             + '</Amount>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CreditorID>SKOSOSL1</CreditorID>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<ReferenceNumber>'
     C                             + %TRIM(UINV)
     C                             + '</ReferenceNumber>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</Charge>'
     C                   WRITE     EDISER
      * Charge DUX
     C                   EVAL      SDATA = '<Charge>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Code>DUX</Code>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<Amount currencycode="NOK">'
     C                             + %TRIM(%EDITW(UVAT:'         0 .  '))
     C                             + '</Amount>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<CreditorID>SKOSOSL1</CreditorID>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '<ReferenceNumber>'
     C                             + %TRIM(UINV)
     C                             + '</ReferenceNumber>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</Charge>'
     C                   WRITE     EDISER
     C                   EVAL      SDATA = '</Charges>'
     C                   WRITE     EDISER

     C                   EVAL      SDATA = '</CustomsFilingResponse>'
     C                   WRITE     EDISER

     C                   ENDSR
      ***********************************************
     C     SRUPD         BEGSR
      ***********************************************
     C                   WRITE     EDIMR
     C                   WRITE     EDISR
     C                   ENDSR
      ***********************************************
     C     INIT          BEGSR
      ***********************************************
     C     *ENTRY        PLIST
     C                   PARM                    USHPNBR          35
     C                   PARM                    UINV             13
     C                   PARM                    UTOL             13 2
     C                   PARM                    UVAT             13 2

     C                   ENDSR
