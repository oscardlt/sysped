/* SJEKK EKSISTEN AV IFS-OBJEKT VED Å RENAME til samme navn (i samme mappe)  */
/* EKS: REN OBJ('/home/test.txt') NEWOBJ('test.txt')                         */
/* Dersom OBJ finnes så "renames det faktisk" (nokså dirty :=)               */
/*                      en får da kvitteringmelding  CPCA084 (ER renamet)    */
/* Dersom OBJ IKKE FINNES får en CPFA0A9                                     */
/* ved ugyldig navn (tegn mm) får en ymse andre varianter ..                 */
/*                                                                           */
/* OBS DENNE CL TESTER OK=CPCA084. FRO MOTSATT -FINNES IKKE-CPFA0A9:SYGE98CL */
/*                                                                           */
/* OOOOOOOOOBS !!!                                                           */
/*   FORELØPIG DEAD END DETTE - SER UT SOM OM EN IKKE KAN MONITORER ANNET    */
/*   DET SOM ER ERRRORMESSAG - Å MONITORE SIKKSESS/STATUS-MELDING GÅR IKKE  */
/*                                                                           */
/*                                                                           */
             PGM        PARM(&BANE &NYOBJ &FINS)
             DCL        VAR(&TEST7) TYPE(*CHAR) LEN(8)
             DCL        VAR(&NYOBJ) TYPE(*CHAR) LEN(100)
             DCL        VAR(&BANE) TYPE(*CHAR) LEN(256)
             DCL        VAR(&FINS) TYPE(*CHAR) LEN(1)
             CHGVAR     VAR(&TEST7) VALUE(%SUBSTRING(&BANE 1 8))
             IF         COND(&TEST7 = '/ashnsf') THEN(RETURN)

             CHGVAR     VAR(&FINS) VALUE('J')
             REN        OBJ(&BANE) NEWOBJ(&NYOBJ)

          /* RENAME TIL SEG SELV OK = SETT &FINS=J  */
          /* MONMSG     MSGID(CPCA084) EXEC(DO)     */
          /* CHGVAR     VAR(&FINS) VALUE('J')       */
          /* RETURN                                 */
          /* ENDDO                                  */
          /*                                        */
          /* NOE FEILET = SETT &FINS=N              */
             MONMSG     MSGID(CPF0000) EXEC(DO)
             CHGVAR     VAR(&FINS) VALUE('N')
             RETURN
             ENDDO
    /* */
VIDERE:      ENDPGM
