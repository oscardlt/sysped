/* ARKIVERE T-DOKUMENT                */
             PGM        PARM(&AVD &OPD &TYPET &STMF &BANE &VARE &BANEV &INFOP)
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&TYPET) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FAXTYP) TYPE(*CHAR) LEN(1) VALUE('E')
             DCL        VAR(&SPLF) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PF')
             DCL        VAR(&SPLF2) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PV')
             DCL        VAR(&SPLF3) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PR')
             DCL        VAR(&SPLF4) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PL')
             DCL        VAR(&SPLF5) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PFS')
             DCL        VAR(&SPLF6) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX014PVS')
             DCL        VAR(&SPLF7) TYPE(*CHAR) LEN(10) +
                          VALUE('DKX108P')
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(152)
             DCL        VAR(&VARE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&BANE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&BANEV) TYPE(*CHAR) LEN(50)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
    /*                                    */
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/* START RENT FORHÅNDSVARSEL */
             IF         COND(&TYPET = 'F') THEN(DO)
             CALL       PGM(DKX108R) PARM(&AVD &OPD ' ' 'E')
             IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&SPLF7) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEV) ORIENTAT(*V)
             ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&SPLF7 &QNBR &QUSER &QJOB +
                          &BANE)
                          ENDDO
             DLTSPLF    FILE(&SPLF7) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
             GOTO       CMDLBL(SLUTT)
             ENDDO
/* SLUTT RENT FORHÅNDSVARSEL */
    /*                              */
    /* ORDNER PRINTER OVERRIDE      */
    /*                              */
/* TET-PRINT       */
             CALL       PGM(DKX014R) PARM(&FAXTYP &AVD &OPD)

/*                                       */
/* HVIS IKKE FORENKLET BRUKES SPLF3      */
/*                                       */
             IF         COND(&TYPET = 'N') THEN(DO)
             RLSSPLF    FILE(&SPLF3) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPA0701 CPF3309) EXEC(GOTO +
                          CMDLBL(IKKEKVIT))
             MONMSG     MSGID(CPF3322)
             CHGVAR     VAR(&SPLF) VALUE(&SPLF3)
 IKKEKVIT:
             ENDDO
/*                                       */
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             IF         COND(&TYPET = 'S') THEN(GOTO CMDLBL(TSAD))
/*                                       */
/*                                       */
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE          */
/*                                       */
             IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&SPLF) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANE) ORIENTAT(*V)
                          ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&SPLF &QNBR &QUSER &QJOB +
                          &BANE)
                          ENDDO
             DLTSPLF    FILE(&SPLF) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
/*                                       */
             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
    /* */
    /* SJEKK OM DKX014PV FINNES FØR RETUR */
/*                                       */
             CHGVAR     VAR(&VARE) VALUE('J')
             RLSSPLF    FILE(&SPLF2) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF3309 CPF3303) EXEC(DO)
             CHGVAR     VAR(&VARE) VALUE('N')
             GOTO       CMDLBL(SLUTT)
             ENDDO
/* CPF3322 = LISTE ER IKKE HOLDT. BEHØV IKKE RELEASE.*/
             MONMSG     MSGID(CPF3322)

/*  LAGRER VARELISTE                     */
/*                                       */
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
/*                                       */
/*                                       */
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE          */
/*                                       */
             IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&SPLF2) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEV) ORIENTAT(*V)
             ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&SPLF2 &QNBR &QUSER &QJOB +
                          &BANEV)
                          ENDDO
             DLTSPLF    FILE(&SPLF2) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
/* N01  START                            */
             GOTO       CMDLBL(SLUTT2)
/*                                       */
/* DKX014PFS (TSAD)                      */
/* LAGER PDF OG LEGGER I MAPPE          */
/*                                       */
 TSAD:       IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&SPLF5) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEV) ORIENTAT(*V)
             ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&SPLF5 &QNBR &QUSER &QJOB +
                          &BANE)
                          ENDDO
             DLTSPLF    FILE(&SPLF5) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
/*                                       */
/*                                       */
/* DKX014PVS (TSAD)                      */
/* LAGER PDF OG LEGGER I MAPPE          */
/*                                       */
             CHGVAR     VAR(&VARE) VALUE('J')
             IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&SPLF6) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANEV) ORIENTAT(*V)
             ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&SPLF6 &QNBR &QUSER &QJOB +
                          &BANEV)
                          ENDDO
             DLTSPLF    FILE(&SPLF6) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
 SLUTT2:
/*                                       */
             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
    /* */
    /* */
 SLUTT:      ENDPGM
