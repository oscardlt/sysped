             PGM
             DCL        VAR(&IN01) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in01 på, betyr det avslutt program +
                          fra valgbilde. */
             DCL        VAR(&IN03) TYPE(*LGL) LEN(1) /* Hvis &in03 +
                          på, skal losseliste  være stående. */
             DCL        VAR(&KOPI) TYPE(*CHAR) LEN(1) /* Hvis &KOPI +
                          =J, skal KOPIER SKRIVES          . */
             DCL        VAR(&IN04) TYPE(*LGL) LEN(1) /* Hvis &in04 +
                          på, skal printetype være 4224. */
             DCL        VAR(&IN05) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in05 på, betyr programkallinng fra +
                          BORDERAUR. */
             DCL        VAR(&IN06) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in06 på, betyr programkalleing fra +
                          MANEFEST. */
             DCL        VAR(&IN07) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in07 på, betyr programkallinng fra +
                          KREDITERING. */
             DCL        VAR(&IN08) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          If &in08=1 , meens invoicing on order- +
                          type         */
    /* */
             DCL        VAR(&LG) TYPE(*CHAR) LEN(1) /* Hvis 'L', +
                          benytter linjegods fraktbrev. ellers vanlig +
                          frakbrev. */
             DCL        VAR(&EKSP) TYPE(*CHAR) LEN(1) /* Hvis 'J', +
                          benytter ekspress fraktbrev. */
             DCL        VAR(&LT) TYPE(*CHAR) LEN(1) /* Hvis 'L', +
                          benytter linjegodstollpass. */
             DCL        VAR(&KODE) TYPE(*CHAR) LEN(1) VALUE('F') /* +
                          Kode = 'F', 'T'. */
             DCL        VAR(&VB) TYPE(*CHAR) LEN(1) /* Hvis &VB = +
                          'J', skal sende valgbilde ut til bruker. */
    /* */
             DCL        VAR(&VBST) TYPE(*CHAR) LEN(1) /* Vanlig +
                          fraktbrev standard */
             DCL        VAR(&VBLI) TYPE(*CHAR) LEN(1) /* Vanlig +
                          fraktbrev linjegods */
             DCL        VAR(&VBEK) TYPE(*CHAR) LEN(1) /* Ekpress +
                          fraktbrev. */
             DCL        VAR(&TPST) TYPE(*CHAR) LEN(1) /* Tollpass +
                          fraktbrev standadr */
             DCL        VAR(&TPLI) TYPE(*CHAR) LEN(1) /* Tollpass +
                          fraktbrev linjegods */
    /* */
             DCL        VAR(&OF) TYPE(*CHAR) LEN(1) /* +
                          Oppdragsformular. */
             DCL        VAR(&VF) TYPE(*CHAR) LEN(1) /* Vanlig +
                          fraktbrev. */
             DCL        VAR(&TPFB) TYPE(*CHAR) LEN(1) /* Tollpass +
                          fraktbrev. */
             DCL        VAR(&FP) TYPE(*CHAR) LEN(1) /* Forpassing +
                          SAD. */
             DCL        VAR(&IFFB) TYPE(*CHAR) LEN(1) /* Innenland +
                          flyfraktbrev. */
             DCL        VAR(&LOSS) TYPE(*CHAR) LEN(1) /* Losseliste. */
             DCL        VAR(&FFAK) TYPE(*CHAR) LEN(12) /* Ferdig +
                          Ferdig meldte fakturaer. */
             DCL        VAR(&MS) TYPE(*CHAR) LEN(2) /* Meldesedler */
             DCL        VAR(&JBK) TYPE(*CHAR) LEN(1) /* Jobbkø. */
             DCL        VAR(&UNIK) TYPE(*CHAR) LEN(7)
             DCL        VAR(&TIME) TYPE(*CHAR) LEN(6)
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* HENTE AVDELING, SIGNATUR OG FIRMAKODE */
             CALL       PGM(SYFA00) PARM(&IN01)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* HENTE OPPLYSNINGER OM HVA SLAGS UTSKRIFT MAN ØNSKER */
             CALL       PGM(SYFAME) PARM(&JBK &IN01 &IN03 &IN04 &VBST +
                          &VBLI &VBEK &TPST &TPLI &OF &VF &TPFB &FP +
                          &IFFB &LOSS &FFAK)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT MELDESEDLER */
             RTVDTAARA  DTAARA(*LDA (49 2)) RTNVAR(&MS) /* Hente +
                          oppdragstype fra UDS. */
             IF         COND(&MS *NE '  ') THEN(DO)
             CHGVAR     VAR(&FFAK) VALUE(' ')
             CHGVAR     VAR(&IN08) VALUE('1')
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYFA20CLJ) PARM(&FFAK &IN05 +
                          &IN06 &IN07 &IN08 &KOPI)) JOB(MELDES) +
                          JOBD(*USRPRF) JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYFA20CLJ) PARM(&FFAK &IN05 &IN06 &IN07 +
                          &IN08 &KOPI)
                        ENDDO
                        ENDDO
    /* */
 SLUTT:      ENDPGM
