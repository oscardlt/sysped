      * Prototype
     D JSONescape      PR                  ExtPgm('JSONESC')
     D   String                   32000A
      * Program Interface
     D JSONescape      PI
     D   String                   32000A
      *
      *
      * i flg dokumentasjon skal /" være rett måte å escape en " i JSON - men det blir syntaxfeil
      * Inn til videre jukser med å omsette " til '
     c*                  z-add     1             pos               5 0
     c*                  dow       pos <> 0
     c*                  EVAL      pos  = %scan ('"' : String : pos)
     c*                  if        pos <> 0
     c*                  eval      String = %replace ('/"': String: Pos :1)
     c*                  eval      pos=pos+2
     c*                  endif
     c*                  enddo
      * Midlertideig ertatter " med single-app (hex 7d)
     c     '"':X'7D'     xlate     String        String
     c     '¬':'"'       xlate     String        String
     c     X'BB':X'40'   xlate     String        String
     c     '\':X'40'     xlate     String        String

     C                   SETON                                        LR
     C                   RETURN
