/* *********************************************************************   */
/*       * RETTINGER I DETTE PROGRAM:                                      */
/* PTFnr:*Sek Sig Vers  Beskrivelse..........................              */
/* """"""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""    */
/* 12XXX * 01 CB  PTF12 START/DLY VIA DATAQ                              */
/* ********************************************************************    */
             PGM
             /*_____________________*/
             /* Deklarere Variabler */
             /*"""""""""""""""""""""*/
             DCL        VAR(&MBR) TYPE(*CHAR) LEN(10)
             DCL        VAR(&OK) TYPE(*LGL) LEN(1)
             DCL        VAR(&SSN) TYPE(*DEC) LEN(9 0)
             DCL        VAR(&NETW) TYPE(*CHAR) LEN(1)
             DCL        VAR(&IID) TYPE(*CHAR) LEN(35)
             DCL        VAR(&U0054) TYPE(*CHAR) LEN(3)
             DCL        VAR(&U0065) TYPE(*CHAR) LEN(6)
/*N01*/      DCL        VAR(&QRNAME) TYPE(*CHAR) LEN(10) +
                          VALUE('EDI07CAQ')
/*N01*/      DCL        VAR(&QRLIB) TYPE(*CHAR) LEN(10) VALUE('*LIBL')
/*N01*/      DCL        VAR(&QRLEN) TYPE(*DEC) LEN(5 0) VALUE(1)
/*N01*/      DCL        VAR(&QRFIEL) TYPE(*CHAR) LEN(1) VALUE('X') +
             /*________________________________*/
             /* Merk meldinger som skal sendes */
             /*""""""""""""""""""""""""""""""""*/
             CALL       PGM(TR102R) PARM(&OK)
             IF         COND(&OK *EQ '0') THEN(GOTO CMDLBL(END))
             /*_________________________________________________*/
             /* Finnes det noe å sende ? + hente komponentnavn. */
             /*"""""""""""""""""""""""""""""""""""""""""""""""""*/
 START:      CALL       PGM(TR103R) PARM(&OK &MBR &SSN &NETW)
             IF         COND(&OK *EQ '0') THEN(GOTO CMDLBL(OK))
             GOTO       CMDLBL(END)
             /*____________________*/
             /* Generere komponent */
             /*""""""""""""""""""""*/
             /*__________________*/
             /* Lage EDIfact-fil */
             /*""""""""""""""""""*/
 OK:         CALL       PGM(TR101R) PARM(&SSN &NETW)
/*N01*/      IF         COND(&NETW *EQ 'A') THEN(CHGVAR VAR(&QRNAME) +
                          VALUE('EDI07CAQ'))
/*N01*/      IF         COND(&NETW *EQ '3') THEN(CHGVAR VAR(&QRNAME) +
                          VALUE('EDI07C3Q'))
/*N01*/      CALL       PGM(QSNDDTAQ) PARM(&QRNAME &QRLIB &QRLEN +
                          &QRFIEL)
             GOTO       CMDLBL(START)

 END:        ENDPGM
