********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
P1000A* 01 CB  PTF10  kode till særskilda upplysningar
********************************************************************
     FSVIVX     UF A E           K DISK
     FSVI034D   CF   E             WORKSTN
N01  F                                     INFDS(FBAREA)
N01  D FBAREA          DS
N01  D  WSCLOC               370    371B 0
N01  D  WSSUBN               378    379B 0
      *//////////////
      *  Hodelogikk /
      *//////////////
     C                   EXSR      SRA
     C                   EXSR      SRB
     C                   MOVE      '1'           *INLR
      *////////////////////////////////////////////////////////////
      *  Initiering                                           SRA /
      *////////////////////////////////////////////////////////////
     C     SRA           BEGSR
      *____________________
      * Definiere variabler
      *""""""""""""""""""""
     C     *LIKE         DEFINE    SVIVX_SYAV    ZVIVX_SYAV
     C     *LIKE         DEFINE    SVIVX_SYOP    ZVIVX_SYOP
     C     *LIKE         DEFINE    SVIVX_SYLI    ZVIVX_SYLI
      *_________________
      * Input parametere
      *"""""""""""""""""
     C     *ENTRY        PLIST
     C                   PARM                    ZVIVX_SYAV
     C                   PARM                    ZVIVX_SYOP
     C                   PARM                    ZVIVX_SYLI
      *__________________
      * Definiere Nøkkler
      *""""""""""""""""""
     C     SVIVX_KEY     KLIST
     C                   KFLD                    ZVIVX_SYAV
     C                   KFLD                    ZVIVX_SYOP
     C                   KFLD                    ZVIVX_SYLI
N01   *_________________________________
N01   * Hæmta dagens datum och klockslag
N01   *"""""""""""""""""""""""""""""""""
N01  C                   CALL      'SYGE15C'
N01  C                   PARM                    WDT               8
N01  C                   PARM                    WTM               6
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      *  Bearbeide Formater                                   SRB /
      *////////////////////////////////////////////////////////////
     C     SRB           BEGSR
     C     SVIVX_KEY     CHAIN(N)  SVIVX                              90
     C                   EVAL      XVIVX_SYAV=ZVIVX_SYAV
     C                   EVAL      XVIVX_SYOP=ZVIVX_SYOP
     C                   EVAL      XVIVX_SYLI=ZVIVX_SYLI
N01  C                   EVAL      XVIVX_SUK1=SVIVX_SUK1
N01  C                   EVAL      XVIVX_SUK6=SVIVX_SUK6
N01  C                   EVAL      XVIVX_SUKB=SVIVX_SUKB
     C                   EVAL      XVIVX_SYLI=ZVIVX_SYLI
     C                   EVAL      XVIVX_SUT1=SVIVX_SUT1
     C                   EVAL      XVIVX_SUT2=SVIVX_SUT2
     C                   EVAL      XVIVX_SUT3=SVIVX_SUT3
     C                   EVAL      XVIVX_SUT4=SVIVX_SUT4
     C                   EVAL      XVIVX_SUT5=SVIVX_SUT5
     C                   EVAL      XVIVX_SUT6=SVIVX_SUT6
     C                   EVAL      XVIVX_SUT7=SVIVX_SUT7
     C                   EVAL      XVIVX_SUT8=SVIVX_SUT8
     C                   EVAL      XVIVX_SUT9=SVIVX_SUT9
     C                   EVAL      XVIVX_SUTA=SVIVX_SUTA
     C                   EVAL      XVIVX_SUTB=SVIVX_SUTB
     C                   EVAL      XVIVX_SUTC=SVIVX_SUTC
     C                   EVAL      XVIVX_SUTD=SVIVX_SUTD
     C                   EVAL      XVIVX_SUTE=SVIVX_SUTE
     C                   EVAL      XVIVX_SUTF=SVIVX_SUTF
      * Viser bilde
     C     TAG01         TAG
     C                   EXFMT     SVI034DA
      * andre funksjonstaster
     C     *IN03         CABEQ     *ON           SRB8
     C     *IN12         CABEQ     *ON           SRB9
N01   * F4=Søk
N01  C     WSCLOC        DIV       256           LINNBR
N01  C                   MVR                     POSNBR
N01  C     *IN04         IFEQ      '1'
N01  C     LINNBR        IFGE      6
N01  C     LINNBR        ANDLE     16
N01  C     POSNBR        ANDEQ     2
N01  C                   EXSR      SRC
N01  C                   GOTO      TAG01
N01  C                   ENDIF
N01  C                   ENDIF

     C     SRB8          TAG
     C     SVIVX_KEY     CHAIN     SVIVX                              90
     C   90              EVAL      SVIVX_SYAV=ZVIVX_SYAV
     C   90              EVAL      SVIVX_SYOP=ZVIVX_SYOP
     C   90              EVAL      SVIVX_SYLI=ZVIVX_SYLI
N0   C                   EVAL      SVIVX_SUK1=XVIVX_SUK1
N0   C                   EVAL      SVIVX_SUK6=XVIVX_SUK6
N0   C                   EVAL      SVIVX_SUKB=XVIVX_SUKB
     C                   EVAL      SVIVX_SUT1=XVIVX_SUT1
     C                   EVAL      SVIVX_SUT2=XVIVX_SUT2
     C                   EVAL      SVIVX_SUT3=XVIVX_SUT3
     C                   EVAL      SVIVX_SUT4=XVIVX_SUT4
     C                   EVAL      SVIVX_SUT5=XVIVX_SUT5
     C                   EVAL      SVIVX_SUT6=XVIVX_SUT6
     C                   EVAL      SVIVX_SUT7=XVIVX_SUT7
     C                   EVAL      SVIVX_SUT8=XVIVX_SUT8
     C                   EVAL      SVIVX_SUT9=XVIVX_SUT9
     C                   EVAL      SVIVX_SUTA=XVIVX_SUTA
     C                   EVAL      SVIVX_SUTB=XVIVX_SUTB
     C                   EVAL      SVIVX_SUTC=XVIVX_SUTC
     C                   EVAL      SVIVX_SUTD=XVIVX_SUTD
     C                   EVAL      SVIVX_SUTE=XVIVX_SUTE
     C                   EVAL      SVIVX_SUTF=XVIVX_SUTF
     C  N90              UPDATE    SVIVXR
     C   90              WRITE     SVIVXR

     C     SRB9          TAG
     C                   ENDSR
N01   *////////////////////////////////////////////////////////////
N01   *  Søk                                                  SRC /
N01   *////////////////////////////////////////////////////////////
N01  C     SRC           BEGSR
N01   * Særskilda upplysningar, kod
N01  C                   CALL      'SVT003R'
N01  C                   PARM      'SAL'         UTYP              3
N01  C                   PARM      'A'           UIE               1
N01  C                   PARM      WDT           UDATO             8
N01  C                   PARM                    UKD              10
N01  C     UKD           IFNE      *BLANKS
N01  C                   SELECT
N01  C     LINNBR        WHENEQ    6
N01  C                   MOVEL     UKD           XVIVX_SUK1
N01  C     LINNBR        WHENEQ    11
N01  C                   MOVEL     UKD           XVIVX_SUK6
N01  C     LINNBR        WHENEQ    16
N01  C                   MOVEL     UKD           XVIVX_SUKB
N01  C                   ENDSL
N01  C                   ENDIF
N01  C                   GOTO      SRC1
N01
N01  C     SRC1          ENDSR
