/********************************************************************/
/*                                                                  */
/* 5770SS1 V7R1M0 100423   Utdata fra RTVCLSRC   26.09.18 15.26.38  */
/*                                                                  */
/* Programnavn  . . . . . . . . . . . . . . :   CGIDEBUG          PN*/
/* Biblioteknavn  . . . . . . . . . . . . . :   SYSPED            PL*/
/* Opprinnelig kildefil . . . . . . . . . . :   QCLSRC            SN*/
/* Biblioteknavn  . . . . . . . . . . . . . :   CGIDEV2           SL*/
/* Opprinnelig kildekomponent . . . . . . . :   CGIDEBUG          SM*/
/* Endring av kildefil                                              */
/*   Dato/klokkeslett . . . . . . . . . . . :   14.03.05 10.21.35 SC*/
/* Valg for programretting  . . . . . . . . :   *NOPATCH          PO*/
/* Brukerprofil . . . . . . . . . . . . . . :   *USER             UP*/
/* Tekst  . . : Program for handling CGI debugging                TX*/
/* Eier . . . . . . . . . . . . . . . . . . :   QPGMR             OW*/
/* Merke for brukerendring  . . . . . . . . :   *YES              UM*/
/* Hente inkludert kilde  . . . . . . . . . :   *NO               RI*/
/*                                                                ED*/
/********************************************************************/
     PGM PARM(&ACTION &DTAARA &LIB)
     DCL VAR(&ACTION) TYPE(*CHAR) LEN(1)
     DCL VAR(&DTAARA) TYPE(*CHAR) LEN(10)
     DCL VAR(&LIB) TYPE(*CHAR) LEN(10)
     DCL VAR(&ONOFF) TYPE(*CHAR) LEN(4)
     DCL VAR(&STATUS) TYPE(*CHAR) LEN(1)
     DCL VAR(&COPYRIGHT) TYPE(*CHAR) LEN(100) VALUE('(C) Copyright -
IBM Corp. 1997 - 2002.  All rights reserved.')
     IF COND(1 = 2) THEN(CHGVAR VAR(&COPYRIGHT) VALUE(&COPYRIGHT))
     IF COND(&ACTION = '0' *OR &ACTION = '1') THEN(DO)
     IF COND(&ACTION = '0') THEN(CHGVAR VAR(&ONOFF) VALUE('*OFF'))
     ELSE CMD(CHGVAR VAR(&ONOFF) VALUE('*ON'))
     IF COND(&LIB = '*CURLIB') THEN(DO)
     RTVJOBA CURLIB(&LIB)
     ENDDO
     CHKOBJ OBJ(&LIB/&DTAARA) OBJTYPE(*DTAARA)
     MONMSG MSGID(CPF9801) EXEC(DO)
     CRTDTAARA DTAARA(&LIB/&DTAARA) TYPE(*CHAR) VALUE(&ACTION) -
TEXT('CGI debugging data area')
     ENDDO
     CHGDTAARA DTAARA(&LIB/&DTAARA) VALUE(&ACTION)
     SNDPGMMSG MSGID(CPF9898) MSGF(*LIBL/QCPFMSG) MSGDTA('CGI -
debugging changed to' *BCAT &ONOFF)
     RETURN
     ENDDO
     IF COND(&ACTION = '2') THEN(DO)
     RTVDTAARA DTAARA(&LIB/&DTAARA) RTNVAR(&STATUS)
     IF COND(&STATUS = '0') THEN(CHGVAR VAR(&ONOFF) VALUE('*OFF'))
     ELSE CMD(CHGVAR VAR(&ONOFF) VALUE('*ON'))
     SNDPGMMSG MSGID(CPF9898) MSGF(*LIBL/QCPFMSG) MSGDTA('CGI -
debugging status is' *BCAT &ONOFF)
     ENDDO
     IF COND(&ACTION = '3') THEN(DSPPFM FILE(&LIB/CGIDEBUG))
     IF COND(&ACTION = '4') THEN(DO)
     ALCOBJ OBJ((CGIDEBUG *FILE *EXCL)) WAIT(1)
     MONMSG MSGID(CPF0000) EXEC(DO)
     RCVMSG
     CALL PGM(*LIBL/CLRDEBUG) PARM(&LIB)
     GOTO CMDLBL(CONTINUE)
     ENDDO
     DLCOBJ OBJ((CGIDEBUG *FILE *EXCL))
     CLRPFM FILE(&LIB/CGIDEBUG)
     MONMSG MSGID(CPF0000)
     ENDDO
CONTINUE: +
     ENDPGM
