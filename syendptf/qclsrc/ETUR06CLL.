/* N01 * TIMESTAMP I FILNAVN FOR Å HINDRE CASHING I BROWSER*/
/* N02 * LOGO + USERID +  VALG &STLI                      */
/* N02 * USERID   /VALG &LIGG                      */
/* S02       PGM        PARM(&FIRMA &AVD &TNO &STMF)  */
/* N02 */    PGM        PARM(&FIRMA &AVD &TNO &STMF &ESPUSR &STLI)
             DCL        VAR(&DRAWER) TYPE(*CHAR) LEN(7)
             DCL        VAR(&DRAWUT) TYPE(*CHAR) LEN(11)
             DCL        VAR(&COPIES)  TYPE(*CHAR) LEN(6)
             DCL        VAR(&PNAVN)  TYPE(*CHAR) LEN(10)
             DCL        VAR(&FORM)  TYPE(*CHAR) LEN(10)
/*E02*/      DCL        VAR(&LOGO)  TYPE(*CHAR) LEN(9) VALUE('LOGOFAKT')
             DCL        VAR(&LPI2) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&LASER) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STAA) TYPE(*DEC) LEN(3 0) VALUE(020)
             DCL        VAR(&FILEN) TYPE(*CHAR) LEN(10)
             DCL        VAR(&FIRMA) TYPE(*CHAR) LEN(2)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&TNO) TYPE(*CHAR) LEN(8)
             DCL        VAR(&KNA) TYPE(*CHAR) LEN(8) VALUE('00000000')
             DCL        VAR(&FAX) TYPE(*CHAR) LEN(1)
             DCL        VAR(&ADRJN) TYPE(*CHAR) LEN(1) VALUE('N')
             DCL        VAR(&BELJN) TYPE(*CHAR) LEN(1)
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(50)
             DCL        VAR(&STMF2) TYPE(*CHAR) LEN(50)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
/*N01*/      DCL        VAR(&TS) TYPE(*CHAR) LEN(9)
/*N02*/      DCL        VAR(&ESPUSR) TYPE(*CHAR) LEN(10)
/*N02*/      DCL        VAR(&STLI) TYPE(*CHAR) LEN(1)

             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*N02*/      /* låner uds pos Instruks 2 (CMR) for eSpedUser */
/*N02*/      CHGDTAARA  DTAARA(*LDA (126 10)) VALUE(&ESPUSR)
             CHGDTAARA  DTAARA(*LDA (3 2)) VALUE(&FIRMA)
             CHGDTAARA  DTAARA(*LDA (15 4)) VALUE(&AVD)
             CHGDTAARA  DTAARA(*LDA (22 8)) VALUE(&TNO)
 /*          CALL       PGM(GETPRN) PARM(&AVD &STAA &PNAVN &FORM +
                          &LASER &LPI2 &DRAWER &COPIES &LOGO &DRAWUT)*/

    /* OVERRIDE PRINTERFILE/SKRIV-PACKINGLIST */
   /* midlertidig nå &logo er blank må param vær *none -ikke ( '   ' 0 0 )*/
   /* midlt  OVRPRTF    FILE(SYFA54PF) DEVTYPE(*AFPDS) PAGESIZE(70 +
                          120) LPI(6) CPI(15) FRONTMGN(0 0,2) +
                          OVRFLW(62) FRONTOVL(&LOGO 0 0) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)   */
/*N02*/      IF         COND(&STLI *NE 'L') THEN(DO)
             OVRPRTF    FILE(SYFA54PF) DEVTYPE(*AFPDS) PAGESIZE(70 +
                          120) LPI(6) CPI(15) FRONTMGN(0 0,2) +
                          OVRFLW(62) FRONTOVL(&LOGO) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)
/*N02*/      ENDDO
/*N02*/      IF         COND(&STLI *EQ 'L') THEN(DO)
/*N02*/      CHGVAR     VAR(&LOGO) VALUE('LOGOFAKL')
/*N02*/      OVRPRTF    FILE(SYFA54PF) DEVTYPE(*AFPDS) PAGESIZE(48 +
                          120) LPI(6) CPI(12) FRONTMGN(0 0,2) +
                          OVRFLW(40) PAGRTT(90) FRONTOVL(&LOGO) +
                          OUTQ(SYCGIOUTQ) FORMTYPE(*STD) SPLFOWN(*JOB)
/*N02*/      ENDDO

             CALL       PGM(SYFA54)  parm(&laser)

             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             CALL       PGM(SYGE40) PARM(&INFOP)
             IF         COND(&INFOP = 'N') THEN(DO)
/*N01*/      RTVSYSVAL  SYSVAL(QTIME) RTNVAR(&TS)
/*S01        CHGVAR     VAR(&STMF2) VALUE('/syspeddev/temp/' *CAT +
                          &TNO *CAT 'LASTL.PDF')   */
/*N01*/      CHGVAR     VAR(&STMF2) VALUE('/syspeddev/temp/LL' *CAT +
                          &TNO *CAT '_' *CAT &TS *CAT '.PDF')
             CHGVAR     VAR(&STMF) VALUE(&STMF2)
             RMVLNK     OBJLNK(&STMF)
             MONMSG     MSGID(CPF0000)
  /*         CVTSPLFPDF SPLF(SYFA54PF) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST) TOPDF(&STMF)     */
             CVTSPLFPDF SPLF(SYFA54PF) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST) TOPDF(&STMF) ORIENTAT(*V)
                          ENDDO
             IF         COND(&INFOP = 'J') THEN(DO)
             CHGVAR     VAR(&FILEN) VALUE('SYFA54PF')
             CALL       PGM(INF001CL) PARM(&FILEN &QNBR &QUSER &QJOB +
                          &STMF)
                          ENDDO
             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)

             DLTSPLF    FILE(SYFA54PF) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
    /* */
 SLUTT:      ENDPGM
