     FEDIM      IF   E           K DISK
     FEDIMG     IF   E           K DISK    PREFIX(G_) RENAME(EDIMR:EDIMRG)
     FEFTX93A   IF   E           K DISK
     FERFF93A   IF   E           K DISK
     FDOKULG    O  A E             DISK
     FTVINF     O  A E             DISK
     FFRISOK    O  A E             DISK
     FKODFRI    IF   E           K DISK
     D                 DS
     D  WMN2                   1      9  0
      */////////////
      * MAIN LOGIC /
      */////////////
      *___________
      * Initiering
      *"""""""""""
     C                   EXSR      INIT
      *________
      * CONVERT
      *""""""""
     C                   EXSR      RTVD

     C                   MOVE      '1'           *INLR
      *////////////////////////////////////////////////////////////
      * FTX00                                               FTX00 /
      *////////////////////////////////////////////////////////////
     C     FTX00         BEGSR
     C                   MOVE      '0'           *IN51
     C                   Z-ADD     0             ZGN0
     C     KEYMS0        CHAIN     EFTX93A                            52
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      *                                                      INIT /
      *////////////////////////////////////////////////////////////
     C     INIT          BEGSR
     C     KEYMS0        KLIST
     C                   KFLD                    MMN
     C                   KFLD                    ZGN0
     C     EDIMGK        KLIST
     C                   KFLD                    WST
     C                   KFLD                    WSR
     C                   KFLD                    M1004

     C     *LIKE         DEFINE    RMN           ZMN
     C     *LIKE         DEFINE    RGN           ZGN0
     C     *LIKE         DEFINE    MST           WST
     C     *LIKE         DEFINE    MSR           WSR

     C     *ENTRY        PLIST
     C                   PARM                    WMN1              9
     C                   MOVEL     WMN1          WMN2
     C                   Z-ADD     WMN2          ZMN

     C                   MOVE      'C'           WST
     C                   MOVE      'S'           WSR
      * Get message values
     C     ZMN           CHAIN     EDIM                               51

     C                   ENDSR
      *////////////////////////////////////////////////////////////
      * RFF03                                               RFF03 /
      *////////////////////////////////////////////////////////////
     C     RFF03         BEGSR
     C                   MOVE      '0'           *IN51
     C                   Z-ADD     3             ZGN0
     C     KEYMS0        CHAIN     ERFF93A                            53
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      * RETREIVE INFO FROM EDIFACT DATABASE TO SYSPED        RTVD /
      *////////////////////////////////////////////////////////////
     C     RTVD          BEGSR
      *__________________
      * READ ALL SEGMENTS
      *""""""""""""""""""
     C                   EXSR      FTX00
     C                   EXSR      RFF03
     C                   EXSR      RTVDOK
      * skriv til Linjegods loggfile
     C                   CLEAR                   DOKULGR
     C  N54              Z-ADD     G_MAVD        LGAVD
     C  N54              Z-ADD     G_MTDN        LGOPD
     C  N54              Z-ADD     G_MFFBNR      LGFBNR
     C  N51              Z-ADD     ZMN           LGMN
     C  N53              MOVEL     R1154         LG1154
     C  N52              MOVEL     F4440A        LG4440A
     C  N52              MOVEL     F4440B        LG4440B
     C  N52              MOVEL     F4440C        LG4440C
     C  N52              MOVEL     F4440D        LG4440D
     C  N52              MOVEL     F4440E        LG4440E
     C  N52              WRITE     DOKULGR
      * skriv til SYSPED TVINF
     C                   CLEAR                   TVINFF
     C  N52              Z-ADD     ZMN           FMN
     C  N52              MOVEL     F4440A        F0078A
     C  N52              MOVEL     F4440B        F0078B
     C  N52              MOVEL     F4440C        F0078C
     C  N52              MOVEL     F4440D        F0078D
     C  N52              MOVEL     F4440E        F0078E
     C                   WRITE     TVINFF
      * Skriv til frie søkeveier
     C                   CLEAR                   FRISOKR
     C  N54              Z-ADD     G_MAVD        FSAVD
     C  N54              Z-ADD     G_MTDN        FSOPD
     C  N53              MOVEL     R1154         FSSOK
     C  N54              MOVE      G_MDT         FSDTOP
     C  N52              MOVEL     'IFB'         FSKODE
     C  N52FSKODE        CHAIN     KODFRI                             33
     C  N52              IF        *IN33
     C                   MOVE      *BLANKS       FSDOKK
     C                   ELSE
     C                   MOVE      KFSODK        FSDOKK
     C                   END
     C  N52              WRITE     FRISOKR
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      * RTVDOK                                             RTVDOK /
      *////////////////////////////////////////////////////////////
     C     RTVDOK        BEGSR
     C     EDIMGK        CHAIN     EDIMG                              54
     C                   ENDSR
