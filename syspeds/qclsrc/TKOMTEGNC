/* Ved flerfirma er signaturer felles for alle firma */
/* Kjøres kun EN gang (fra JOBSCDE ) - kjøres fra SYSPED  ??? */
/* -in / -out / -loglevel  er parametre i javakallet          */
/* -loglevel 1 = full logging, 2,3,4 synkende, 5 = KUN FATAL errors logges  */

             PGM
             DCL        VAR(&TIME) TYPE(*CHAR) LEN(6)
             CRTPF      FILE(QTEMP/TKOMTEGNL) RCDLEN(500) +
                          SIZE(100000 10000)
             MONMSG     MSGID(CPF0000)
             CRTPF      FILE(SYSPED/TKOMTEGNL) RCDLEN(500) +
                          SIZE(10000000 10000)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(STDOUT) TOFILE(QTEMP/TKOMTEGNL)

 START:      QSH        CMD('java -Djava.awt.headless=true +
                          -classpath /syspeddev/TKomtegn TKomtegn +
                          -in /syspeddev/tksigntmp +
                          -out /syspeddev/signatur +
                          -loglevel 1')

             CPYF       FROMFILE(QTEMP/TKOMTEGNL) +
                          TOFILE(SYSPED/TKOMTEGNL) MBROPT(*ADD)
             MONMSG     MSGID(CPF0000)

   /* HVIS STARET MED LOOP = Y - KJØR HVERT 10. MINUTT. */
              RTVSYSVAL  SYSVAL(QTIME) RTNVAR(&TIME)
              IF         COND(&TIME *LT '230000') THEN(DO)
              DLYJOB     DLY(120)
              GOTO       CMDLBL(START)
              ENDDO
ENDPGM
