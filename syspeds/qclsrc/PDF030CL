/* DENNE KJØRER EPOST  PAKKSEDDEL      */
/*                         */
             PGM        PARM(&STMF &BANE &INFOP &PARM2)
             DCL        VAR(&PARM2) TYPE(*CHAR) LEN(64)
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&LAS) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STR) TYPE(*CHAR) LEN(5)
             DCL        VAR(&KOPI) TYPE(*DEC) LEN(2 0) VALUE(1)
             DCL        VAR(&LIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&VISE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FILEN) TYPE(*CHAR) LEN(10) VALUE('LL027P')
             DCL        VAR(&P1) TYPE(*CHAR) LEN(2) VALUE('00')
             DCL        VAR(&P2) TYPE(*CHAR) LEN(1) VALUE('N')
             DCL        VAR(&P3) TYPE(*LGL) LEN(1) VALUE('0')
             DCL        VAR(&P4) TYPE(*LGL) LEN(1) VALUE('0')
             DCL        VAR(&P5) TYPE(*LGL) LEN(1) VALUE('0')
             DCL        VAR(&P6) TYPE(*LGL) LEN(1) VALUE('0')
             DCL        VAR(&P7) TYPE(*CHAR) LEN(1) VALUE('J')
             DCL        VAR(&P8) TYPE(*CHAR) LEN(1) VALUE('J')
             DCL        VAR(&P9) TYPE(*CHAR) LEN(1) VALUE('J')
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(152)
             DCL        VAR(&BANE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&LTYPE) TYPE(*CHAR) LEN(1)

             DCL        VAR(&FIRM) TYPE(*CHAR) LEN(2)
             DCL        VAR(&ALN) TYPE(*CHAR) LEN(7)
             DCL        VAR(&NR) TYPE(*CHAR) LEN(1)
             DCL        VAR(&TOT) TYPE(*CHAR) LEN(1)
             DCL        VAR(&EPOST) TYPE(*CHAR) LEN(70)

             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*                                         */
/*           SKJEKK OM PDF FINNES FRA FØR  */
/*                                         */
             CHGDTAARA  DTAARA(*LDA (47 1)) VALUE('F')
             OVRPRTF    FILE(QSYSPRT) OUTQ(OUTMAIL)
             DSPLNK     OBJ(&BANE) OUTPUT(*PRINT) OBJTYPE(*STMF) +
                          DETAIL(*NAME) DSPOPT(*USER)
             MONMSG     MSGID(CPFA0A9) EXEC(GOTO CMDLBL(VIDERE))
             DLTSPLF    FILE(QSYSPRT) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             IF         COND(&VISE = 'J') THEN(DO)
             CALL       PGM(PDF001) PARM(&STMF)
             ENDDO
             RETURN
    /*                                    */
    /* SKRIVER MOTTAKSRAPPORT             */
    /*                                    */
    /* */

             /* OVERRIDE     */
/*                         */
/*    IKKE LASER           */
/*                         */
VIDERE:      OVRPRTF    FILE(&FILEN) PAGESIZE(72 120) CPI(15) +
                          OVRFLW(62) PAGRTT(0) OUTQ(OUTMAIL) +
                          FORMTYPE(*STD) HOLD(*YES)
/*                                                  */
             CALL       PGM(LL014R) PARM(&FIRM &ALN &KOPI &NR &TOT +
                        &LAS &STR &EPOST &QUSER &QJOB &QNBR)
/*                                       */
/* LAGER PDF AV SELVE FAKTURAEN          */
/*                                       */
/* FINNES FILEN  ??                      */
/*                                       */
             RLSSPLF    FILE(&FILEN) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF3309 CPF3303 CPF3322) EXEC(DO)
             GOTO       CMDLBL(SLUTT)
             ENDDO
/*                                       */
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE          */
/* UTEN INFOPRINT                        */
/*                                       */
             IF         COND(&INFOP = 'N') THEN(DO)
             CVTSPLFPDF SPLF(&FILEN) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANE) ORIENTAT(*V)
             DLTSPLF    FILE(&FILEN) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
                          ENDDO
/*                                       */
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE           */
/* MED  INFOPRINT                        */
/*                                       */
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&FILEN &QNBR &QUSER &QJOB +
                          &BANE)
                          ENDDO
/*                                       */
/*                                       */
/*                                       */
             RMVLIBLE   LIB(MMAIL)
 SLUTT:      ENDPGM
