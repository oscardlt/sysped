N01  Fnofly     IP   E             DISK
N01  Fnoflypj   IF   E           k DISK
     Fnoflyspb  IF   E           k disk
     Fnoflydum  IF   E           k disk
     F                                     RENAME(noflyr:xxflyr)
N01  Fnoflysob  O  a E             DISK
     c*
     c* genererer alle fra til steder i norge
     c*
     c                   movel     st2kod        sofra
     c                   move      st2son        sonfrx            1 0
     c                   setoff                                       33
     c     sofra         chain     noflypj                            34
     c     *in34         ifne      '1'
     c     *loval        setll     noflydum
     c     *in33         doweq     '0'
     c                   read      noflydum                               33
     c  N33st2kod        ifne      sofra
     C                   EXSR      GENson
     c                   endif
     c                   enddo
     c                   endif
     c****************************************
     c     genson        begsr
     c****************************************
     c                   move      sonfrx        sonfra            1 0
     c                   z-add     st2son        sontil            1 0
     c                   movel     st2KOD        SOTIL
     c
     c* VED FRASTED lik TRD
     c* spesial ved TRD TOS  trondheim
     c* må trekke fra 1 hvis på fra sone hvis det går sørover
     c*
     c     sofra         ifeq      'TRD'
     c     sontil        iflt      sonfra
     c                   sub       1             sonfra
     c                   end
     c                   end
     c*
     c                   movel     sonfra        sotab
     c                   move      sontil        sotab
     c     sotab         chain     noflyspb                           33
     c*
     C* UNNTAK BRÅTHEN TROMSØ SVALBARD  30 KRONER
     C     SOFRA         IFEQ      'TOS'
     C     SOTIL         ANDEQ     'LYR'
     C                   Z-ADD     30            SOPRIS
     C                   Z-ADD     1285          SOgrun
     C                   END
     C*
     C     SOFRA         IFEQ      'LYR'
     C     SOTIL         ANDEQ     'TOS'
     C                   Z-ADD     30            SOPRIS
     C                   Z-ADD     1285          SOgrun
     C                   END
     C*
     c                   write     noflysobr
     c                   endsr
     c*
