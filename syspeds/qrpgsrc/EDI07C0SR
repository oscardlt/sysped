     FDKTFI     IF   E             DISK
     FEDIS      IF   E           K DISK
     FEDI07C0R  O  A F  512        DISK
     D A               S              1    DIM(256)
     C     *LIKE         DEFINE    SSN           WSSN
     C     *LIKE         DEFINE    SIFS          WSIFS
      * INPUT PARAMETER
     C     *ENTRY        PLIST
     C                   PARM                    WFTPIP           64
     C                   PARM                    WSSN
     C     WSSN          CHAIN     EDIS                               20
      * Hæmta firmaupplysningar
     C     1             CHAIN     DKTFI
     C                   IF        S0035=*BLANKS
N03  C                   EVAL      WFTPIP=DKTF_FTIPP
     C                   ELSE
N03  C                   EVAL      WFTPIP=DKTF_FTIPT
     C                   ENDIF
      * USERID AND PASSWORD RECORD
     C                   IF        S0035=*BLANKS
N02  C                   MOVEL(P)  DKTF_FTUSP    DATA            512
     C                   CAT       DKTF_FTPWP:1  DATA
     C                   ELSE
N02  C                   MOVEL(P)  DKTF_FTUST    DATA
     C                   CAT       DKTF_FTPWT:1  DATA
     C                   ENDIF
     C                   EXCEPT    AWRK
      * sendepsv 0
     C                   MOVEL(P)  'sendepsv 0'  DATA
     C                   EXCEPT    AWRK
      * NAMEFMT
     C                   MOVEL(P)  'NAMEFMT 1'   DATA
     C                   EXCEPT    AWRK
      * Finn filnavnet gjennom å finne siste skråstreken, alt bak den er filnavnet
     C                   EVAL      *IN21=*OFF
     C                   MOVEA     *BLANKS       A
     C                   MOVEA     SIFS          A
     C     1             DO        255           WX                3 0
     C     256           SUB       WX            WY                3 0
     C     A(WY)         IFEQ      '/'
     C                   LEAVE
     C                   ENDIF
     C                   ENDDO
     C                   ADD       1             WY
     C                   MOVEA     A(WY)         WSIFS
      * PUT
     C                   MOVEL(P)  'PUT'         DATA
     C                   CAT       SIFS:1        DATA

     C                   CAT       WSIFS:1       DATA
     C                   EXCEPT    AWRK
      * RENAME
     C                   MOVEL(P)  'ren'         DATA
     C                   CAT       WSIFS:1       DATA
     C                   CAT       'toldskat/':1 DATA
     C                   CAT       WSIFS:0       DATA
     C                   EXCEPT    AWRK
      * QUIT COMMAND RECORD
     C                   MOVEL(P)  'quit'        DATA
     C                   EXCEPT    AWRK
     C                   MOVE      '1'           *INLR
     OEDI07C0R  EADD         AWRK
     O                       DATA               512
