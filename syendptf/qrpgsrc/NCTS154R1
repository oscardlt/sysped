      *****************************************************************
      *** PROGRAM SKAL KONVERTERE INNGÅENDE IE43                    ***
      *** Release for transit                                       ***
      *** INDIKATORER 01 - 26 KUN CMD-TASTER / ROLL TASTER          ***
      *** LEDIGE INDIKATORER 01-26                                  ***
      *** LEDIGE INDIKATORER 28-32 34-97                            ***
      *****************************************************************
     H DFTACTGRP(*NO)
     FXMLRCVF   IF   E           K DISK
     FXMLRCLF   IF   E           K DISK
     FTRACKF    O  A E           K DISK
     FNCTSIH05  UF   E           K DISK
     FNCTSIC    UF A E           K DISK
     FNCTSII    UF A E           K DISK
     FGODSHF    O  A E           K DISK
     FGODSJL05  UF A E           K DISK
     FSYPROD    IF   E           K DISK
     FEDIC      UF   E             DISK
     FEDIM      O  A E             DISK
     FEDIM2     IF   E           K DISK    RENAME(EDIMR:EDIMR2)
     D                sds
     D ZUSER                 254    263
     D                 DS
     D TNPTY                   1      2
     D TNPTY2                  3      4
     D TNPTY3                  5      6
     D TNPTY4                  7      8
     D TNPTY5                  9     10
     D*PTY                     1     10    DIM(5)
     D*PTY_T                   1     10
     D PTY                     1    200    DIM(100)
     D PTY_T                   1    200
     D                 DS
     D TNPNT                   1      8  0
     D TNPNT2                  9     16  0
     D TNPNT3                 17     24  0
     D TNPNT4                 25     32  0
     D TNPNT5                 33     40  0
     D*PNT                     1     40  0 DIM(5)
     D*PNT_T                   1     40
     D PNT                     1    800  0 DIM(100)
     D PNT_T                   1    800
     D                 DS
     D TNPMRK                  1    120
     D TNPMRK2               121    240
     D TNPMRK3               241    360
     D TNPMRK4               361    480
     D TNPMRK5               481    600
     D*PMR                     1    600    DIM(5)
     D*PMR_T                   1    600
     D PMR                     1  12000    DIM(100)
     D PMR_T                   1  12000
     D                 DS
     D TNPDTY                  1      4
     D TNPDTY2                 5      8
     D TNPDTY3                 9     12
     D TNPDTY4                13     16
     D TNPDTY5                17     20
     D*PDTY                    1     20    DIM(5)
     D*PDTY_T                  1     20
     D PDTY                    1    400    DIM(100)
     D PDTY_T                  1    400
     D                 DS
     D TNPDRF                  1     70
     D TNPDRF2                71    140
     D TNPDRF3               141    210
     D TNPDRF4               211    280
     D TNPDRF5               281    350
     D*PDRF                    1    350    DIM(5)
     D*PDRF_T                  1    350
     D PDRF                    1   7000    DIM(100)
     D PDRF_T                  1   7000
     D                 DS
     D TNPDGN                  1      5  0
     D TNPDGN2                 6     10  0
     D TNPDGN3                11     15  0
     D TNPDGN4                16     20  0
     D TNPDGN5                21     25  0
     D*PDGN                    1     25  0 DIM(5)
     D*PDGN_T                  1     25
     D PDGN                    1    500  0 DIM(100)
     D PDGN_T                  1    500
     D                 DS
     D TNPDIN                  1     35
     D TNPDIN2                36     70
     D TNPDIN3                71    105
     D TNPDIN4               106    140
     D TNPDIN5               141    175
     D*PDIN                    1    175    DIM(5)
     D*PDIN_T                  1    175
     D PDIN                    1   3500    DIM(100)
     D PDIN_T                  1   3500
     D                 DS
     D  GOCCAA                 1      4  0
     D  GOCC                   1      2  0
     D  GOÅR                   3      4  0
     D                 DS
     D  TIDTG                  1      8  0
     D  TIDTGCA                1      4  0
      *  Prototype for 'SYTL10'
     d sytl10          pr                  extpgm('SYTL10')
     d gogn_                               like(gogn)
      *  Prototype for 'SYGE15C'
     d syge15c         pr                  extpgm('SYGE15C')
     d wdt_                                like(wdt)
     d wtm_                                like(wtm)
      *  Prototype for ncts154r1
     d ncts154r1       pr
     d usn_                                like(usn)
      *  *ENTRY Interface for Main Procedure
     d ncts154r1       pi
     d usn                            9
      *----------------------------------------------------------------------
      * Stand Alone Fields - TOP
      *----------------------------------------------------------------------
     d x1_xrlev1       s                   like(xrlev1)
     d x1_xrlev2       s                   like(xrlev2)
     d x2_xrlev1       s                   like(xrlev1)
     d x2_xrlev2       s                   like(xrlev2)
     d x2_xrlev3       s                   like(xrlev3)
     d x3_xrlev1       s                   like(xrlev1)
     d x3_xrlev2       s                   like(xrlev2)
     d x3_xrlev3       s                   like(xrlev3)
     d x3_xrlev4       s                   like(xrlev4)
     d x4_xrlev1       s                   like(xrlev1)
     d x4_xrlev2       s                   like(xrlev2)
     d x4_xrlev3       s                   like(xrlev3)
     d x4_xrlev4       s                   like(xrlev4)
     d x4_xrlev5       s                   like(xrlev5)
     d x5_xrlev1       s                   like(xrlev1)
     d x5_xrlev2       s                   like(xrlev2)
     d x5_xrlev3       s                   like(xrlev3)
     d x5_xrlev4       s                   like(xrlev4)
     d x5_xrlev5       s                   like(xrlev5)
     d x5_xrlev6       s                   like(xrlev6)
     d x6_xrlev1       s                   like(xrlev1)
     d x6_xrlev2       s                   like(xrlev2)
     d x6_xrlev3       s                   like(xrlev3)
     d x6_xrlev4       s                   like(xrlev4)
     d x6_xrlev5       s                   like(xrlev5)
     d x6_xrlev6       s                   like(xrlev6)
     d x6_xrlev7       s                   like(xrlev7)
     d x_titrnr        s                   like(titrnr)
     d x_tidtg         s              8
     d x_tidk          s                   like(tidk)
     d x_tirdin        s                   like(tirdin)
     d x_tisecu        s                   like(tisecu)
     d x_tcli          s                   like(tcli)
     d x_IE43          s              1a
     d x_opdhc         s              1a
     d xn_KOLLI        s              3s 0
     d xn_PREV         s              3s 0
     d xxbiln          s             13a
     d wdt             s              8
     d wtm             s              6
     D UP              C                   CONST('ABCDEFGHIJKLMNOPQRST-
     D                                     UVWXYZÆØÅ')
     D LO              C                   CONST('abcdefghijklmnopqrst-
     D                                     uvwxyzæøå')
      *----------------------------------------------------------------------
     IEDIMR2
     I              M0004                       X0004
     I              M0010                       X0010
     I              M0035                       X0035
     I              M0062                       X0062
     I              M0065                       X0065
     I              M0068                       X0068
     I              M0068A                      X0068A
     I              M0068B                      X0068B
     I              M0068C                      X0068C
     I              M0068D                      X0068D
     I              M0068E                      X0068E
     I              M0068F                      X0068F
     I              M1001                       X1001
     I              M1004                       X1004
     I              M1225                       X1225
     I              M2005B                      X2005B
     I              M3039D                      X3039D
     I              M3039E                      X3039E
     I              M5004D                      X5004D
     I              M1N07                       X1N07
     I              M1N08                       X1N08
     I              M9N01                       X9N01
     I              MSN                         XSN
     I              MMN                         XMN
     I              MSR                         XSR
     I              MST                         XST
     I              MDT                         XDT
     I              MTM                         XTM
     I              MVEN                        XVEN
     I              MAVD                        XAVD
     I              MTDN                        XTDN
      /free

       exsr init;

       exsr srxml;

       *inlr = *on;
       return;

       //**********************************************
       begsr srxml;
       //**********************************************

         x1_xrlev1 = 0;
         x1_xrlev2 = 0;

         chain (xrsn:x1_xrlev1:x1_xrlev2) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'messageSender';
             m0004  = xrverd;
           when xrnv = 'messageRecipient';
             m0010  = xrverd;
           when xrnv = 'preparationDateAndTime';
           when xrnv = 'messageIdentification';
             m0062  = xrverd;
             m1004  = xrverd;
           when xrnv = 'messageType' and xrverd = 'CC043C';
             x_ie43 = 'J';
           when xrnv = 'correlationIdentifier';
           when xrnv = 'TransitOperation';
             exsr srxml1;
           when xrnv = 'CustomsOfficeOfDestination'
             or xrnv = 'CustomsOfficeOfDestinationActual';
             exsr srxml2;
           when xrnv = 'HolderOfTheTransitProcedure';
             exsr srxml3;
           when xrnv = 'TraderAtDestination';
             exsr srxml4;
           when xrnv = 'Represebtative';
           when xrnv = 'CTL_Control';
             exsr srxml5;
           when xrnv = 'Consignment';
             exsr srxml6;
           endsl;

           x1_xrlev1 = x1_xrlev1 + 1;
           chain (xrsn:x1_xrlev1:x1_xrlev2) xmlrcvf;
         enddo;

         if x_ie43 = 'J';
           exsr opdopd;
           exsr ttsr;
           exsr godsjsr;
         endif;

         endsr;

       //**********************************************
       begsr srxml1;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'MRN';
             x_titrnr = xrverd;
           when xrnv = 'declarationType';
             x_tidk   = xrverd;
           when xrnv = 'additionalDeclarationType';
           when xrnv = 'TIRCarnetNumber';
           when xrnv = 'declarationAcceptanceDate';
             x_tidtg = %subst(xrverd:1:4) + %subst(xrverd:6:2)
                   + %subst(xrverd:9:2);
           when xrnv = 'security';
             x_tisecu = %dec(xrverd:1:0);
           when xrnv = 'reducedDatasetIndicator';
             x_tirdin = %dec(xrverd:1:0);
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

         chain x_titrnr nctsih05;
         if not %found;
         // Avslutt når MRN ikke finnes.
           *inlr = *on;
           return;
         endif;

         // Slett houseconsignment og item
         setll (tiavd: titdn) nctsii;
         reade (tiavd: titdn) nctsii;
         dow not %eof;
           delete nctsiir;
           reade (tiavd: titdn) nctsii;
         enddo;
         setll (tiavd: titdn) nctsic;
         reade (tiavd: titdn) nctsic;
         dow not %eof;
           delete nctsicr;
           reade (tiavd: titdn) nctsic;
         enddo;

         tist   = 'U';
         tidk   = x_tidk;
         tidtg  = %dec(x_tidtg:8:0);
         tisecu = x_tisecu;
         tirdin = x_tirdin;
         nivkb  = 0;
         // blank alle NI-feltene

       endsr;

       //**********************************************
       begsr srxml2;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'referenceNumber';
             titsb = xrverd;
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml3;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             titinh = xrverd;
           when xrnv = 'TIRHolderIdentificationNumber';
             titirh = xrverd;
           when xrnv = 'name';
             tinah  = xrverd;
           when xrnv = 'Address';
             exsr srxml301;
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml301;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tiad1h = xrverd;
           when xrnv = 'postcode';
             tipnh  = xrverd;
           when xrnv = 'city';
             tipsh  = xrverd;
           when xrnv = 'country';
             tilkh  = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml4;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             titint = xrverd;
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml5;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'continueUnloading';
             tistlo = %dec(xrverd:1:0);
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6;
       //**********************************************

         x2_xrlev1 = xrlev1;
         x2_xrlev2 = 1;
         x2_xrlev3 = 0;

         chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'countryOfDestination';
             tiblk  = xrverd;
           when xrnv = 'containerIndicator';
             tikdc  = xrverd;
           when xrnv = 'inlandModeOfTransport';
             titmin = %dec(xrverd:1:0);
           when xrnv = 'grossMass';
             //tivkb  = %float(xrverd);
             tivkb = %dec(xrverd:13:3);
           when xrnv = 'Consignor';
             exsr srxml601;
           when xrnv = 'Consignee';
             exsr srxml602;
           when xrnv = 'TransportEquipment';
             exsr srxml603;
           when xrnv = 'DepartureTransportMeans';
             exsr srxml604;
           when xrnv = 'PreviousDocument';
             exsr srxml605;
           when xrnv = 'SupportingDocument';
             exsr srxml606;
           when xrnv = 'TransportDocument';
             exsr srxml607;
           when xrnv = 'AdditionalReference';
             exsr srxml608;
           when xrnv = 'AdditionalInformation';
             exsr srxml609;
           when xrnv = 'Incident';
             exsr srxml610;
           when xrnv = 'HouseConsignment';
             exsr srxml620;
           endsl;

           x2_xrlev2 = x2_xrlev2 + 1;
           chain (xrsn:x2_xrlev1:x2_xrlev2:x2_xrlev3) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml601;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             titins = xrverd;
           when xrnv = 'name';
             tinas  = xrverd;
           when xrnv = 'Address';
             exsr srxml6011;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6011;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tiad1s = xrverd;
           when xrnv = 'postcode';
             tipns  = xrverd;
           when xrnv = 'city';
             tipss  = xrverd;
           when xrnv = 'country';
             tilks  = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml602;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             titink = xrverd;
           when xrnv = 'name';
             tinak  = xrverd;
           when xrnv = 'Address';
             exsr srxml6021;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6021;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tiad1k = xrverd;
           when xrnv = 'postcode';
             tipnk  = xrverd;
           when xrnv = 'city';
             tipsk  = xrverd;
           when xrnv = 'country';
             tilkk  = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml603;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'containerIdentificationNumber';
             ticnr  = xrverd;
           when xrnv = 'numberOfSeals';
             tidant = %dec(xrverd:4:0);
           when xrnv = 'Seal';
             exsr srxml6031;
           when xrnv = 'GoodsReference';
             exsr srxml6032;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6031;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'identifier';
             tidfkd = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6032;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'declarationGoodsItemNumber';
             tiginr = %dec(xrverd:5:0);
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml604;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'typeOfIdentification';
             //titrm  = %dec(xrverd:2:0);
             titaty = %dec(xrverd:2:0);
           when xrnv = 'identificationNumber';
             titaid = xrverd;
           when xrnv = 'nationality';
             titalk = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml605;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tipdty = xrverd;
           when xrnv = 'referenceNumber';
             tipdrf = xrverd;
           when xrnv = 'complementOfInformation';
             tipdin = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml606;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tisdty = xrverd;
           when xrnv = 'referenceNumber';
             tisdrf = xrverd;
           when xrnv = 'complementOfInformation';
             tisdin = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml607;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             titdty = xrverd;
           when xrnv = 'referenceNumber';
             titdrf = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml608;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tiadty = xrverd;
           when xrnv = 'referenceNumber';
             tiadrf = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml609;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'code';
             tiaicd = xrverd;
           when xrnv = 'text';
             tiaitx = xrverd;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml610;
       //**********************************************

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'code';
           when xrnv = 'text';
           when xrnv = 'Endorsement';
           //exsr srxml6101;
           when xrnv = 'Location';
           //exsr srxml6102;
           when xrnv = 'TransportEquipment';
           //exsr srxml6103;
           when xrnv = 'Transhipment';
           //exsr srxml6104;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml620;
       //**********************************************

         x_opdhc = 'J';
         clear nctsicr;
         tcavd = tiavd;
         tctdn = titdn;

         x3_xrlev1 = xrlev1;
         x3_xrlev2 = xrlev2;
         x3_xrlev3 = 1;
         x3_xrlev4 = 0;

         chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
             tcli   = %dec(xrverd:5:0);
           when xrnv = 'grossMass';
             //tcvktb = %float(xrverd);
             tcvktb = %dec(xrverd:13:3);
           when xrnv = 'securityIndicatorFromExportDeclaration';
             tcseci = %dec(xrverd:1:0);
           when xrnv = 'Consignor';
             exsr srxml6201;
           when xrnv = 'Consignee';
             exsr srxml6202;
           when xrnv = 'DepartureTransportMeans';
             exsr srxml6203;
           when xrnv = 'PreviousDocument';
             exsr srxml6204;
           when xrnv = 'SupportingDocument';
             exsr srxml6205;
           when xrnv = 'TransportDocument';
             exsr srxml6206;
           when xrnv = 'AdditionalReference';
             exsr srxml6207;
           when xrnv = 'AdditionalInformation';
             exsr srxml6208;
           when xrnv = 'ConsignmentItem';
             if x_opdhc = 'J';
             // Oppdater houseconsignment
               write nctsicr;
               x_opdhc = 'N';
             endif;
             x_tcli = tcli;
             clear nctsicr;
             tcavd = tiavd;
             tctdn = titdn;
             tcli  = x_tcli;
           // Jobb med item
             exsr srxml6209;
           endsl;

           x3_xrlev3 = x3_xrlev3 + 1;
           chain (xrsn:x3_xrlev1:x3_xrlev2:x3_xrlev3:x3_xrlev4) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6201;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             tctins = xrverd;
           when xrnv = 'name';
             tcnas  = xrverd;
           when xrnv = 'Address';
             exsr srxml62011;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62011;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tcad1s = xrverd;
           when xrnv = 'postcode';
             tcpns  = xrverd;
           when xrnv = 'city';
             tcpss  = xrverd;
           when xrnv = 'country';
             tclks  = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6202;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             tctink = xrverd;
           when xrnv = 'name';
             tcnak  = xrverd;
           when xrnv = 'Address';
             exsr srxml62021;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62021;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tcad1k = xrverd;
           when xrnv = 'postcode';
             tcpnk  = xrverd;
           when xrnv = 'city';
             tcpsk  = xrverd;
           when xrnv = 'country';
             tclkk  = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6203;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'typeOfIdentification';
             tctaty = %dec(xrverd:2:0);
           when xrnv = 'identificationNumber';
             tctaid = xrverd;
           when xrnv = 'nationality';
             tctalk = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6204;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tcpdty = xrverd;
           when xrnv = 'referenceNumber';
             tcpdrf = xrverd;
           when xrnv = 'complementOfInformation';
             tcpdin = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6205;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tcsdty = xrverd;
           when xrnv = 'referenceNumber';
             tcsdrf = xrverd;
           when xrnv = 'complementOfInformation';
             tcsdin = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6206;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tctdty = xrverd;
           when xrnv = 'referenceNumber';
             tctdrf = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6207;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tcadty = xrverd;
           when xrnv = 'referenceNumber';
             tcadrf = xrverd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6208;
       //**********************************************

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'code';
             tcaicd = xrverd;
           when xrnv = 'text';
             if xrverd = '*EXT, TILLEGGSFIL';
               chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                     :x4_xrlev5:xrlev6) xmlrcvf;
             else;
               xrvrd = xrverd;
             endif;
             tcaitx = xrvrd;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml6209;
       //**********************************************

         clear nctsiir;
         tnavd = tcavd;
         tntdn = tctdn;
         tnli  = tcli;

         PTY_T = *BLANKS;
         PNT_T = *ZEROS;
         PMR_T = *BLANKS;
         PMR_T = *BLANKS;
         xn_KOLLI = 0;

         PDTY_T = *BLANKS;
         PDRF_T = *BLANKS;
         PDGN_T = *ZEROS;
         PDIN_T = *BLANKS;
         xn_PREV = 0;

         x4_xrlev1 = xrlev1;
         x4_xrlev2 = xrlev2;
         x4_xrlev3 = xrlev3;
         x4_xrlev4 = 1;
         x4_xrlev5 = 0;

         chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
               :x4_xrlev5) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'goodsItemNumber';
             tnli2  = %dec(xrverd:5:0);
           when xrnv = 'declarationGoodsItemNumber';
             tnlit  = %dec(xrverd:5:0);
           when xrnv = 'declarationType';
             tndk   = xrverd;
           when xrnv = 'countryOfDestination';
             tnblk  = xrverd;
           when xrnv = 'Consignee';
             exsr srxml62091;
           when xrnv = 'Commodity';
             exsr srxml62092;
           when xrnv = 'Packaging';
             exsr srxml62093;
           when xrnv = 'PreviousDocument';
             exsr srxml62094;
           when xrnv = 'SupportingDocument';
             exsr srxml62095;
           when xrnv = 'TransportDocument';
             exsr srxml62096;
           when xrnv = 'AdditionalReference';
             exsr srxml62097;
           when xrnv = 'AdditionalInformation';
             exsr srxml62098;
           endsl;

           x4_xrlev4 = x4_xrlev4 + 1;
           chain (xrsn:x4_xrlev1:x4_xrlev2:x4_xrlev3:x4_xrlev4
                 :x4_xrlev5) xmlrcvf;
         enddo;

         write nctsiir;

       endsr;

       //**********************************************
       begsr srxml62091;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'identificationNumber';
             tntink = xrverd;
           when xrnv = 'name';
             tnnak  = xrverd;
           when xrnv = 'Address';
             exsr srxml620911;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml620911;
       //**********************************************

         x6_xrlev1 = xrlev1;
         x6_xrlev2 = xrlev2;
         x6_xrlev3 = xrlev3;
         x6_xrlev4 = xrlev4;
         x6_xrlev5 = xrlev5;
         x6_xrlev6 = 1;
         x6_xrlev7 = 0;

         chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
               :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'streetAndNumber';
             tnad1k = xrverd;
           when xrnv = 'postcode';
             tnpnk  = xrverd;
           when xrnv = 'city';
             tnpsk  = xrverd;
           when xrnv = 'country';
             tnlkk  = xrverd;
           endsl;

           x6_xrlev6 = x6_xrlev6 + 1;
           chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
                 :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62092;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'descriptionOfGoods';
             if xrverd = '*EXT, TILLEGGSFIL';
               chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                     :x5_xrlev5:x5_xrlev6:xrlev7) xmlrcvf;
             else;
               xrvrd = xrverd;
             endif;
             tnctx  = xrvrd;
           when xrnv = 'cusCode';
             tnccus = xrverd;
           when xrnv = 'CommodityCode';
             exsr srxml620921;
           when xrnv = 'DangerousGoods';
             exsr srxml620922;
           when xrnv = 'GoodsMeasure';
             exsr srxml620923;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml620921;
       //**********************************************

         x6_xrlev1 = xrlev1;
         x6_xrlev2 = xrlev2;
         x6_xrlev3 = xrlev3;
         x6_xrlev4 = xrlev4;
         x6_xrlev5 = xrlev5;
         x6_xrlev6 = 1;
         x6_xrlev7 = 0;

         chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
               :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'harmonizedSystemSubHeadingCode';
             //tncch  = %dec(xrverd:6:0);
             tncch  = xrverd;
           when xrnv = 'combinedNomenclatureCode';
             tncccd = xrverd;
           endsl;

           x6_xrlev6 = x6_xrlev6 + 1;
           chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
                 :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml620922;
       //**********************************************

         x6_xrlev1 = xrlev1;
         x6_xrlev2 = xrlev2;
         x6_xrlev3 = xrlev3;
         x6_xrlev4 = xrlev4;
         x6_xrlev5 = xrlev5;
         x6_xrlev6 = 1;
         x6_xrlev7 = 0;

         chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
               :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'UNNumber';
             tnunnr = xrverd;
           endsl;

           x6_xrlev6 = x6_xrlev6 + 1;
           chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
                 :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml620923;
       //**********************************************

         x6_xrlev1 = xrlev1;
         x6_xrlev2 = xrlev2;
         x6_xrlev3 = xrlev3;
         x6_xrlev4 = xrlev4;
         x6_xrlev5 = xrlev5;
         x6_xrlev6 = 1;
         x6_xrlev7 = 0;

         chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
               :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'grossMass';
             //tnvkb  = %float(xrverd);
             tnvkb = %dec(xrverd:13:3);
           when xrnv = 'netMass';
             //tnvkn  = %float(xrverd);
             tnvkn = %dec(xrverd:13:3);
           endsl;

           x6_xrlev6 = x6_xrlev6 + 1;
           chain (xrsn:x6_xrlev1:x6_xrlev2:x6_xrlev3:x6_xrlev4
                 :x6_xrlev5:x6_xrlev6:x6_xrlev7) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62093;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
             xn_KOLLI = %dec(xrverd:3:0);
           when xrnv = 'typeOfPackages';
             //tnpty  = xrverd;
             pty(xn_KOLLI) = xrverd;
           when xrnv = 'numberOfPackages';
             //tnpnt  = %dec(xrverd:8:0);
             pnt(xn_KOLLI) = %dec(xrverd:8:0);
           when xrnv = 'shippingMarks';
             if xrverd = '*EXT, TILLEGGSFIL';
               chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                     :x5_xrlev5:x5_xrlev6:xrlev7) xmlrcvf;
             else;
               xrvrd = xrverd;
             endif;
             //tnpmrk = xrvrd;
             pmr(xn_KOLLI) = xrvrd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62094;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
             xn_PREV = %dec(xrverd:3:0);
           when xrnv = 'type';
             //tnpdty = xrverd;
             pdty(xn_PREV) = xrverd;
           when xrnv = 'referenceNumber';
             pdrf(xn_PREV) = xrverd;
           when xrnv = 'goodsItemNumber';
             pdgn(xn_PREV) = %dec(xrverd:5:0);
           when xrnv = 'complementOfInformation';
             pdin(xn_PREV) = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62095;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tnsdty = xrverd;
           when xrnv = 'referenceNumber';
             tnsdrf = xrverd;
           when xrnv = 'complementOfInformation';
             tnsdin = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62096;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tntdty = xrverd;
           when xrnv = 'referenceNumber';
             tntdrf = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62097;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'type';
             tnadty = xrverd;
           when xrnv = 'referenceNumber';
             tnadrf = xrverd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr srxml62098;
       //**********************************************

         x5_xrlev1 = xrlev1;
         x5_xrlev2 = xrlev2;
         x5_xrlev3 = xrlev3;
         x5_xrlev4 = xrlev4;
         x5_xrlev5 = 1;
         x5_xrlev6 = 0;

         chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
               :x5_xrlev5:x5_xrlev6) xmlrcvf;
         dow %found;
           select;
           when xrnv = 'sequenceNumber';
           when xrnv = 'code';
             tnaicd = xrverd;
           when xrnv = 'text';
             if xrverd = '*EXT, TILLEGGSFIL';
               chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                     :x5_xrlev5:x5_xrlev6:xrlev7) xmlrcvf;
             else;
               xrvrd = xrverd;
             endif;
             tnaitx = xrvrd;
           endsl;

           x5_xrlev5 = x5_xrlev5 + 1;
           chain (xrsn:x5_xrlev1:x5_xrlev2:x5_xrlev3:x5_xrlev4
                 :x5_xrlev5:x5_xrlev6) xmlrcvf;
         enddo;

       endsr;

       //**********************************************
       begsr opdopd;
       //**********************************************

         update nctsihr;

         setll (tiavd: titdn: 99999999) edim2;
         readpe (tiavd: titdn) edim2;

         chain 1 edic;
         cmn = cmn + 1;
         update edicr;
         mmn = cmn;
         m0065  = 'XMLDEC';
         m0068  = x0068;
         m1001  = 'TEI';
         m1225  = '043';
         msn    = xrsn;
         msr    = 'R';
         mst    = 'C';
         mdt    = %float(wdt);
         mtm    = %float(wtm);
         m0068a = x0068a;
         m0068b = x0068b;
         m1n07  = '043';
         mavd   = tiavd;
         mtdn   = titdn;
         write edimr;

       endsr;

       //**********************************************
       begsr ttsr;
       //**********************************************

         ttavd  = tiavd;
         ttopd  = titdn;
         ttacti = 'T43';
         ttdate = %float(wdt);
         tttime = %float(wtm);
         ttuser = zuser;
         tttext = 'Unloading customs NCTS '
                  + %trim(%editc(tidtg:'Z'))+ ' '  + %trim(titrnr);
         tttexl = 'Lossetillatelse toll.no NCTS'
                  + %trim(%editc(tidtg:'Z'))+ ' '  + %trim(titrnr);
         write trackfr;

       endsr;

       //**********************************************
       begsr godsjsr;
       //**********************************************

        // OPPDATER GODSJOURNAL
         chain 'SYGODS         ' syprod;
         if %found and prinst = 'J';
           gogn = tign;
        // hent evt bilnummer fra 1 post
           gotrnr = *blanks;
           xxbiln = *blanks;
           setll (gogn: gotrnr) godsjl05;
           reade gogn godsjl05;
           if %found;
             xxbiln = gobiln;
           endif;
           gotrnr = titrnr;
           chain (gogn: gotrnr) godsjl05;
           if not %found;
             gotrnr = *blanks;
             chain (gogn: gotrnr) godsjl05;
           endif;
           gotrnr = titrnr;
           if not %found;
             clear godsjr;
           //goccaa = titrdt;
             goccaa = tidtgca;
             gomott = tinak;
             gogn   = tign;
           //goavg  = ticats;
             gotrty = tidk;
             gotrnr = titrnr;
             gotrdt = tidtg;
             if xxbiln <> *blanks;
               gobiln = xxbiln;
             else;
               gobiln = titaid;
             endif;
             write godsjr;
             gohkod = 'N';
             exsr gohist;
           else;
           //goavg  = ticats;
             gotrty = tidk;
             gotrdt = tidtg;
             if xxbiln <> *blanks;
               gobiln = xxbiln;
             else;
               gobiln = titaid;
             endif;
             update godsjr;
             gohkod = 'E';
             exsr gohist;
           endif;
           sytl10 (gogn);
         endif;

       endsr;

       //**********************************************
       begsr gohist;
       //**********************************************

         gohpgm = 'NC.154R1';
         gohdat = %float(wdt);
         gohtim = %float(wtm);
         gohusr = zuser;
         write godshr;

       endsr;

       //**********************************************
       begsr init;
       //**********************************************

         xrsn = %dec(usn:9:0);
         syge15c ( wdt : wtm );

       endsr;

      /end-free
