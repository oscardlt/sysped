             PGM        PARM(&TIL &FRA &L1)
             DCL        VAR(&TIL) TYPE(*CHAR) LEN(3)
             DCL        VAR(&TILLIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&TILSBS) TYPE(*CHAR) LEN(10)
             DCL        VAR(&FRA) TYPE(*CHAR) LEN(3)
             DCL        VAR(&FRALIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&FRASBS) TYPE(*CHAR) LEN(10)
             DCL        VAR(&L1) TYPE(*CHAR) LEN(1)
             DCL        VAR(&MAPPE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&MAPPE2) TYPE(*CHAR) LEN(50)
             DCL        VAR(&MAPPE3) TYPE(*CHAR) LEN(50)

/* DATABASEBIBLIOTEK */
             CHGVAR     VAR(&FRALIB) VALUE(&FRA *CAT 'SYSPEDF')
             CHGVAR     VAR(&TILLIB) VALUE(&TIL *CAT 'SYSPEDF')

             CHKOBJ     OBJ(&FRALIB) OBJTYPE(*LIB)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             SNDPGMMSG  MSG('FRA BIBLIOTEK FINNES IKKE.')
             GOTO       CMDLBL(SLUTT)
             ENDDO
             CHKOBJ     OBJ(&TILLIB) OBJTYPE(*LIB)
             MONMSG     MSGID(CPF9801) EXEC(GOTO CMDLBL(TAG01))
             SNDPGMMSG  MSG('TIL BIBLIOTEK FINNES ALLEREDE.')
             GOTO       CMDLBL(SLUTT)

 TAG01:      CRTLIB     LIB(&TILLIB) TEXT(&TIL)
             CRTDUPOBJ  OBJ(*ALL) FROMLIB(&FRALIB) OBJTYPE(*ALL) +
                          TOLIB(&TILLIB)
             CPYF       FROMFILE(SYSPEDF/KOFAST) +
                          TOFILE(&TILLIB/KOFAST) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             CPYF       FROMFILE(SYSPEDF/KOFAST) +
                          TOFILE(&TILLIB/KOFAST) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             CPYF       FROMFILE(&FRALIB/ARKEXT) +
                          TOFILE(&TILLIB/ARKEXT) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             CPYF       FROMFILE(&FRALIB/ARKTXT) +
                          TOFILE(&TILLIB/ARKTXT) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             CPYF       FROMFILE(&FRALIB/TELLGE) +
                          TOFILE(&TILLIB/TELLGE) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(&FRALIB/STED2) +
                          TOFILE(&TILLIB/STED2) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(&FRALIB/KODTFR) +
                          TOFILE(&TILLIB/KODTFR) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(&FRALIB/KODTLK) +
                          TOFILE(&TILLIB/KODTLK) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(SYSPEDF/EQTA902) +
                          TOFILE(&TILLIB/QQTA902) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(SYSPEDF/EQUA902) +
                          TOFILE(&TILLIB/QQUA902) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(&TILLIB)
             CALL       PGM(&TIL/SAAS01R)
             RMVLIBLE   LIB(&TILLIB)

/* L1-BIBLIOTEK */
             IF         COND(&L1 = 'N') THEN(DO)
             CHGVAR     VAR(&FRALIB) VALUE(&FRA *CAT 'L1DAT')
             CHGVAR     VAR(&TILLIB) VALUE(&TIL *CAT 'L1DAT')
             CRTLIB     LIB(&TILLIB) TEXT(&TIL)
             CRTDUPOBJ  OBJ(*ALL) FROMLIB(&FRALIB) OBJTYPE(*ALL) +
                          TOLIB(&TILLIB)
             CPYF       FROMFILE(&FRALIB/VALUF) +
                          TOFILE(&TILLIB/VALUF) MBROPT(*REPLACE) +
                          FMTOPT(*MAP *DROP)
             MONMSG     MSGID(CPF0000)
             ENDDO

/* ENDRINGSBIBLIOTEK */
             CHGVAR     VAR(&FRALIB) VALUE(&FRA *CAT 'SYEND')
             CHGVAR     VAR(&TILLIB) VALUE(&TIL *CAT 'SYEND')
             CPYLIB     FROMLIB(&FRALIB) TOLIB(&TILLIB)
             CHGOBJD    OBJ(QSYS/&TILLIB) OBJTYPE(*LIB) TEXT(&TIL)
             ?          CHGJOBD JOBD(&TILLIB/SY400AUTJD)
             ?          CHGJOBD JOBD(&TILLIB/SY400JOBD)
             CHGVAR     VAR(&FRALIB) VALUE('SYSBS_' *CAT &FRA)
             CHGVAR     VAR(&TILLIB) VALUE('SYSBS_' *CAT &TIL)
             RNMOBJ     OBJ(&TILLIB/&FRASBS) OBJTYPE(*SBSD) +
                          NEWOBJ(&TILSBS)
             RMVAJE     SBSD(&TILLIB/&TILSBS) JOB(SY400AUTO)
             ADDAJE     SBSD(&TILLIB/&TILSBS) JOB(SY400AUTO) +
                          JOBD(&TILLIB/SY400AUTJD)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SY400JOBQ)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) +
                          JOBQ(&TILLIB/SY400JOBQ) MAXACT(1) SEQNBR(10)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQNMAX)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) +
                          JOBQ(&TILLIB/SYJOBQNMAX) MAXACT(*NOMAX) +
                          SEQNBR(20)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQPRT)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) +
                          JOBQ(&TILLIB/SYJOBQPRT) MAXACT(5) SEQNBR(30)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQAV)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQAV) +
                          MAXACT(1) SEQNBR(40)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SY400QER)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SY400QER) +
                          MAXACT(1) SEQNBR(50)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQFAX)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) +
                          JOBQ(&TILLIB/SYJOBQFAX) MAXACT(2) SEQNBR(60)
             RMVJOBQE   SBSD(&TILLIB/&TILSBS) JOBQ(&TILLIB/SYJOBQARK)
             ADDJOBQE   SBSD(&TILLIB/&TILSBS) +
                          JOBQ(&TILLIB/SYJOBQARK) MAXACT(1) SEQNBR(70)
             WRKSBSD    SBSD(&TILSBS)

/* IFS-MAPPER */
             CHGVAR     VAR(&MAPPE) VALUE('/' *CAT &TILLIB)
             MD         DIR(&MAPPE) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/EDIRE')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/TEMP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/BACKUP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/EDIRE1K')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/TEMP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/BACKUP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/EDISE')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/TEMP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/BACKUP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/EDISE1K')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/TEMP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE3) VALUE(&MAPPE2 *CAT '/BACKUP')
             MD         DIR(&MAPPE3) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/TDS')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/TOLL')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE) VALUE('/' *CAT &TILLIB *CAT 'X')
             MD         DIR(&MAPPE) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE) VALUE('/asp/' *CAT &TIL)
             MD         DIR(&MAPPE) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE2) VALUE(&MAPPE *CAT '/mrgdel')
             MD         DIR(&MAPPE2) DTAAUT(*RWX) OBJAUT(*ALL)
             CHGVAR     VAR(&MAPPE) VALUE('/ash/' *CAT &TIL)
             MD         DIR(&MAPPE) DTAAUT(*RWX) OBJAUT(*ALL)

/* ANDRE */
             UPDDTA     FILE(ASPSYSPED/SYFIRMF)
             WRKMSGF    MSGF(&TILLIB/SYMFFIRMA)

 SLUTT:      ENDPGM
