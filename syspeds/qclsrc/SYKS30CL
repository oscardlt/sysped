/* *********************************************************************   */
/*       * RETTINGER I DETTE PROGRAM:                                      */
/* PTFnr:*Sek Sig Vers  Beskrivelse..........................              */
/* """"""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""    */
/* 11118 * 01 YBC PTF11 &FIL = 'E' --> SOM F MEN SENDE PÅ EPOST            */
/* ********************************************************************    */
    /* UTSKRIFT SYSPED RES.RAPPORT */
             PGM
             DCL        VAR(&HOLD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&SAVE) TYPE(*CHAR) LEN(4)
             DCL        VAR(&PTY) TYPE(*CHAR) LEN(10)
             DCL        VAR(&STR) TYPE(*CHAR) LEN(5)
             DCL        VAR(&LAS) TYPE(*CHAR) LEN(10)
             DCL        VAR(&UDOKN) TYPE(*DEC) LEN(3 0) VALUE(108)
             DCL        VAR(&KOPI) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&KOPIA) TYPE(*CHAR) LEN(2)
             DCL        VAR(&UKOPI) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&PARM1) TYPE(*CHAR) LEN(256)
             DCL        VAR(&IN01) TYPE(*LGL) LEN(1) /* Hvis &in01 +
                          på, betyr det avslutt program fra +
                          avdelingsvalg. */
             DCL        VAR(&PRT) TYPE(*CHAR) LEN(10) /* Printernavn */
             DCL        VAR(&JOBQ) TYPE(*CHAR) LEN(1) VALUE('J') /* +
                          JOBBKØ      */
             DCL        VAR(&FIL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&WS) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LI) TYPE(*CHAR) LEN(10) /* AVVIK - LIBR */
             DCL        VAR(&FI) TYPE(*CHAR) LEN(10) /* AVVIK - FILE */
             RTVJOBA    JOB(&WS)
             OVRMSGF    MSGF(QUSERMSG) TOMSGF(SYMSGF)

             CALL       PGM(SYKS30A) PARM(&PARM1 &JOBQ &FIL +
                          &IN01 &LI &FI)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* */
    /* HVIS KUN TIL DATAFIL, IKKE VIS PRINT-OVERSTYRING      */
/*S01        IF         COND(&FIL *NE 'F') THEN(DO) */
/*N01*/      IF         COND((&FIL *NE 'F') *AND (&FIL *NE 'E')) +
                          THEN(DO)
             CALL       PGM(SYGE18) PARM(&UDOKN &PRT &LAS &STR &PTY +
                          &HOLD &SAVE &KOPI &IN01)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT))
             ENDDO
    /* */
/* */
/* HVIS KUN TIL DATAFIL, IKKE VIS PRINT-OVERSTYRING      */
         IF         COND(&FIL *NE 'N') THEN(DO)
         CHGVAR     VAR(&JOBQ) VALUE('N')
         ENDDO
/*    */
             CHGVAR     VAR(&KOPIA) VALUE(&KOPI)
             IF         COND(&JOBQ = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYKS30CLJ) PARM(&PARM1 &PRT +
                          &PTY &JOBQ &FIL &WS &LI &FI &LAS &STR +
                          &HOLD &SAVE &KOPIA)) JOB(SYRESRAP) +
                          JOBD(*USRPRF) JOBQ(SYJOBQPRT) /*E01*/
             SNDPGMMSG  MSG('Utskrift/produksjon av datafil er sendt +
                          i jobkø SYJOBQPRT.')
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYKS30CLJ) PARM(&PARM1 &PRT &PTY &JOBQ +
                          &FIL &WS &LI &FI &LAS &STR &HOLD &SAVE +
                          &KOPIA)
                        ENDDO
    /* */
 SLUTT:      ENDPGM
