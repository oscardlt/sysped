             PGM        PARM(&KOPI)
             DCL        VAR(&PO) TYPE(*CHAR) LEN(1) VALUE('N') /* +
                          Hvis &PO = 'J', skal sortere på postnr. */
             DCL        VAR(&LG) TYPE(*CHAR) LEN(1) /* Hvis 'J', +
                          benytter linjegods fraktbrev. ellers +
                          standard frakbrev. */
             DCL        VAR(&EK) TYPE(*CHAR) LEN(1) /* Hvis 'J', +
                          benytter ekspress fraktbrev. */
             DCL        VAR(&KODE) TYPE(*CHAR) LEN(1) VALUE('F') /* +
                          KODE = 'F', 'T'. 'F'=fraktbrev, +
                          'T'=tollpassfraktbrev */
             DCL        VAR(&VB) TYPE(*CHAR) LEN(1) VALUE('N') /* +
                          Hvis &VB = 'J', skal sende valgbilde ut +
                          til bruker. */
             DCL        VAR(&SFB) TYPE(*CHAR) LEN(1)
             DCL        VAR(&BL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&ANT) TYPE(*DEC) LEN(3 0)
             DCL        VAR(&CM) TYPE(*CHAR) LEN(1)
             DCL        VAR(&ANT2) TYPE(*CHAR) LEN(3) /* Antall kopi +
                          av utskrift. */
             DCL        VAR(&KOPI) TYPE(*LGL) LEN(1) /* Hvis &KOPI = +
                          1, betyr det kopiering av +
                          flyfraktbrev-eksport. */
    /* */
             DCL        VAR(&IN01) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in01 på, betyr det avslutt program +
                          fra valgbilde. */
             DCL        VAR(&IN05) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in05 på, betyr programkallinng fra +
                          BORDERAUR. */
             DCL        VAR(&IN06) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in06 på, betyr programkalleing fra +
                          MANEFEST. */
             DCL        VAR(&IN07) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in07 på, betyr programkallinng fra +
                          KREDITERING. */
             DCL        VAR(&IN08) TYPE(*LGL) LEN(1) VALUE('0') /* +
                          Hvis &in08 på, betyr programkallinng fra +
                          FAKTURERING. */
    /* */
             DCL        VAR(&AO) TYPE(*CHAR) LEN(1) /* Hvis 'J', +
                          skriver ut arbeidsordre. */
             DCL        VAR(&KOPF) TYPE(*CHAR) LEN(1) VALUE('N') /* +
                          Hvis 'J', skriver ut KOPIER        */
             DCL        VAR(&FB) TYPE(*CHAR) LEN(1) /* Hvis 'J', +
                          skriver ut flyfrektbrev. */
             DCL        VAR(&FAK) TYPE(*CHAR) LEN(12) /* Ferdig +
                          Ferdig meldte fakturaer. */
             DCL        VAR(&AWB) TYPE(*LGL) LEN(1) /* MAWB-liste +
                          type. */
             DCL        VAR(&JBK) TYPE(*CHAR) LEN(1) /* Jobbkø. */
             DCL        VAR(&KOP2) TYPE(*CHAR) LEN(1) VALUE(' ') /* +
                          KOPI. */
             DCL        VAR(&KOWFET) TYPE(*CHAR) LEN(1)
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* HENTE AVDELING, SIGNATUR OG FIRMAKODE */
             CALL       PGM(SYFA00) PARM(&IN01)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* HENTE OPPLYSNINGER OM HVA SLAGS UTSKRIFT MAN ØNSKER */
             CALL       PGM(SYEFFR) PARM(&JBK &AO &FB &FAK &AWB +
                          &IN01 &KOPI &BL &ANT &CM &LG &EK &SFB &KOWFET)
             IF         COND(&IN01 = '1') THEN(GOTO CMDLBL(SLUTT)) /* +
                          Hvis &IN01 på, avslutter program. */
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
             IF         COND(&KOPI = '1') THEN(CHGVAR VAR(&JBK) +
                          VALUE('N'))
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT ARBEIDSORDRE */
             IF         COND(&AO = 'J') THEN(DO)
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYEX40CLJ) PARM(&KOP2)) +
                          JOB(ARBORDRE) JOBD(*USRPRF) +
                          JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYEX40CLJ) PARM(&KOP2)
                        ENDDO
                        ENDDO
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT FLY FRAKTBREV */
             IF         COND(&FB = 'J') THEN(DO)
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYEF14CLJ) PARM(&AWB &KOPI &KOWFET)) +
                          JOB(FRBREV) JOBD(*USRPRF) +
                          JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYEF14CLJ) PARM(&AWB &KOPI &KOWFET)
                        ENDDO
                        ENDDO
    /* BLANKER IMPORT GODSNUMMER                                    */
             CHGDTAARA  DTAARA(*LDA (981 15)) VALUE('               ')
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT FERDIGMELDTE FAKTURAER */
             IF         COND(&FAK = 'J') THEN(DO)
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYFA20CLJ) PARM(&FAK &IN05 +
                          &IN06 &IN07 &IN08 &KOPF)) JOB(FAKTURA) +
                          JOBD(*USRPRF) JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYFA20CLJ) PARM(&FAK &IN05 &IN06 &IN07 +
                          &IN08 &KOPF)
                        ENDDO
                        ENDDO
    /* ============================================================ */
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT BILL OF LADING         */
             IF         COND(&BL = 'J') THEN(DO)
             CHGVAR     VAR(&ANT2) VALUE(&ANT)
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYEX41CLJ) PARM(&KOPI &ANT2)) +
                          JOB(LADING) JOBD(*USRPRF) +
                          JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYEX41CLJ) PARM(&KOPI &ANT2)
                        ENDDO
                        ENDDO
    /* ============================================================ */
    /* */
    /* */
    /* ============================================================ */
    /* SKRIVER UT CMR-FRAKTBREV          */
             IF         COND(&CM = 'J') THEN(DO)
             CHGDTAARA  DTAARA(*LDA (30 5)) VALUE('00000')
             IF         COND(&JBK = 'J') THEN(DO)
             SBMJOB     CMD(CALL PGM(SYEX43CLJ) PARM(&IN01 &IN01)) +
                          JOB(CMR) JOBD(*USRPRF) JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYEX43CLJ) PARM(&IN01 &IN01)
                        ENDDO
                        ENDDO
    /* ============================================================ */
    /* SKRIVER UT FRAKTBREV */
             IF         COND(&SFB = 'J') THEN(DO)
             IF         COND(&JBK = 'J') THEN(DO)
             CHGVAR     VAR(&VB) VALUE(' ')
             SBMJOB     CMD(CALL PGM(SYFA12CLJ) PARM(&KODE &VB &EK +
                          &LG &PO)) JOB(FRBREV) JOBD(*USRPRF) +
                          JOBQ(SYJOBQPRT)
                        ENDDO
             ELSE       CMD(DO)
             CALL       PGM(SYFA12CLJ) PARM(&KODE &VB &EK &LG &PO)
                        ENDDO
                        ENDDO
    /* ----------------------------------------------------------- */
    /* */
    /* */
 SLUTT:      ENDPGM
