             PGM        PARM(&FILNV &FRALIB &TILLIB)
             DCL        VAR(&FILNV) TYPE(*CHAR) LEN(10)
             DCL        VAR(&FRALIB) TYPE(*CHAR) LEN(10) /* Drift +
                          databibliotek */
             DCL        VAR(&TILLIB) TYPE(*CHAR) LEN(10) /* +
                          Bevarende datafiler fra V6 */
             DCLF       FILE(SYV12_P21F/V12PDSPDBR)

             MOVOBJ     OBJ(&FRALIB/&FILNV) OBJTYPE(*FILE) +
                          TOLIB(&TILLIB) /* Flytt datafil fra V12 +
                          til bevareringsbibliotek. */
             MONMSG     MSGID(CPF0000)
             CPYF       FROMFILE(&FILNV) TOFILE(&FRALIB/&FILNV) +
                          FROMMBR(*ALL) TOMBR(*FROMMBR) +
                          MBROPT(*ADD) CRTFILE(*YES) /* Kopiere +
                          konvertert ny datafil fra SYV12_P21F til +
                          driftdatabibliotek. */
             MONMSG     MSGID(CPF0000)

             DSPDBR     FILE(&FILNV) OUTPUT(*OUTFILE) +
                          OUTFILE(SYV12_P21F/V12PDSPDBR) /* Liste +
                          alle logiskefiler til den nye datafilen. */
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(SLUTT))

 START:      RCVF       RCDFMT(QWHDRDBR)
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(SLUTT))

             IF         COND(&WHREFI *NE '          ') THEN(DO)
             IF         COND(&WHREFI *NE &FILNV) THEN(DO)
             CRTDUPOBJ  OBJ(&WHREFI) FROMLIB(*CURLIB) OBJTYPE(*FILE) +
                          TOLIB(&FRALIB) /* Kopiere logisk fil til +
                          driftbibliotek. */
             MONMSG     MSGID(CPF0000)
             ENDDO
             ENDDO
             GOTO       CMDLBL(START)

 SLUTT:      CLRPFM     FILE(&FILNV) /* Tømme fil i SYV12_P21F. */
             MONMSG     MSGID(CPF0000)

             ENDPGM
