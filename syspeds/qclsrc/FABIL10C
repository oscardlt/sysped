/* OBS!!                                                                      */
/*     - HARDKODET SIKRING AV USERS- FØY TIL DE &USER SOM KAN KJØRE           */
/*                                                                            */
/* OBS!!!  DENNE QUERY-REKKE MÅ BETRAKTES SOM ET HALVFABRIKATA !!!            */

             PGM
             DCL        VAR(&USER) TYPE(*CHAR) LEN(10)
             RTVJOBA    USER(&USER)

/*     - HARDKODET SIKRING AV USERS- FØY TIL DE &USER SOM KAN KJØRE           */
             IF         COND(&USER *EQ 'JOVO      ') THEN(GOTO USEROK)
             IF         COND(&USER *EQ 'STB       ') THEN(GOTO USEROK)
  /* IKKE BLANT DE UTVALGTE - HOPP UT */
             SNDPGMMSG  MSG('Du er IKKE autorisert for å kjøre denne +
                          rapporten! ')
             GOTO SLUTT


USEROK:
/* UTVALG AV BILAG (PERIODE/TYPE..) */
             RUNQRY     QRY(FABIL09) RCDSLT(*YES) QRYFILE((FAKT))

/* QTEMP/XFABIL KOBLES MOT L1/HPOSF - DE SOM IKKE FINNES I HPOS ->XFABIL10 */
/* UTVALGTE KOLONENR RENAMES (FOR OK NAVN I UTFIL) TIL TIL XFABIL10 */
             RUNQRY     QRY(FABIL10) QRYFILE((XFABIL) (HPOSF) (FIRM)) +
                        ??OUTTYPE(*DISPLAY)
         /* F3=HOPP UT*/
             MONMSG     MSGID(CPF6801) EXEC(GOTO CMDLBL(SLUTT))
             SNDPGMMSG  MSG('Dersom til *OUTFILE er nå fil XFABIL10 +
                          skapt. Send via meny epost pkt 11')
 SLUTT:      ENDPGM
