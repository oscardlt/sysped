********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
11048 * 01 CB  PTF11 Testindikator
11050 * 02 CB  PTF11 Ikke kopier alt, ikke kopier vareposter
********************************************************************
     FSVIH      UF A E           K DISK
     FSVIV1     IF   E           K DISK
     F                                     RENAME(SVIVR:SVIVR1)
     FSVIVA1    IF   E           K DISK
     F                                     RENAME(SVIVAR:SVIVAR1)
     FSVIF1     IF   E           K DISK
     F                                     RENAME(SVIFR:SVIFR1)
     FSVIV      O  A E             DISK
     FSVIVA     O  A E             DISK
     FSVIF      O  A E             DISK
     FSVIA      UF   E           K DISK
      *//////////////
      *  Hodelogikk /
      *//////////////
     C                   EXSR      SRA
     C                   EXSR      SRB
     C                   MOVE      '1'           *INLR
      *////////////////////////////////////////////////////////////
      *  Initiering                                           SRA /
      *////////////////////////////////////////////////////////////
     C     SRA           BEGSR
      *_________________
      * Input parametrer
      *"""""""""""""""""
     C     *ENTRY        PLIST
     C                   PARM                    UVIH_SYAV
     C                   PARM                    UVIH_SYOP
     C                   PARM                    UVIH_SYSG
      *___________________
      * Definiere Workfelt
      *"""""""""""""""""""
     C     *LIKE         DEFINE    SVIH_SYAV     UVIH_SYAV
     C     *LIKE         DEFINE    SVIH_SYOP     UVIH_SYOP
     C     *LIKE         DEFINE    SVIH_SYSG     UVIH_SYSG
     C     *LIKE         DEFINE    SVIH_TUID     UVIH_TUID
      *__________________
      * Definiere Nøkkler
      *""""""""""""""""""
     C     UKEY          KLIST
     C                   KFLD                    UVIH_SYAV
     C                   KFLD                    UVIH_SYOP
      *_________________________________
      * Hæmta dagens datum och klockslag
      *"""""""""""""""""""""""""""""""""
     C                   CALL      'SYGE15C'
     C                   PARM                    WDT               8
     C                   PARM                    WTM               6
     C                   ENDSR
      *////////////////////////////////////////////////////////////
      *  Bearbeide Formater                                   SRB /
      *////////////////////////////////////////////////////////////
     C     SRB           BEGSR
      * Hent tolldeklarasjon for kopiering
     C     UKEY          CHAIN(N)  SVIH                               51
      * Hent neste tolldeklarasjonsnummer
     C     UVIH_SYAV     CHAIN     SVIA                               52
     C                   ADD       1             SVIA_SYOP
     C                   UPDATE    SVIAR
     C                   EVAL      SVIH_SYOP=SVIA_SYOP
      * Lag tullid
     C                   EVAL      SVIH_TUID=*BLANKS
     C                   CALL      'SVG001R'
     C                   PARM                    SVIH_TUID
      * Andre variabler
     C                   EVAL      SVIH_SYST=*BLANKS
     C                   MOVE      WDT           SVIH_SYDT
     C                   MOVEL     SVIH_SYAV     SVIH_RFAB
     C                   MOVE      SVIH_SYOP     SVIH_RFAB
     C                   MOVE      UVIH_SYSG     SVIH_SYSG
N01  C                   MOVE      SVIA_0035     SVIH_0035
N02  C*                  GOTO      SRB1
N02  C                   EVAL      SVIH_VAKD=*BLANKS
N02  C                   EVAL      SVIH_VAKU=*ZEROS
N02  C                   EVAL      SVIH_FABL=*ZEROS
N02  C                   EVAL      SVIH_FATX=*BLANKS
N02  C                   EVAL      SVIH_FATY=*BLANKS
N02  C                   EVAL      SVIH_TRID=*BLANKS
N02  C                   EVAL      SVIH_TRLK=*BLANKS
N02  C                   EVAL      SVIH_KOTA=*ZEROS
N02  C                   EVAL      SVIH_BRUT=*ZEROS
N02  C                   EVAL      SVIH_RFAC=*BLANKS
N02  C                   EVAL      SVIH_RFAC2=*BLANKS
N02  C                   EVAL      SVIH_OVKO=*ZEROS
N02  C                   EVAL      SVIH_KARA=*ZEROS
N02  C                   EVAL      SVIH_ANRA=*ZEROS
N02  C*    SRB1          TAG
      * Skriv post
     C                   WRITE     SVIHR
      * Varuposter
N02  C                   GOTO      SRB9
     C     UKEY          SETLL     SVIV1
     C     UKEY          READE     SVIV1                                  53
     C     *IN53         DOWEQ     *OFF
     C                   EVAL      SVIV_SYOP=SVIH_SYOP
     C                   WRITE     SVIVR
     C     UKEY          READE     SVIV1                                  53
     C                   ENDDO
      * Fakturor
     C                   EVAL      *IN53=*OFF
     C     UKEY          SETLL     SVIF1
     C     UKEY          READE     SVIF1                                  53
     C     *IN53         DOWEQ     *OFF
     C                   EVAL      SVIF_SYOP=SVIH_SYOP
     C                   WRITE     SVIFR
     C     UKEY          READE     SVIF1                                  53
     C                   ENDDO
      * Avgifter
     C                   EVAL      *IN53=*OFF
     C     UKEY          SETLL     SVIVA1
     C     UKEY          READE     SVIVA1                                 53
     C     *IN53         DOWEQ     *OFF
     C                   EVAL      SVIVA_SOP=SVIH_SYOP
     C                   WRITE     SVIVAR
     C     UKEY          READE     SVIVA1                                 53
     C                   ENDDO
N02  C     SRB9          TAG
      * Endre *entry for oppdragsnummer
     C                   EVAL      UVIH_SYOP=SVIA_SYOP
     C                   ENDSR
