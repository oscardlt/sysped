/* *********************************************************************   */
/*        LOPENUMMER PÅ AWB ER INNFØRT    &LOP                             */
/* ********************************************************************    */
             PGM        PARM(&AVD &OPD &LOP &STMF &BANE &VISE &INFOP)
             DCL        VAR(&CALLTY) TYPE(*CHAR) LEN(1) VALUE('A')
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(152)
             DCL        VAR(&BANE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&PRTNA) TYPE(*CHAR) LEN(10) +
                          VALUE('SYEF14P')
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&OPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&LOP) TYPE(*CHAR) LEN(3)
             DCL        VAR(&VISE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
             DCL        VAR(&IN08) TYPE(*CHAR) LEN(1) VALUE('M')
    /* */
             DCL        VAR(&PRANT) TYPE(*CHAR) LEN(2) /* Antall +
                          utskrifter. */
    /* */
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*           SKJEKK OM PDF FINNES FRA FØR  */
             OVRPRTF    FILE(QSYSPRT) OUTQ(OUTMAIL)
             DSPLNK     OBJ(&BANE) OUTPUT(*PRINT) OBJTYPE(*STMF) +
                          DETAIL(*NAME) DSPOPT(*USER)
             MONMSG     MSGID(CPFA0A9) EXEC(GOTO CMDLBL(VIDERE))
             DLTSPLF    FILE(QSYSPRT) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             IF         COND(&VISE = 'J') THEN(DO)
             CALL       PGM(PDF001) PARM(&STMF)
             ENDDO
             RETURN
    /* */
    /* SKRIVER UT INNENLANDS FLYFRAKTBREV */
VIDERE:      OVRPRTF    FILE(MERKL1) OUTQ(OUTMAIL) PAGESIZE(18 50) +
                          CPI(10) OVRFLW(18)
             OVRPRTF    FILE(MERKL2) OUTQ(OUTMAIL) PAGESIZE(24 50) +
                          CPI(10) OVRFLW(24)
             OVRPRTF    FILE(SYEF14P) DEVTYPE(*AFPDS) PAGESIZE(96 +
                          80) LPI(8) CPI(10) +
                          OVRFLW(96) PRTQLTY(*NLQ) +
                          OUTQ(OUTMAIL) +

             CALL       PGM(SYEF14) PARM(&IN08 &PRANT &AVD &OPD &LOP +
                          &CALLTY)
    /* */
/*                                       */
             IF         COND(&INFOP = 'N') THEN(DO)
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             CVTSPLFPDF SPLF(&PRTNA) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANE) ORIENTAT(*V)
             RMVLIBLE   LIB(MMAIL)
             ENDDO
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE           */
/* MED  INFOPRINT                        */
/*                                       */
             IF         COND(&INFOP = 'J') THEN(DO)
             CALL       PGM(INF001CL) PARM(&PRTNA &QNBR &QUSER &QJOB +
                          &BANE)
                          ENDDO
/*                                       */
             IF         COND(&VISE = 'J') THEN(DO)
             CALL       PGM(PDF001) PARM(&STMF)
             ENDDO
             DLTSPLF    FILE(&PRTNA) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
             DLTSPLF    FILE(MERKL1) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
             DLTSPLF    FILE(MERKL2) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
    /* */

             ENDPGM
