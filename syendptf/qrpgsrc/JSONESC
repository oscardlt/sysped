********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
12XXX * 01 JOV PTF12 tab må escapes  (bytter med blank)
12XXX * 02 JOV PTF12 ptf1 utvides til alle ikke skrivbare
********************************************************************
N02   * Definere  hex ikke skrivbare
N02  D Iks             c                   x'000102030405060708090A0B0C0D0E0F-
N02  D                                       101112131415161718191A1B1C1D1E1F-
N02  D                                       202122232425262728292A2B2C2D2E2F-
N02  D                                       303132333435363738393A3B3C3D3E3F-
N02  D                                       41'                                x'41'=&nbsp
N02   * byttes med blank
N02  D bla             c                   x'40404040404040404040404040404040-
N02  D                                       40404040404040404040404040404040-
N02  D                                       40404040404040404040404040404040-
N02  D                                       40404040404040404040404040404040-
N02  D                                       40'
      * Prototype
     D JSONescape      PR                  ExtPgm('JSONESC')
     D   String                   32000A
      * Program Interface
     D JSONescape      PI
     D   String                   32000A
      *
      *
      * i flg dokumentasjon skal /" være rett måte å escape en " i JSON - men det blir syntaxfeil
      * Inn til videre jukser med å omsette " til '
     c*                  z-add     1             pos               5 0
     c*                  dow       pos <> 0
     c*                  EVAL      pos  = %scan ('"' : String : pos)
     c*                  if        pos <> 0
     c*                  eval      String = %replace ('/"': String: Pos :1)
     c*                  eval      pos=pos+2
     c*                  endif
     c*                  enddo
      * Midlertideig ertatter " med single-app (hex 7d)
     c     '"':X'7D'     xlate     String        String
     c     '¬':'"'       xlate     String        String
     c**   X'BB':X'40'   xlate     String        String          = | - UNØDIG Å ESCAPE ...
     c     '\':X'40'     xlate     String        String
S02  c*    X'05':X'40'   xlate     String        String                         TAB må escapes
N02  c     Iks:Bla       xlate     String        String                         ikke skrivbar->blank

     C                   SETON                                        LR
     C                   RETURN
