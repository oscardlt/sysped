      *********************************************************************
      *  utskrift aw awb fra web                                          *
      *********************************************************************
      *  After compiling this RPG MODULE,
      *  create the related program with the following command:
      *
CRTPG+*  CRTPGM SYSPED/PRINTST MODULE(*LIBL/PRINTST *LIBL/INCGI)
CRTPGM*        ACTGRP(CGI) AUT(*USE)
      *
********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
11XXX * 01 YBC PTF11 KALL INCGIFULL
********************************************************************
      *
      /copy SYSPEDS/qrpgsrcpy,hspecs
      /copy SYSPEDS/qrpgsrcpy,hspecsbnd
      *********************************************************************
      *--------------------------------------------------------------------
      * Variables common to all CGIs
      *--------------------------------------------------------------------
      /copy SYSPEDS/qrpgsrcpy,prototypeb
      /copy SYSPEDS/qrpgsrcpy,usec
      /copy SYSPEDS/qrpgsrcpy,variables3
      *
      * Varible for demonstrating countp subprocedure
     D AWBNR           S             11
     D FEILMELDING     S            150

      * State related variables
      * User space variables
     D UsrSpcName      s             10
     D UsrSpcLib       c                   'SYCGIUSP'
      * Message ID for CrtUsrSpc
     D MsgId           s              7

      *--------------------------------------------------------------------
      * Other variables
      *--------------------------------------------------------------------
      * Konstanter  Norsk (engelsk lenger nede..)
     D FMELDING1       C                   CONST('Restart av skriver-
     D                                     e er utført.')
      *=====================================================================
      * MAIN PROCESS LINE
      *=====================================================================
      * Get program start time for calculating execution time
     C                   callb     'INCGI'
     C                   parm                    BISTDL            1
S01  C*                  call      'INCGIFULL9'
N01  C                   call      'INCGIFULL'
      * Override database files
      * Get input
     C                   EVAL      NBRVARS =
     C                             zhbgetinput(savedquerystring:qusec)
      * awb
     C                   EVAL      AWBNR = zhbgetvar('AWBNR')
      * start skriver
     c                   call      'PRINTSTC'
      * BLANK I PASSORD - ANONYM PÅLOGGING -'ALLTID OK..
     C                   MOVEL     FMELDING1     FEILMELDING
     C                   callp     gethtml('HTMLSRC':
     C                             '*LIBL':
     C                             'PRINTA0':'/CGITAG/')
     C                   callp     updHTMLvar('FEILTXT':FEILMELDING)
     C                   callp     updhtmlvar('AWBNR':AWBNR)
     C                   callp     wrtsection('all')
      * Quit
     C                   exsr      Exit
      *=====================================================================
      * Close output html and quit
      *=====================================================================
     C     Exit          begsr
      * Do not delete the call to wrtsection with section name *fini.  It is needed
      * to ensure that all output html that has been buffered gets output.
     C                   callp     wrtsection('*fini')
      * Quit
     C                   MOVE      *ON           *INLR
     C                   return
     C                   endsr
