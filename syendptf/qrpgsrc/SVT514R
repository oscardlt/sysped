     FTULLTAX   IF   F 1024        DISK    BLOCK(*YES)
     FSVTX14F   UF A E             DISK

     D  A              C                   '<measureType '
     D  B              C                   '<measureTypeDescription '
     D  C              C                   '</measureType>'

     D  A01            C                   'measureComponentApplicableCode="'
     D  A02            C                   'explosionLevel="'
     D  A04            C                   'orderNumberCaptureCode="'
     D  A05            C                   'originDestinationCode="'
     D  A06            C                   'priorityCode="'
     D  A07            C                   'measureTypeSeriesId="'
     D  A08            C                   'dateEnd="'
     D  A09            C                   'dateStart="'
     D  A10            C                   'tradeMovementCode="'
     D  A11            C                   'measureType="'

     D                 DS
     D  WDT10                  1     10
     D  WDT10Y                 1      4
     D  WDT10M                 6      7
     D  WDT10D                 9     10
     D                 DS
     D  WDT08                  1      8
     D  WDT08Y                 1      4
     D  WDT08M                 5      6
     D  WDT08D                 7      8

     ITULLTAX   AA  01
     I                                  1 1024  RDATA

     C                   EXSR      SLETT

     C                   CALL      'SYGE15C'
     C                   PARM                    WDT               8
     C                   PARM                    WTM               6

     C                   READ      TULLTAX                                51
     C     *IN51         DOWEQ     *OFF

     C     A             SCAN      RDATA                                  41
     C     B             SCAN      RDATA                                  42
     C     C             SCAN      RDATA                                  43
     C
     C                   SELECT
     C                   WHEN      *IN41
     C                   CLEAR                   SVTX14R
     C                   EXSR      XML2
     C                   WHEN      *IN42
     C                   EXSR      XML3
     C
     C                   WHEN      *IN43
     C

     C                   IF        SVTX14_10=*BLANKS
     C                   EVAL      SVTX14_10='9999-12-31'
     C                   ENDIF
     C
     C                   EVAL      WDT10=SVTX14_10
     C                   EVAL      WDT08Y=WDT10Y
     C                   EVAL      WDT08M=WDT10M
     C                   EVAL      WDT08D=WDT10D

     C     WDT08         IFGE      WDT
     C                   WRITE     SVTX14R
     C                   ENDIF
     C                   ENDSL

     C                   READ      TULLTAX                                51
     C                   ENDDO
     C                   EVAL      *INLR=*ON
      *______________________________________________________________
      * Les <measureType                                         XML2
      *""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
     C     XML2          BEGSR

     C     A01           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       32            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_03=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A02           SCAN      RDATA         X                 3 0    20
     C                   IF        *IN20
     C                   ADD       16            X
     C     '"'           SCAN      RDATA :X      Y                 3 0    21
     C                   IF        *IN20
     C     Y             SUB       X             Z                 3 0
     C                   EVAL      SVTX14_04=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A04           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       24            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_05=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A05           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       23            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_06=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A06           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       14            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_07=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A07           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       21            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_08=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A08           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       9             X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_10=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A09           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       11            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_11=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A10           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       19            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_09=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C     A11           SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       13            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      SVTX14_01=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C                   ENDSR
      *______________________________________________________________
      * Les <measureTypeDescription                              XML3
      *""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
     C     XML3          BEGSR

     C                   MOVE      *BLANKS       W21             256
     C                   MOVE      *BLANKS       W22               2

     C     'scription="' SCAN      RDATA         X                        20
     C                   IF        *IN20
     C                   ADD       11            X
     C     '"'           SCAN      RDATA :X      Y                        21
     C  N21              EVAL      Y=999
     C                   IF        *IN20
     C     Y             SUB       X             Z
     C                   EVAL      W21=%SUBST(RDATA :X:Z)
     C                   EVAL      STRINGIN=*BLANKS

     C                   EVAL      STRINGIN=*BLANKS
     C                   EVAL      STRINGIN=W21
     C                   EVAL      STRINGOUT=*BLANKS
     C                   CALL      'CVTU8SE'
     C                   PARM                    STRINGIN      30000
     C                   PARM                    STRINGOUT     30000
     C                   EVAL      W21=*BLANKS
     C                   EVAL      W21=STRINGOUT
     C                   ENDIF
     C                   ENDIF

     C     'anguageId="' SCAN      RDATA         X                 3 0    20
     C                   IF        *IN20
     C                   ADD       11            X
     C     '"'           SCAN      RDATA :X      Y                 3 0    21
     C                   IF        *IN20
     C     Y             SUB       X             Z                 3 0
     C                   EVAL      W22=%SUBST(RDATA :X:Z)
     C                   ENDIF
     C                   ENDIF

     C                   IF        W22='SV' or W22=*BLANKS
     C                   EVAL      SVTX14_02=W21
     C                   ENDIF

     C                   ENDSR
      *______________________________________________________________
      * Slett alle poster i filen                               SLETT
      *""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
     C     SLETT         BEGSR
     C                   READ      SVTX14F                                51
     C                   DOW       *IN51 = *OFF
     C                   DELETE    SVTX14R
     C                   READ      SVTX14F                                51
     C                   ENDDO
     C                   ENDSR
