      *********************************************************************
      *  RPG ILE MODULE SYSPED/FRBANNERR
      *
      *
      *  After compiling this RPG MODULE,
      *  create the related program with the following command:
      *
XXTPG+*  CRTPGM SYSPED/FRL1ONERR MODULE(*LIBL/FRL1ONERR)
XXTPGM*         ACTGRP(CGI) AUT(*USE)
      *
      *********************************************************************
      /copy syspeds/qrpgsrcpy,hspecs
      /copy syspeds/qrpgsrcpy,hspecsbnd
      *=====================================================================
      * Includes to be used in all CGIs
      *=====================================================================
      /copy syspeds/qrpgsrcpy,prototypeb
      /copy syspeds/qrpgsrcpy,usec
      /copy syspeds/qrpgsrcpy,variables3
      *--------------------------------------------------------------------
      *  Fields used for parsing the input string
     D action          s             10a
     D subaction       s             10a
      * aktiv Ord...
     D Ord             s              8a
     D Ordnr           s              8s 0
      * Bruker
     D WSUSER          S             10
      *--------------------------------------------------------------------
      *  Other program variables and constants
      *=====================================================================
      * Read remote browser input string and parse it
      *=====================================================================
      /copy syspeds/qrpgsrcpy,prolog3
     C                   exsr      Parse
      *=====================================================================
      * Main line
      *=====================================================================
      * Ask the service program to load into core
      * the appropriate output skeleton html member
     C                   callp     gethtml('HTMLSRC':'*LIBL':  'FRL1ONERR':
     C                             '/CGITAG/')
      *------------------
      * Action requested
     C                   eval      action = uppify(action)
     C                   eval      subaction = uppify(subaction)
      * Start html
     C                   callp     updHTMLvar('USER':WSUSER)
     C                   callp     wrtsection('top')
      * Gjeldende Ord
     C                   callp     updHTMLvar('ORD':
     C                             %trim(%editc(OrdNr:'Z')))
      * Vis kun når utfylt / men param finnes også som hidden
     C     Ordnr         ifne      *zeros
     C                   callp     wrtsection('gjeldende')
     C                   end
      *    buttons
     C*******            callp     wrtsection('buttons')
      * If 'FRL1O01'
     C                   IF        action = 'FRL1O01'
     C                   if        OrdNr  > 0
     C*                  callp     wrtsection('dspcart')
     C                   callp     wrtsection('finish')
     C                   endif
     C*                  callp     wrtsection('giveup')
     C                   ENDIF
      * If 'FRL1O02'
     C                   IF        action = 'FRL1O02'
     C                   if        OrdNr  > 0
     C*                  callp     wrtsection('dspcart')
     C                   callp     wrtsection('finish')
     C                   endif
     C*                  callp     wrtsection('giveup')
     C                   ENDIF
      * If 'FRL1O03'
     C                   IF        action = 'FRL1O03'
     C                   callp     wrtsection('buymore')
     C                   callp     wrtsection('finish')
     C                   callp     wrtsection('giveup')
     C                   ENDIF
      * If 'FRL1O04'=Til kassa   (bruke som avslutt/godsliste)
     C                   IF        action='FRL1O04' and subaction<>'EPILOG'
     C                   callp     wrtsection('dspcart')
     C                   callp     wrtsection('buymore')
     C                   callp     wrtsection('giveup')
     C                   ENDIF
      * End html
     C                   callp     wrtsection('end')
      * Do not delete the call to wrtsection with section name *fini.  It is needed
      * to ensure that all output html that has been buffered gets output.
     C                   callp     wrtsection('*fini')
      * Quit
     C                   return
      *=====================================================================
      * Parse the input string
      *=====================================================================
     C     Parse         begsr
     C                   eval      action     = zhbgetvar('action    ')
     C                   eval      subaction  = zhbgetvar('subaction ')
     C                   eval      Ord        = zhbgetvar('ORD       ')
     C                   eval      Ordnr      = c2n2(ord)
     C                   eval      WSUSER     = zhbgetvar('USER      ')
     C                   endsr
