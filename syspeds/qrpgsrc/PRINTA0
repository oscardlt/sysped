      *********************************************************************
      *  utskrift aw awb fra web                                          *
      *********************************************************************
      *  After compiling this RPG MODULE,
      *  create the related program with the following command:
      *
CRTPG+*  CRTPGM SYSPED/PRINTA0 MODULE(*LIBL/PRINTA0 *LIBL/INCGI)
CRTPGM*        ACTGRP(CGI) AUT(*USE)
      *
********************************************************************
      * RETTINGER I DETTE PROGRAM:
PTFnr:*Sek Sig Vers  Beskrivelse...........................
""""""*"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
11XXX * 01 YBC PTF11 KALL INCGIFULL
********************************************************************
      *
      /copy SYSPEDS/qrpgsrcpy,hspecs
      /copy SYSPEDS/qrpgsrcpy,hspecsbnd
      *********************************************************************
     FHEAD18    IF   E           K DISK    USROPN
      *--------------------------------------------------------------------
      * Variables common to all CGIs
      *--------------------------------------------------------------------
      /copy SYSPEDS/qrpgsrcpy,prototypeb
      /copy SYSPEDS/qrpgsrcpy,usec
      /copy SYSPEDS/qrpgsrcpy,variables3
      *
      * Varible for demonstrating countp subprocedure
     D AWBNR           S             11
     D FEILMELDING     S            150

      * State related variables
      * User space variables
     D UsrSpcName      s             10
     D UsrSpcLib       c                   'SYCGIUSP'
      * Message ID for CrtUsrSpc
     D MsgId           s              7

      *--------------------------------------------------------------------
      * Other variables
      *--------------------------------------------------------------------
      * Konstanter  Norsk (engelsk lenger nede..)
     D FMELDING1       C                   CONST('KAN IKKE FINNE AW-
     D                                     BNUMMER :')
     D FMELDING2       C                   CONST('Merkelapper er sk-
     D                                     revet ut.')
      *=====================================================================
      * MAIN PROCESS LINE
      *=====================================================================
      * Get program start time for calculating execution time
     C                   callb     'INCGI'
     C                   parm                    BISTDL            1
S01  C*                  call      'INCGIFULL9'
N01  C                   call      'INCGIFULL'
      * Override database files
      * Åpne fil
     C                   OPEN      HEAD18
      * Get input
     C                   EVAL      NBRVARS =
     C                             zhbgetinput(savedquerystring:qusec)
      * Bruker-id
     C                   EVAL      AWBNR = zhbgetvar('AWBNR')
     c                   move      AWBNR         HEGN
      * Test awbnr
     C     HEGN          CHAIN     HEAD18                             30
     c     *in30         ifeq      '0'
     c                   call      'TDV17CW'
     c                   parm                    awbnr
     c                   end
      *
     C   30              MOVEL     FMELDING1     FEILMELDING
     C   30FEILMELDING   CAT       AWBNR:1       FEILMELDING
     C  N30              MOVEL     FMELDING2     FEILMELDING
     C                   CLOSE     HEAD18
     C                   callp     gethtml('HTMLSRC':
     C                             '*LIBL':
     C                             'PRINTA0':'/CGITAG/')
     C                   callp     updHTMLvar('FEILTXT':FEILMELDING)
     C                   callp     updHTMLvar('AWBNR':AWBNR)
     C                   callp     wrtsection('all')
      * Quit
     C                   exsr      Exit
      *=====================================================================
      * Close output html and quit
      *=====================================================================
     C     Exit          begsr
      * Do not delete the call to wrtsection with section name *fini.  It is needed
      * to ensure that all output html that has been buffered gets output.
     C                   callp     wrtsection('*fini')
      * Quit
     C                   MOVE      *ON           *INLR
     C                   return
     C                   endsr
