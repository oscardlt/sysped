/* INFOP = 'D'     */
/* N01 LAGER EGNE WORKFILER */
/* GOOBLE TEMPBANE INNFØRT */
             PGM        PARM(&AVD &SVIOPD &KODE &STMF &BANE &BANEG &VISE +
                          &INFOP)
             DCL        VAR(&KODE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&CALLTY) TYPE(*CHAR) LEN(1) VALUE('A')
             DCL        VAR(&INFOP) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STMF) TYPE(*CHAR) LEN(152)
             DCL        VAR(&BANE) TYPE(*CHAR) LEN(50)
             DCL        VAR(&BANEG) TYPE(*CHAR) LEN(50)
             DCL        VAR(&BANENY) TYPE(*CHAR) LEN(50)
             DCL        VAR(&PRTNA) TYPE(*CHAR) LEN(10)
             DCL        VAR(&AVD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&SVIOPD) TYPE(*CHAR) LEN(7)
             DCL        VAR(&VISE) TYPE(*CHAR) LEN(1)
             DCL        VAR(&QUSER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QJOB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&QNBR) TYPE(*CHAR) LEN(6)
    /* */
             RTVJOBA    JOB(&QJOB) USER(&QUSER) NBR(&QNBR)
/*           SKJEKK OM PDF FINNES FRA FØR  */
             OVRPRTF    FILE(QSYSPRT) OUTQ(OUTMAIL)
             DSPLNK     OBJ(&BANE) OUTPUT(*PRINT) OBJTYPE(*STMF) +
                          DETAIL(*NAME) DSPOPT(*USER)
             MONMSG     MSGID(CPFA0A9) EXEC(GOTO CMDLBL(VIDERE))
             DLTSPLF    FILE(QSYSPRT) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             IF         COND(&VISE = 'J') THEN(DO)
             CALL       PGM(PDF001) PARM(&STMF)
             ENDDO
             RETURN
    /*  INFOP D->'N'       */
             IF         COND(&INFOP = 'D') THEN(CHGVAR VAR(&INFOP) +
                          VALUE('N'))
    /*                     */
VIDERE:      IF         COND(&KODE = 'I') THEN(DO)
/*N01 CREER WORFIL I QTEMP START */
/* SVI006F */
             CRTDUPOBJ  OBJ(SVI006F) FROMLIB(*LIBL) OBJTYPE(*FILE) +
                          TOLIB(QTEMP)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(QTEMP/SVI006F)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(SVI006F) TOFILE(QTEMP/SVI006F)
             MONMSG     MSGID(CPF0000)
/* SVI006F2 */
             CRTDUPOBJ  OBJ(SVI006F2) FROMLIB(*LIBL) OBJTYPE(*FILE) +
                          TOLIB(QTEMP)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(QTEMP/SVI006F2)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(SVI006F2) TOFILE(QTEMP/SVI006F2)
             MONMSG     MSGID(CPF0000)
/*N01 CREER WORFIL I QTEMP SLUTT */
             CALL       PGM(SVI006R) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVI006P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = 'E') THEN(DO)
/*N01 CREER WORFIL I QTEMP START */
/* SVE006F */
             CRTDUPOBJ  OBJ(SVE006F) FROMLIB(*LIBL) OBJTYPE(*FILE) +
                          TOLIB(QTEMP)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(QTEMP/SVE006F)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(SVE006F) TOFILE(QTEMP/SVE006F)
             MONMSG     MSGID(CPF0000)
/* SVE006F2 */
             CRTDUPOBJ  OBJ(SVE006F2) FROMLIB(*LIBL) OBJTYPE(*FILE) +
                          TOLIB(QTEMP)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(QTEMP/SVE006F2)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(SVE006F2) TOFILE(QTEMP/SVE006F2)
             MONMSG     MSGID(CPF0000)
/*N01 CREER WORFIL I QTEMP SLUTT */
             CALL       PGM(SVE006R) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVE006P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = '1') THEN(DO)
/* SVI006F */
             CRTDUPOBJ  OBJ(SVI006F) FROMLIB(*LIBL) OBJTYPE(*FILE) +
                          TOLIB(QTEMP)
             MONMSG     MSGID(CPF0000)
             CLRPFM     FILE(QTEMP/SVI006F)
             MONMSG     MSGID(CPF0000)
             OVRDBF     FILE(SVI006F) TOFILE(QTEMP/SVI006F)
             MONMSG     MSGID(CPF0000)
             CALL       PGM(SVI007RT) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVI007PT')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = '2') THEN(DO)
             CALL       PGM(SVI008R) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVI008P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = '3') THEN(DO)
             CALL       PGM(SVE007R) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVE007P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = '4') THEN(DO)
             CALL       PGM(SVE008R) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVE008P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = 'Z') THEN(DO)
             CALL       PGM(SVZ002RA) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVZ002P')
             ENDDO
    /*                     */
    /*                     */
             IF         COND(&KODE = '5') THEN(DO)
             CALL       PGM(SVZ004RA) PARM(&AVD &SVIOPD &CALLTY)
             CHGVAR     VAR(&PRTNA) VALUE('SVZ004P')
             ENDDO
    /*                     */
    /*                     */
/*                                       */
             IF         COND(&INFOP = 'N') THEN(DO)
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             CVTSPLFPDF SPLF(&PRTNA) JOB(&QNBR/&QUSER/&QJOB) +
                          TOPDF(&BANE) ORIENTAT(*V)
             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             ENDDO
/*                                       */
/* LAGER PDF OG LEGGER I MAPPE           */
/* MED  INFOPRINT                        */
/*                                       */
             IF         COND(&INFOP = 'J') THEN(DO)
             ADDLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
             CALL       PGM(INF001CL) PARM(&PRTNA &QNBR &QUSER &QJOB +
                          &BANE)
             RMVLIBLE   LIB(MMAIL)
             MONMSG     MSGID(CPF0000)
                          ENDDO
             CHGVAR     VAR(&BANENY) VALUE(&BANE)
             IF         COND(&BANEG *NE *BLANKS) +
                          THEN(DO)
             CHGVAR     VAR(&BANENY) VALUE(&BANEG)
/*DACHSER*/               ENDDO
/*DACHSER*/  IF         COND(&KODE = 'Z' *OR &KODE = '5') THEN(DO)
/*DACHSER*/  CALL       PGM(SVE071C) PARM(&BANENY)
/*DACHSER*/               ENDDO
/*                                       */
             IF         COND(&VISE = 'J') THEN(DO)
             CALL       PGM(PDF001) PARM(&STMF)
             ENDDO
             DLTSPLF    FILE(&PRTNA) JOB(&QNBR/&QUSER/&QJOB) +
                          SPLNBR(*LAST)
             MONMSG     MSGID(CPF0000)
    /* */

             ENDPGM
